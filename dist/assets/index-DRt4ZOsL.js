var B0=Object.defineProperty;var z0=(e,t,n)=>t in e?B0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var et=(e,t,n)=>z0(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function U0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lp={exports:{}},yu={},sp={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zs=Symbol.for("react.element"),V0=Symbol.for("react.portal"),$0=Symbol.for("react.fragment"),H0=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),W0=Symbol.for("react.context"),Y0=Symbol.for("react.forward_ref"),X0=Symbol.for("react.suspense"),Q0=Symbol.for("react.memo"),Z0=Symbol.for("react.lazy"),bd=Symbol.iterator;function J0(e){return e===null||typeof e!="object"?null:(e=bd&&e[bd]||e["@@iterator"],typeof e=="function"?e:null)}var ip={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},up=Object.assign,cp={};function Al(e,t,n){this.props=e,this.context=t,this.refs=cp,this.updater=n||ip}Al.prototype.isReactComponent={};Al.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Al.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fp(){}fp.prototype=Al.prototype;function Ef(e,t,n){this.props=e,this.context=t,this.refs=cp,this.updater=n||ip}var Rf=Ef.prototype=new fp;Rf.constructor=Ef;up(Rf,Al.prototype);Rf.isPureReactComponent=!0;var Ad=Array.isArray,dp=Object.prototype.hasOwnProperty,Tf={current:null},mp={key:!0,ref:!0,__self:!0,__source:!0};function pp(e,t,n){var r,o={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)dp.call(t,r)&&!mp.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:zs,type:e,key:a,ref:l,props:o,_owner:Tf.current}}function q0(e,t){return{$$typeof:zs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pf(e){return typeof e=="object"&&e!==null&&e.$$typeof===zs}function eg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ld=/\/+/g;function $u(e,t){return typeof e=="object"&&e!==null&&e.key!=null?eg(""+e.key):t.toString(36)}function Li(e,t,n,r,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case zs:case V0:l=!0}}if(l)return l=e,o=o(l),e=r===""?"."+$u(l,0):r,Ad(o)?(n="",e!=null&&(n=e.replace(Ld,"$&/")+"/"),Li(o,t,n,"",function(c){return c})):o!=null&&(Pf(o)&&(o=q0(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(Ld,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=r===""?".":r+":",Ad(e))for(var s=0;s<e.length;s++){a=e[s];var u=r+$u(a,s);l+=Li(a,t,n,u,o)}else if(u=J0(e),typeof u=="function")for(e=u.call(e),s=0;!(a=e.next()).done;)a=a.value,u=r+$u(a,s++),l+=Li(a,t,n,u,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ui(e,t,n){if(e==null)return e;var r=[],o=0;return Li(e,r,"","",function(a){return t.call(n,a,o++)}),r}function tg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yn={current:null},Ni={transition:null},ng={ReactCurrentDispatcher:yn,ReactCurrentBatchConfig:Ni,ReactCurrentOwner:Tf};function hp(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:ui,forEach:function(e,t,n){ui(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ui(e,function(){t++}),t},toArray:function(e){return ui(e,function(t){return t})||[]},only:function(e){if(!Pf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=Al;le.Fragment=$0;le.Profiler=K0;le.PureComponent=Ef;le.StrictMode=H0;le.Suspense=X0;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ng;le.act=hp;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=up({},e.props),o=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Tf.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)dp.call(t,u)&&!mp.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&s!==void 0?s[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:zs,type:e.type,key:o,ref:a,props:r,_owner:l}};le.createContext=function(e){return e={$$typeof:W0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:G0,_context:e},e.Consumer=e};le.createElement=pp;le.createFactory=function(e){var t=pp.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:Y0,render:e}};le.isValidElement=Pf;le.lazy=function(e){return{$$typeof:Z0,_payload:{_status:-1,_result:e},_init:tg}};le.memo=function(e,t){return{$$typeof:Q0,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=Ni.transition;Ni.transition={};try{e()}finally{Ni.transition=t}};le.unstable_act=hp;le.useCallback=function(e,t){return yn.current.useCallback(e,t)};le.useContext=function(e){return yn.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return yn.current.useDeferredValue(e)};le.useEffect=function(e,t){return yn.current.useEffect(e,t)};le.useId=function(){return yn.current.useId()};le.useImperativeHandle=function(e,t,n){return yn.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return yn.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return yn.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return yn.current.useMemo(e,t)};le.useReducer=function(e,t,n){return yn.current.useReducer(e,t,n)};le.useRef=function(e){return yn.current.useRef(e)};le.useState=function(e){return yn.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return yn.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return yn.current.useTransition()};le.version="18.3.1";sp.exports=le;var S=sp.exports;const gp=U0(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=S,og=Symbol.for("react.element"),ag=Symbol.for("react.fragment"),lg=Object.prototype.hasOwnProperty,sg=rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ig={key:!0,ref:!0,__self:!0,__source:!0};function yp(e,t,n){var r,o={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)lg.call(t,r)&&!ig.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:og,type:e,key:a,ref:l,props:o,_owner:sg.current}}yu.Fragment=ag;yu.jsx=yp;yu.jsxs=yp;lp.exports=yu;var v=lp.exports,Tc={},vp={exports:{}},$n={},xp={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,$){var O=N.length;N.push($);e:for(;0<O;){var ee=O-1>>>1,Z=N[ee];if(0<o(Z,$))N[ee]=$,N[O]=Z,O=ee;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var $=N[0],O=N.pop();if(O!==$){N[0]=O;e:for(var ee=0,Z=N.length,we=Z>>>1;ee<we;){var Ee=2*(ee+1)-1,de=N[Ee],Q=Ee+1,ce=N[Q];if(0>o(de,O))Q<Z&&0>o(ce,de)?(N[ee]=ce,N[Q]=O,ee=Q):(N[ee]=de,N[Ee]=O,ee=Ee);else if(Q<Z&&0>o(ce,O))N[ee]=ce,N[Q]=O,ee=Q;else break e}}return $}function o(N,$){var O=N.sortIndex-$.sortIndex;return O!==0?O:N.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,s=l.now();e.unstable_now=function(){return l.now()-s}}var u=[],c=[],y=1,d=null,w=3,h=!1,M=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(N){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=N)r(c),$.sortIndex=$.expirationTime,t(u,$);else break;$=n(c)}}function R(N){if(k=!1,g(N),!M)if(n(u)!==null)M=!0,Ie(T);else{var $=n(c);$!==null&&Vt(R,$.startTime-N)}}function T(N,$){M=!1,k&&(k=!1,p(I),I=-1),h=!0;var O=w;try{for(g($),d=n(u);d!==null&&(!(d.expirationTime>$)||N&&!Se());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,w=d.priorityLevel;var Z=ee(d.expirationTime<=$);$=e.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(u)&&r(u),g($)}else r(u);d=n(u)}if(d!==null)var we=!0;else{var Ee=n(c);Ee!==null&&Vt(R,Ee.startTime-$),we=!1}return we}finally{d=null,w=O,h=!1}}var C=!1,F=null,I=-1,j=5,G=-1;function Se(){return!(e.unstable_now()-G<j)}function ot(){if(F!==null){var N=e.unstable_now();G=N;var $=!0;try{$=F(!0,N)}finally{$?ye():(C=!1,F=null)}}else C=!1}var ye;if(typeof f=="function")ye=function(){f(ot)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,Ut=Be.port2;Be.port1.onmessage=ot,ye=function(){Ut.postMessage(null)}}else ye=function(){P(ot,0)};function Ie(N){F=N,C||(C=!0,ye())}function Vt(N,$){I=P(function(){N(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){M||h||(M=!0,Ie(T))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(N){switch(w){case 1:case 2:case 3:var $=3;break;default:$=w}var O=w;w=$;try{return N()}finally{w=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,$){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var O=w;w=N;try{return $()}finally{w=O}},e.unstable_scheduleCallback=function(N,$,O){var ee=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ee+O:ee):O=ee,N){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=O+Z,N={id:y++,callback:$,priorityLevel:N,startTime:O,expirationTime:Z,sortIndex:-1},O>ee?(N.sortIndex=O,t(c,N),n(u)===null&&N===n(c)&&(k?(p(I),I=-1):k=!0,Vt(R,O-ee))):(N.sortIndex=Z,t(u,N),M||h||(M=!0,Ie(T))),N},e.unstable_shouldYield=Se,e.unstable_wrapCallback=function(N){var $=w;return function(){var O=w;w=$;try{return N.apply(this,arguments)}finally{w=O}}}})(Sp);xp.exports=Sp;var ug=xp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg=S,Vn=ug;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wp=new Set,ws={};function ja(e,t){Rl(e,t),Rl(e+"Capture",t)}function Rl(e,t){for(ws[e]=t,e=0;e<t.length;e++)wp.add(t[e])}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pc=Object.prototype.hasOwnProperty,fg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nd={},Dd={};function dg(e){return Pc.call(Dd,e)?!0:Pc.call(Nd,e)?!1:fg.test(e)?Dd[e]=!0:(Nd[e]=!0,!1)}function mg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pg(e,t,n,r){if(t===null||typeof t>"u"||mg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vn(e,t,n,r,o,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jt[e]=new vn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Jt[t]=new vn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jt[e]=new vn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jt[e]=new vn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jt[e]=new vn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jt[e]=new vn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jt[e]=new vn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jt[e]=new vn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jt[e]=new vn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ff=/[\-:]([a-z])/g;function _f(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ff,_f);Jt[t]=new vn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ff,_f);Jt[t]=new vn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ff,_f);Jt[t]=new vn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jt[e]=new vn(e,1,!1,e.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jt[e]=new vn(e,1,!1,e.toLowerCase(),null,!0,!0)});function If(e,t,n,r){var o=Jt.hasOwnProperty(t)?Jt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pg(t,n,o,r)&&(n=null),r||o===null?dg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var yo=cg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ci=Symbol.for("react.element"),sl=Symbol.for("react.portal"),il=Symbol.for("react.fragment"),bf=Symbol.for("react.strict_mode"),Fc=Symbol.for("react.profiler"),kp=Symbol.for("react.provider"),Cp=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),_c=Symbol.for("react.suspense"),Ic=Symbol.for("react.suspense_list"),Lf=Symbol.for("react.memo"),zo=Symbol.for("react.lazy"),Mp=Symbol.for("react.offscreen"),jd=Symbol.iterator;function Yl(e){return e===null||typeof e!="object"?null:(e=jd&&e[jd]||e["@@iterator"],typeof e=="function"?e:null)}var rt=Object.assign,Hu;function ss(e){if(Hu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Hu=t&&t[1]||""}return`
`+Hu+e}var Ku=!1;function Gu(e,t){if(!e||Ku)return"";Ku=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),a=r.stack.split(`
`),l=o.length-1,s=a.length-1;1<=l&&0<=s&&o[l]!==a[s];)s--;for(;1<=l&&0<=s;l--,s--)if(o[l]!==a[s]){if(l!==1||s!==1)do if(l--,s--,0>s||o[l]!==a[s]){var u=`
`+o[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=s);break}}}finally{Ku=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ss(e):""}function hg(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=Gu(e.type,!1),e;case 11:return e=Gu(e.type.render,!1),e;case 1:return e=Gu(e.type,!0),e;default:return""}}function bc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case il:return"Fragment";case sl:return"Portal";case Fc:return"Profiler";case bf:return"StrictMode";case _c:return"Suspense";case Ic:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Cp:return(e.displayName||"Context")+".Consumer";case kp:return(e._context.displayName||"Context")+".Provider";case Af:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Lf:return t=e.displayName||null,t!==null?t:bc(e.type)||"Memo";case zo:t=e._payload,e=e._init;try{return bc(e(t))}catch{}}return null}function gg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bc(t);case 8:return t===bf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ta(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ep(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yg(e){var t=Ep(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fi(e){e._valueTracker||(e._valueTracker=yg(e))}function Rp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ep(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ac(e,t){var n=t.checked;return rt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Od(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ta(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tp(e,t){t=t.checked,t!=null&&If(e,"checked",t,!1)}function Lc(e,t){Tp(e,t);var n=ta(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Nc(e,t.type,ta(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Nc(e,t,n){(t!=="number"||Wi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var is=Array.isArray;function Sl(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ta(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Dc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return rt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(is(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ta(n)}}function Pp(e,t){var n=ta(t.value),r=ta(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ud(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var di,_p=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(di=di||document.createElement("div"),di.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=di.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ks(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vg=["Webkit","ms","Moz","O"];Object.keys(ds).forEach(function(e){vg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ds[t]=ds[e]})});function Ip(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ds.hasOwnProperty(e)&&ds[e]?(""+t).trim():t+"px"}function bp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Ip(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var xg=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oc(e,t){if(t){if(xg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Bc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=null;function Nf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Uc=null,wl=null,kl=null;function Vd(e){if(e=$s(e)){if(typeof Uc!="function")throw Error(A(280));var t=e.stateNode;t&&(t=ku(t),Uc(e.stateNode,e.type,t))}}function Ap(e){wl?kl?kl.push(e):kl=[e]:wl=e}function Lp(){if(wl){var e=wl,t=kl;if(kl=wl=null,Vd(e),t)for(e=0;e<t.length;e++)Vd(t[e])}}function Np(e,t){return e(t)}function Dp(){}var Wu=!1;function jp(e,t,n){if(Wu)return e(t,n);Wu=!0;try{return Np(e,t,n)}finally{Wu=!1,(wl!==null||kl!==null)&&(Dp(),Lp())}}function Cs(e,t){var n=e.stateNode;if(n===null)return null;var r=ku(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var Vc=!1;if(mo)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){Vc=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{Vc=!1}function Sg(e,t,n,r,o,a,l,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(y){this.onError(y)}}var ms=!1,Yi=null,Xi=!1,$c=null,wg={onError:function(e){ms=!0,Yi=e}};function kg(e,t,n,r,o,a,l,s,u){ms=!1,Yi=null,Sg.apply(wg,arguments)}function Cg(e,t,n,r,o,a,l,s,u){if(kg.apply(this,arguments),ms){if(ms){var c=Yi;ms=!1,Yi=null}else throw Error(A(198));Xi||(Xi=!0,$c=c)}}function Oa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Op(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $d(e){if(Oa(e)!==e)throw Error(A(188))}function Mg(e){var t=e.alternate;if(!t){if(t=Oa(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return $d(o),e;if(a===r)return $d(o),t;a=a.sibling}throw Error(A(188))}if(n.return!==r.return)n=o,r=a;else{for(var l=!1,s=o.child;s;){if(s===n){l=!0,n=o,r=a;break}if(s===r){l=!0,r=o,n=a;break}s=s.sibling}if(!l){for(s=a.child;s;){if(s===n){l=!0,n=a,r=o;break}if(s===r){l=!0,r=a,n=o;break}s=s.sibling}if(!l)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function Bp(e){return e=Mg(e),e!==null?zp(e):null}function zp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zp(e);if(t!==null)return t;e=e.sibling}return null}var Up=Vn.unstable_scheduleCallback,Hd=Vn.unstable_cancelCallback,Eg=Vn.unstable_shouldYield,Rg=Vn.unstable_requestPaint,mt=Vn.unstable_now,Tg=Vn.unstable_getCurrentPriorityLevel,Df=Vn.unstable_ImmediatePriority,Vp=Vn.unstable_UserBlockingPriority,Qi=Vn.unstable_NormalPriority,Pg=Vn.unstable_LowPriority,$p=Vn.unstable_IdlePriority,vu=null,Br=null;function Fg(e){if(Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(vu,e,void 0,(e.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:bg,_g=Math.log,Ig=Math.LN2;function bg(e){return e>>>=0,e===0?32:31-(_g(e)/Ig|0)|0}var mi=64,pi=4194304;function us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var s=l&~o;s!==0?r=us(s):(a&=l,a!==0&&(r=us(a)))}else l=n&~o,l!==0?r=us(l):a!==0&&(r=us(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Cr(t),o=1<<n,r|=e[n],t&=~o;return r}function Ag(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Cr(a),s=1<<l,u=o[l];u===-1?(!(s&n)||s&r)&&(o[l]=Ag(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}function Hc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hp(){var e=mi;return mi<<=1,!(mi&4194240)&&(mi=64),e}function Yu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Us(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cr(t),e[t]=n}function Ng(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Cr(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}function jf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Cr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Me=0;function Kp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gp,Of,Wp,Yp,Xp,Kc=!1,hi=[],Wo=null,Yo=null,Xo=null,Ms=new Map,Es=new Map,$o=[],Dg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kd(e,t){switch(e){case"focusin":case"focusout":Wo=null;break;case"dragenter":case"dragleave":Yo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":Ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(t.pointerId)}}function Ql(e,t,n,r,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},t!==null&&(t=$s(t),t!==null&&Of(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function jg(e,t,n,r,o){switch(t){case"focusin":return Wo=Ql(Wo,e,t,n,r,o),!0;case"dragenter":return Yo=Ql(Yo,e,t,n,r,o),!0;case"mouseover":return Xo=Ql(Xo,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Ms.set(a,Ql(Ms.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Es.set(a,Ql(Es.get(a)||null,e,t,n,r,o)),!0}return!1}function Qp(e){var t=Ta(e.target);if(t!==null){var n=Oa(t);if(n!==null){if(t=n.tag,t===13){if(t=Op(n),t!==null){e.blockedOn=t,Xp(e.priority,function(){Wp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Di(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zc=r,n.target.dispatchEvent(r),zc=null}else return t=$s(n),t!==null&&Of(t),e.blockedOn=n,!1;t.shift()}return!0}function Gd(e,t,n){Di(e)&&n.delete(t)}function Og(){Kc=!1,Wo!==null&&Di(Wo)&&(Wo=null),Yo!==null&&Di(Yo)&&(Yo=null),Xo!==null&&Di(Xo)&&(Xo=null),Ms.forEach(Gd),Es.forEach(Gd)}function Zl(e,t){e.blockedOn===t&&(e.blockedOn=null,Kc||(Kc=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,Og)))}function Rs(e){function t(o){return Zl(o,e)}if(0<hi.length){Zl(hi[0],e);for(var n=1;n<hi.length;n++){var r=hi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wo!==null&&Zl(Wo,e),Yo!==null&&Zl(Yo,e),Xo!==null&&Zl(Xo,e),Ms.forEach(t),Es.forEach(t),n=0;n<$o.length;n++)r=$o[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$o.length&&(n=$o[0],n.blockedOn===null);)Qp(n),n.blockedOn===null&&$o.shift()}var Cl=yo.ReactCurrentBatchConfig,Ji=!0;function Bg(e,t,n,r){var o=Me,a=Cl.transition;Cl.transition=null;try{Me=1,Bf(e,t,n,r)}finally{Me=o,Cl.transition=a}}function zg(e,t,n,r){var o=Me,a=Cl.transition;Cl.transition=null;try{Me=4,Bf(e,t,n,r)}finally{Me=o,Cl.transition=a}}function Bf(e,t,n,r){if(Ji){var o=Gc(e,t,n,r);if(o===null)oc(e,t,r,qi,n),Kd(e,r);else if(jg(o,e,t,n,r))r.stopPropagation();else if(Kd(e,r),t&4&&-1<Dg.indexOf(e)){for(;o!==null;){var a=$s(o);if(a!==null&&Gp(a),a=Gc(e,t,n,r),a===null&&oc(e,t,r,qi,n),a===o)break;o=a}o!==null&&r.stopPropagation()}else oc(e,t,r,null,n)}}var qi=null;function Gc(e,t,n,r){if(qi=null,e=Nf(r),e=Ta(e),e!==null)if(t=Oa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Op(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qi=e,null}function Zp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tg()){case Df:return 1;case Vp:return 4;case Qi:case Pg:return 16;case $p:return 536870912;default:return 16}default:return 16}}var Ko=null,zf=null,ji=null;function Jp(){if(ji)return ji;var e,t=zf,n=t.length,r,o="value"in Ko?Ko.value:Ko.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===o[a-r];r++);return ji=o.slice(e,1<r?1-r:void 0)}function Oi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gi(){return!0}function Wd(){return!1}function Hn(e){function t(n,r,o,a,l){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?gi:Wd,this.isPropagationStopped=Wd,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),t}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uf=Hn(Ll),Vs=rt({},Ll,{view:0,detail:0}),Ug=Hn(Vs),Xu,Qu,Jl,xu=rt({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jl&&(Jl&&e.type==="mousemove"?(Xu=e.screenX-Jl.screenX,Qu=e.screenY-Jl.screenY):Qu=Xu=0,Jl=e),Xu)},movementY:function(e){return"movementY"in e?e.movementY:Qu}}),Yd=Hn(xu),Vg=rt({},xu,{dataTransfer:0}),$g=Hn(Vg),Hg=rt({},Vs,{relatedTarget:0}),Zu=Hn(Hg),Kg=rt({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),Gg=Hn(Kg),Wg=rt({},Ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yg=Hn(Wg),Xg=rt({},Ll,{data:0}),Xd=Hn(Xg),Qg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Jg[e])?!!t[e]:!1}function Vf(){return qg}var e1=rt({},Vs,{key:function(e){if(e.key){var t=Qg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Oi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(e){return e.type==="keypress"?Oi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t1=Hn(e1),n1=rt({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qd=Hn(n1),r1=rt({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),o1=Hn(r1),a1=rt({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),l1=Hn(a1),s1=rt({},xu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),i1=Hn(s1),u1=[9,13,27,32],$f=mo&&"CompositionEvent"in window,ps=null;mo&&"documentMode"in document&&(ps=document.documentMode);var c1=mo&&"TextEvent"in window&&!ps,qp=mo&&(!$f||ps&&8<ps&&11>=ps),Zd=" ",Jd=!1;function eh(e,t){switch(e){case"keyup":return u1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function th(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ul=!1;function f1(e,t){switch(e){case"compositionend":return th(t);case"keypress":return t.which!==32?null:(Jd=!0,Zd);case"textInput":return e=t.data,e===Zd&&Jd?null:e;default:return null}}function d1(e,t){if(ul)return e==="compositionend"||!$f&&eh(e,t)?(e=Jp(),ji=zf=Ko=null,ul=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qp&&t.locale!=="ko"?null:t.data;default:return null}}var m1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!m1[e.type]:t==="textarea"}function nh(e,t,n,r){Ap(r),t=eu(t,"onChange"),0<t.length&&(n=new Uf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var hs=null,Ts=null;function p1(e){mh(e,0)}function Su(e){var t=dl(e);if(Rp(t))return e}function h1(e,t){if(e==="change")return t}var rh=!1;if(mo){var Ju;if(mo){var qu="oninput"in document;if(!qu){var em=document.createElement("div");em.setAttribute("oninput","return;"),qu=typeof em.oninput=="function"}Ju=qu}else Ju=!1;rh=Ju&&(!document.documentMode||9<document.documentMode)}function tm(){hs&&(hs.detachEvent("onpropertychange",oh),Ts=hs=null)}function oh(e){if(e.propertyName==="value"&&Su(Ts)){var t=[];nh(t,Ts,e,Nf(e)),jp(p1,t)}}function g1(e,t,n){e==="focusin"?(tm(),hs=t,Ts=n,hs.attachEvent("onpropertychange",oh)):e==="focusout"&&tm()}function y1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Su(Ts)}function v1(e,t){if(e==="click")return Su(t)}function x1(e,t){if(e==="input"||e==="change")return Su(t)}function S1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Er=typeof Object.is=="function"?Object.is:S1;function Ps(e,t){if(Er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Pc.call(t,o)||!Er(e[o],t[o]))return!1}return!0}function nm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rm(e,t){var n=nm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nm(n)}}function ah(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ah(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lh(){for(var e=window,t=Wi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wi(e.document)}return t}function Hf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function w1(e){var t=lh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ah(n.ownerDocument.documentElement,n)){if(r!==null&&Hf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=rm(n,a);var l=rm(n,r);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var k1=mo&&"documentMode"in document&&11>=document.documentMode,cl=null,Wc=null,gs=null,Yc=!1;function om(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yc||cl==null||cl!==Wi(r)||(r=cl,"selectionStart"in r&&Hf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gs&&Ps(gs,r)||(gs=r,r=eu(Wc,"onSelect"),0<r.length&&(t=new Uf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cl)))}function yi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fl={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionend:yi("Transition","TransitionEnd")},ec={},sh={};mo&&(sh=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function wu(e){if(ec[e])return ec[e];if(!fl[e])return e;var t=fl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sh)return ec[e]=t[n];return e}var ih=wu("animationend"),uh=wu("animationiteration"),ch=wu("animationstart"),fh=wu("transitionend"),dh=new Map,am="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(e,t){dh.set(e,t),ja(t,[e])}for(var tc=0;tc<am.length;tc++){var nc=am[tc],C1=nc.toLowerCase(),M1=nc[0].toUpperCase()+nc.slice(1);ra(C1,"on"+M1)}ra(ih,"onAnimationEnd");ra(uh,"onAnimationIteration");ra(ch,"onAnimationStart");ra("dblclick","onDoubleClick");ra("focusin","onFocus");ra("focusout","onBlur");ra(fh,"onTransitionEnd");Rl("onMouseEnter",["mouseout","mouseover"]);Rl("onMouseLeave",["mouseout","mouseover"]);Rl("onPointerEnter",["pointerout","pointerover"]);Rl("onPointerLeave",["pointerout","pointerover"]);ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ja("onBeforeInput",["compositionend","keypress","textInput","paste"]);ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function lm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Cg(r,t,void 0,e),e.currentTarget=null}function mh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var s=r[l],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&o.isPropagationStopped())break e;lm(o,s,c),a=u}else for(l=0;l<r.length;l++){if(s=r[l],u=s.instance,c=s.currentTarget,s=s.listener,u!==a&&o.isPropagationStopped())break e;lm(o,s,c),a=u}}}if(Xi)throw e=$c,Xi=!1,$c=null,e}function Ke(e,t){var n=t[qc];n===void 0&&(n=t[qc]=new Set);var r=e+"__bubble";n.has(r)||(ph(t,e,2,!1),n.add(r))}function rc(e,t,n){var r=0;t&&(r|=4),ph(n,e,r,t)}var vi="_reactListening"+Math.random().toString(36).slice(2);function Fs(e){if(!e[vi]){e[vi]=!0,wp.forEach(function(n){n!=="selectionchange"&&(E1.has(n)||rc(n,!1,e),rc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vi]||(t[vi]=!0,rc("selectionchange",!1,t))}}function ph(e,t,n,r){switch(Zp(t)){case 1:var o=Bg;break;case 4:o=zg;break;default:o=Bf}n=o.bind(null,t,n,e),o=void 0,!Vc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function oc(e,t,n,r,o){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;l=l.return}for(;s!==null;){if(l=Ta(s),l===null)return;if(u=l.tag,u===5||u===6){r=a=l;continue e}s=s.parentNode}}r=r.return}jp(function(){var c=a,y=Nf(n),d=[];e:{var w=dh.get(e);if(w!==void 0){var h=Uf,M=e;switch(e){case"keypress":if(Oi(n)===0)break e;case"keydown":case"keyup":h=t1;break;case"focusin":M="focus",h=Zu;break;case"focusout":M="blur",h=Zu;break;case"beforeblur":case"afterblur":h=Zu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$g;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=o1;break;case ih:case uh:case ch:h=Gg;break;case fh:h=l1;break;case"scroll":h=Ug;break;case"wheel":h=i1;break;case"copy":case"cut":case"paste":h=Yg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Qd}var k=(t&4)!==0,P=!k&&e==="scroll",p=k?w!==null?w+"Capture":null:w;k=[];for(var f=c,g;f!==null;){g=f;var R=g.stateNode;if(g.tag===5&&R!==null&&(g=R,p!==null&&(R=Cs(f,p),R!=null&&k.push(_s(f,R,g)))),P)break;f=f.return}0<k.length&&(w=new h(w,M,null,n,y),d.push({event:w,listeners:k}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",w&&n!==zc&&(M=n.relatedTarget||n.fromElement)&&(Ta(M)||M[po]))break e;if((h||w)&&(w=y.window===y?y:(w=y.ownerDocument)?w.defaultView||w.parentWindow:window,h?(M=n.relatedTarget||n.toElement,h=c,M=M?Ta(M):null,M!==null&&(P=Oa(M),M!==P||M.tag!==5&&M.tag!==6)&&(M=null)):(h=null,M=c),h!==M)){if(k=Yd,R="onMouseLeave",p="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(k=Qd,R="onPointerLeave",p="onPointerEnter",f="pointer"),P=h==null?w:dl(h),g=M==null?w:dl(M),w=new k(R,f+"leave",h,n,y),w.target=P,w.relatedTarget=g,R=null,Ta(y)===c&&(k=new k(p,f+"enter",M,n,y),k.target=g,k.relatedTarget=P,R=k),P=R,h&&M)t:{for(k=h,p=M,f=0,g=k;g;g=nl(g))f++;for(g=0,R=p;R;R=nl(R))g++;for(;0<f-g;)k=nl(k),f--;for(;0<g-f;)p=nl(p),g--;for(;f--;){if(k===p||p!==null&&k===p.alternate)break t;k=nl(k),p=nl(p)}k=null}else k=null;h!==null&&sm(d,w,h,k,!1),M!==null&&P!==null&&sm(d,P,M,k,!0)}}e:{if(w=c?dl(c):window,h=w.nodeName&&w.nodeName.toLowerCase(),h==="select"||h==="input"&&w.type==="file")var T=h1;else if(qd(w))if(rh)T=x1;else{T=y1;var C=g1}else(h=w.nodeName)&&h.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(T=v1);if(T&&(T=T(e,c))){nh(d,T,n,y);break e}C&&C(e,w,c),e==="focusout"&&(C=w._wrapperState)&&C.controlled&&w.type==="number"&&Nc(w,"number",w.value)}switch(C=c?dl(c):window,e){case"focusin":(qd(C)||C.contentEditable==="true")&&(cl=C,Wc=c,gs=null);break;case"focusout":gs=Wc=cl=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,om(d,n,y);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":om(d,n,y)}var F;if($f)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ul?eh(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(qp&&n.locale!=="ko"&&(ul||I!=="onCompositionStart"?I==="onCompositionEnd"&&ul&&(F=Jp()):(Ko=y,zf="value"in Ko?Ko.value:Ko.textContent,ul=!0)),C=eu(c,I),0<C.length&&(I=new Xd(I,e,null,n,y),d.push({event:I,listeners:C}),F?I.data=F:(F=th(n),F!==null&&(I.data=F)))),(F=c1?f1(e,n):d1(e,n))&&(c=eu(c,"onBeforeInput"),0<c.length&&(y=new Xd("onBeforeInput","beforeinput",null,n,y),d.push({event:y,listeners:c}),y.data=F))}mh(d,t)})}function _s(e,t,n){return{instance:e,listener:t,currentTarget:n}}function eu(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Cs(e,n),a!=null&&r.unshift(_s(e,a,o)),a=Cs(e,t),a!=null&&r.push(_s(e,a,o))),e=e.return}return r}function nl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sm(e,t,n,r,o){for(var a=t._reactName,l=[];n!==null&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&c!==null&&(s=c,o?(u=Cs(n,a),u!=null&&l.unshift(_s(n,u,s))):o||(u=Cs(n,a),u!=null&&l.push(_s(n,u,s)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var R1=/\r\n?/g,T1=/\u0000|\uFFFD/g;function im(e){return(typeof e=="string"?e:""+e).replace(R1,`
`).replace(T1,"")}function xi(e,t,n){if(t=im(t),im(e)!==t&&n)throw Error(A(425))}function tu(){}var Xc=null,Qc=null;function Zc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jc=typeof setTimeout=="function"?setTimeout:void 0,P1=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,F1=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(e){return um.resolve(null).then(e).catch(_1)}:Jc;function _1(e){setTimeout(function(){throw e})}function ac(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Rs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Rs(t)}function Qo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Nl=Math.random().toString(36).slice(2),Or="__reactFiber$"+Nl,Is="__reactProps$"+Nl,po="__reactContainer$"+Nl,qc="__reactEvents$"+Nl,I1="__reactListeners$"+Nl,b1="__reactHandles$"+Nl;function Ta(e){var t=e[Or];if(t)return t;for(var n=e.parentNode;n;){if(t=n[po]||n[Or]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=cm(e);e!==null;){if(n=e[Or])return n;e=cm(e)}return t}e=n,n=e.parentNode}return null}function $s(e){return e=e[Or]||e[po],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function ku(e){return e[Is]||null}var ef=[],ml=-1;function oa(e){return{current:e}}function Ge(e){0>ml||(e.current=ef[ml],ef[ml]=null,ml--)}function Oe(e,t){ml++,ef[ml]=e.current,e.current=t}var na={},cn=oa(na),Fn=oa(!1),ba=na;function Tl(e,t){var n=e.type.contextTypes;if(!n)return na;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function _n(e){return e=e.childContextTypes,e!=null}function nu(){Ge(Fn),Ge(cn)}function fm(e,t,n){if(cn.current!==na)throw Error(A(168));Oe(cn,t),Oe(Fn,n)}function hh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(A(108,gg(e)||"Unknown",o));return rt({},n,r)}function ru(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||na,ba=cn.current,Oe(cn,e),Oe(Fn,Fn.current),!0}function dm(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=hh(e,t,ba),r.__reactInternalMemoizedMergedChildContext=e,Ge(Fn),Ge(cn),Oe(cn,e)):Ge(Fn),Oe(Fn,n)}var so=null,Cu=!1,lc=!1;function gh(e){so===null?so=[e]:so.push(e)}function A1(e){Cu=!0,gh(e)}function aa(){if(!lc&&so!==null){lc=!0;var e=0,t=Me;try{var n=so;for(Me=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}so=null,Cu=!1}catch(o){throw so!==null&&(so=so.slice(e+1)),Up(Df,aa),o}finally{Me=t,lc=!1}}return null}var pl=[],hl=0,ou=null,au=0,nr=[],rr=0,Aa=null,uo=1,co="";function Ea(e,t){pl[hl++]=au,pl[hl++]=ou,ou=e,au=t}function yh(e,t,n){nr[rr++]=uo,nr[rr++]=co,nr[rr++]=Aa,Aa=e;var r=uo;e=co;var o=32-Cr(r)-1;r&=~(1<<o),n+=1;var a=32-Cr(t)+o;if(30<a){var l=o-o%5;a=(r&(1<<l)-1).toString(32),r>>=l,o-=l,uo=1<<32-Cr(t)+o|n<<o|r,co=a+e}else uo=1<<a|n<<o|r,co=e}function Kf(e){e.return!==null&&(Ea(e,1),yh(e,1,0))}function Gf(e){for(;e===ou;)ou=pl[--hl],pl[hl]=null,au=pl[--hl],pl[hl]=null;for(;e===Aa;)Aa=nr[--rr],nr[rr]=null,co=nr[--rr],nr[rr]=null,uo=nr[--rr],nr[rr]=null}var Un=null,zn=null,Ye=!1,kr=null;function vh(e,t){var n=ar(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function mm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Un=e,zn=Qo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Un=e,zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Aa!==null?{id:uo,overflow:co}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ar(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Un=e,zn=null,!0):!1;default:return!1}}function tf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nf(e){if(Ye){var t=zn;if(t){var n=t;if(!mm(e,t)){if(tf(e))throw Error(A(418));t=Qo(n.nextSibling);var r=Un;t&&mm(e,t)?vh(r,n):(e.flags=e.flags&-4097|2,Ye=!1,Un=e)}}else{if(tf(e))throw Error(A(418));e.flags=e.flags&-4097|2,Ye=!1,Un=e}}}function pm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Un=e}function Si(e){if(e!==Un)return!1;if(!Ye)return pm(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zc(e.type,e.memoizedProps)),t&&(t=zn)){if(tf(e))throw xh(),Error(A(418));for(;t;)vh(e,t),t=Qo(t.nextSibling)}if(pm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zn=Qo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zn=null}}else zn=Un?Qo(e.stateNode.nextSibling):null;return!0}function xh(){for(var e=zn;e;)e=Qo(e.nextSibling)}function Pl(){zn=Un=null,Ye=!1}function Wf(e){kr===null?kr=[e]:kr.push(e)}var L1=yo.ReactCurrentBatchConfig;function ql(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var o=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var s=o.refs;l===null?delete s[a]:s[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function wi(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hm(e){var t=e._init;return t(e._payload)}function Sh(e){function t(p,f){if(e){var g=p.deletions;g===null?(p.deletions=[f],p.flags|=16):g.push(f)}}function n(p,f){if(!e)return null;for(;f!==null;)t(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function o(p,f){return p=ea(p,f),p.index=0,p.sibling=null,p}function a(p,f,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<f?(p.flags|=2,f):g):(p.flags|=2,f)):(p.flags|=1048576,f)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function s(p,f,g,R){return f===null||f.tag!==6?(f=mc(g,p.mode,R),f.return=p,f):(f=o(f,g),f.return=p,f)}function u(p,f,g,R){var T=g.type;return T===il?y(p,f,g.props.children,R,g.key):f!==null&&(f.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===zo&&hm(T)===f.type)?(R=o(f,g.props),R.ref=ql(p,f,g),R.return=p,R):(R=Ki(g.type,g.key,g.props,null,p.mode,R),R.ref=ql(p,f,g),R.return=p,R)}function c(p,f,g,R){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=pc(g,p.mode,R),f.return=p,f):(f=o(f,g.children||[]),f.return=p,f)}function y(p,f,g,R,T){return f===null||f.tag!==7?(f=Ia(g,p.mode,R,T),f.return=p,f):(f=o(f,g),f.return=p,f)}function d(p,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=mc(""+f,p.mode,g),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ci:return g=Ki(f.type,f.key,f.props,null,p.mode,g),g.ref=ql(p,null,f),g.return=p,g;case sl:return f=pc(f,p.mode,g),f.return=p,f;case zo:var R=f._init;return d(p,R(f._payload),g)}if(is(f)||Yl(f))return f=Ia(f,p.mode,g,null),f.return=p,f;wi(p,f)}return null}function w(p,f,g,R){var T=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return T!==null?null:s(p,f,""+g,R);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ci:return g.key===T?u(p,f,g,R):null;case sl:return g.key===T?c(p,f,g,R):null;case zo:return T=g._init,w(p,f,T(g._payload),R)}if(is(g)||Yl(g))return T!==null?null:y(p,f,g,R,null);wi(p,g)}return null}function h(p,f,g,R,T){if(typeof R=="string"&&R!==""||typeof R=="number")return p=p.get(g)||null,s(f,p,""+R,T);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ci:return p=p.get(R.key===null?g:R.key)||null,u(f,p,R,T);case sl:return p=p.get(R.key===null?g:R.key)||null,c(f,p,R,T);case zo:var C=R._init;return h(p,f,g,C(R._payload),T)}if(is(R)||Yl(R))return p=p.get(g)||null,y(f,p,R,T,null);wi(f,R)}return null}function M(p,f,g,R){for(var T=null,C=null,F=f,I=f=0,j=null;F!==null&&I<g.length;I++){F.index>I?(j=F,F=null):j=F.sibling;var G=w(p,F,g[I],R);if(G===null){F===null&&(F=j);break}e&&F&&G.alternate===null&&t(p,F),f=a(G,f,I),C===null?T=G:C.sibling=G,C=G,F=j}if(I===g.length)return n(p,F),Ye&&Ea(p,I),T;if(F===null){for(;I<g.length;I++)F=d(p,g[I],R),F!==null&&(f=a(F,f,I),C===null?T=F:C.sibling=F,C=F);return Ye&&Ea(p,I),T}for(F=r(p,F);I<g.length;I++)j=h(F,p,I,g[I],R),j!==null&&(e&&j.alternate!==null&&F.delete(j.key===null?I:j.key),f=a(j,f,I),C===null?T=j:C.sibling=j,C=j);return e&&F.forEach(function(Se){return t(p,Se)}),Ye&&Ea(p,I),T}function k(p,f,g,R){var T=Yl(g);if(typeof T!="function")throw Error(A(150));if(g=T.call(g),g==null)throw Error(A(151));for(var C=T=null,F=f,I=f=0,j=null,G=g.next();F!==null&&!G.done;I++,G=g.next()){F.index>I?(j=F,F=null):j=F.sibling;var Se=w(p,F,G.value,R);if(Se===null){F===null&&(F=j);break}e&&F&&Se.alternate===null&&t(p,F),f=a(Se,f,I),C===null?T=Se:C.sibling=Se,C=Se,F=j}if(G.done)return n(p,F),Ye&&Ea(p,I),T;if(F===null){for(;!G.done;I++,G=g.next())G=d(p,G.value,R),G!==null&&(f=a(G,f,I),C===null?T=G:C.sibling=G,C=G);return Ye&&Ea(p,I),T}for(F=r(p,F);!G.done;I++,G=g.next())G=h(F,p,I,G.value,R),G!==null&&(e&&G.alternate!==null&&F.delete(G.key===null?I:G.key),f=a(G,f,I),C===null?T=G:C.sibling=G,C=G);return e&&F.forEach(function(ot){return t(p,ot)}),Ye&&Ea(p,I),T}function P(p,f,g,R){if(typeof g=="object"&&g!==null&&g.type===il&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ci:e:{for(var T=g.key,C=f;C!==null;){if(C.key===T){if(T=g.type,T===il){if(C.tag===7){n(p,C.sibling),f=o(C,g.props.children),f.return=p,p=f;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===zo&&hm(T)===C.type){n(p,C.sibling),f=o(C,g.props),f.ref=ql(p,C,g),f.return=p,p=f;break e}n(p,C);break}else t(p,C);C=C.sibling}g.type===il?(f=Ia(g.props.children,p.mode,R,g.key),f.return=p,p=f):(R=Ki(g.type,g.key,g.props,null,p.mode,R),R.ref=ql(p,f,g),R.return=p,p=R)}return l(p);case sl:e:{for(C=g.key;f!==null;){if(f.key===C)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(p,f.sibling),f=o(f,g.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else t(p,f);f=f.sibling}f=pc(g,p.mode,R),f.return=p,p=f}return l(p);case zo:return C=g._init,P(p,f,C(g._payload),R)}if(is(g))return M(p,f,g,R);if(Yl(g))return k(p,f,g,R);wi(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(p,f.sibling),f=o(f,g),f.return=p,p=f):(n(p,f),f=mc(g,p.mode,R),f.return=p,p=f),l(p)):n(p,f)}return P}var Fl=Sh(!0),wh=Sh(!1),lu=oa(null),su=null,gl=null,Yf=null;function Xf(){Yf=gl=su=null}function Qf(e){var t=lu.current;Ge(lu),e._currentValue=t}function rf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ml(e,t){su=e,Yf=gl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pn=!0),e.firstContext=null)}function ir(e){var t=e._currentValue;if(Yf!==e)if(e={context:e,memoizedValue:t,next:null},gl===null){if(su===null)throw Error(A(308));gl=e,su.dependencies={lanes:0,firstContext:e}}else gl=gl.next=e;return t}var Pa=null;function Zf(e){Pa===null?Pa=[e]:Pa.push(e)}function kh(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Zf(t)):(n.next=o.next,o.next=n),t.interleaved=n,ho(e,r)}function ho(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Uo=!1;function Jf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ch(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,ho(e,n)}return o=r.interleaved,o===null?(t.next=t,Zf(r)):(t.next=o.next,o.next=t),r.interleaved=t,ho(e,n)}function Bi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,jf(e,n)}}function gm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function iu(e,t,n,r){var o=e.updateQueue;Uo=!1;var a=o.firstBaseUpdate,l=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var u=s,c=u.next;u.next=null,l===null?a=c:l.next=c,l=u;var y=e.alternate;y!==null&&(y=y.updateQueue,s=y.lastBaseUpdate,s!==l&&(s===null?y.firstBaseUpdate=c:s.next=c,y.lastBaseUpdate=u))}if(a!==null){var d=o.baseState;l=0,y=c=u=null,s=a;do{var w=s.lane,h=s.eventTime;if((r&w)===w){y!==null&&(y=y.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var M=e,k=s;switch(w=t,h=n,k.tag){case 1:if(M=k.payload,typeof M=="function"){d=M.call(h,d,w);break e}d=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=k.payload,w=typeof M=="function"?M.call(h,d,w):M,w==null)break e;d=rt({},d,w);break e;case 2:Uo=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,w=o.effects,w===null?o.effects=[s]:w.push(s))}else h={eventTime:h,lane:w,tag:s.tag,payload:s.payload,callback:s.callback,next:null},y===null?(c=y=h,u=d):y=y.next=h,l|=w;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;w=s,s=w.next,w.next=null,o.lastBaseUpdate=w,o.shared.pending=null}}while(!0);if(y===null&&(u=d),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=y,t=o.shared.interleaved,t!==null){o=t;do l|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Na|=l,e.lanes=l,e.memoizedState=d}}function ym(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(A(191,o));o.call(r)}}}var Hs={},zr=oa(Hs),bs=oa(Hs),As=oa(Hs);function Fa(e){if(e===Hs)throw Error(A(174));return e}function qf(e,t){switch(Oe(As,t),Oe(bs,e),Oe(zr,Hs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jc(t,e)}Ge(zr),Oe(zr,t)}function _l(){Ge(zr),Ge(bs),Ge(As)}function Mh(e){Fa(As.current);var t=Fa(zr.current),n=jc(t,e.type);t!==n&&(Oe(bs,e),Oe(zr,n))}function ed(e){bs.current===e&&(Ge(zr),Ge(bs))}var tt=oa(0);function uu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sc=[];function td(){for(var e=0;e<sc.length;e++)sc[e]._workInProgressVersionPrimary=null;sc.length=0}var zi=yo.ReactCurrentDispatcher,ic=yo.ReactCurrentBatchConfig,La=0,nt=null,bt=null,Bt=null,cu=!1,ys=!1,Ls=0,N1=0;function ln(){throw Error(A(321))}function nd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Er(e[n],t[n]))return!1;return!0}function rd(e,t,n,r,o,a){if(La=a,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zi.current=e===null||e.memoizedState===null?B1:z1,e=n(r,o),ys){a=0;do{if(ys=!1,Ls=0,25<=a)throw Error(A(301));a+=1,Bt=bt=null,t.updateQueue=null,zi.current=U1,e=n(r,o)}while(ys)}if(zi.current=fu,t=bt!==null&&bt.next!==null,La=0,Bt=bt=nt=null,cu=!1,t)throw Error(A(300));return e}function od(){var e=Ls!==0;return Ls=0,e}function jr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?nt.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function ur(){if(bt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=Bt===null?nt.memoizedState:Bt.next;if(t!==null)Bt=t,bt=e;else{if(e===null)throw Error(A(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Bt===null?nt.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function Ns(e,t){return typeof t=="function"?t(e):t}function uc(e){var t=ur(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=bt,o=r.baseQueue,a=n.pending;if(a!==null){if(o!==null){var l=o.next;o.next=a.next,a.next=l}r.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,r=r.baseState;var s=l=null,u=null,c=a;do{var y=c.lane;if((La&y)===y)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:y,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(s=u=d,l=r):u=u.next=d,nt.lanes|=y,Na|=y}c=c.next}while(c!==null&&c!==a);u===null?l=r:u.next=s,Er(r,t.memoizedState)||(Pn=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do a=o.lane,nt.lanes|=a,Na|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cc(e){var t=ur(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var l=o=o.next;do a=e(a,l.action),l=l.next;while(l!==o);Er(a,t.memoizedState)||(Pn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Eh(){}function Rh(e,t){var n=nt,r=ur(),o=t(),a=!Er(r.memoizedState,o);if(a&&(r.memoizedState=o,Pn=!0),r=r.queue,ad(Fh.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Ds(9,Ph.bind(null,n,r,o,t),void 0,null),zt===null)throw Error(A(349));La&30||Th(n,t,o)}return o}function Th(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ph(e,t,n,r){t.value=n,t.getSnapshot=r,_h(t)&&Ih(e)}function Fh(e,t,n){return n(function(){_h(t)&&Ih(e)})}function _h(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Er(e,n)}catch{return!0}}function Ih(e){var t=ho(e,1);t!==null&&Mr(t,e,1,-1)}function vm(e){var t=jr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:e},t.queue=e,e=e.dispatch=O1.bind(null,nt,e),[t.memoizedState,e]}function Ds(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bh(){return ur().memoizedState}function Ui(e,t,n,r){var o=jr();nt.flags|=e,o.memoizedState=Ds(1|t,n,void 0,r===void 0?null:r)}function Mu(e,t,n,r){var o=ur();r=r===void 0?null:r;var a=void 0;if(bt!==null){var l=bt.memoizedState;if(a=l.destroy,r!==null&&nd(r,l.deps)){o.memoizedState=Ds(t,n,a,r);return}}nt.flags|=e,o.memoizedState=Ds(1|t,n,a,r)}function xm(e,t){return Ui(8390656,8,e,t)}function ad(e,t){return Mu(2048,8,e,t)}function Ah(e,t){return Mu(4,2,e,t)}function Lh(e,t){return Mu(4,4,e,t)}function Nh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dh(e,t,n){return n=n!=null?n.concat([e]):null,Mu(4,4,Nh.bind(null,t,e),n)}function ld(){}function jh(e,t){var n=ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Oh(e,t){var n=ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bh(e,t,n){return La&21?(Er(n,t)||(n=Hp(),nt.lanes|=n,Na|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pn=!0),e.memoizedState=n)}function D1(e,t){var n=Me;Me=n!==0&&4>n?n:4,e(!0);var r=ic.transition;ic.transition={};try{e(!1),t()}finally{Me=n,ic.transition=r}}function zh(){return ur().memoizedState}function j1(e,t,n){var r=qo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uh(e))Vh(t,n);else if(n=kh(e,t,n,r),n!==null){var o=gn();Mr(n,e,r,o),$h(n,t,r)}}function O1(e,t,n){var r=qo(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uh(e))Vh(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,s=a(l,n);if(o.hasEagerState=!0,o.eagerState=s,Er(s,l)){var u=t.interleaved;u===null?(o.next=o,Zf(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=kh(e,t,o,r),n!==null&&(o=gn(),Mr(n,e,r,o),$h(n,t,r))}}function Uh(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function Vh(e,t){ys=cu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $h(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,jf(e,n)}}var fu={readContext:ir,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},B1={readContext:ir,useCallback:function(e,t){return jr().memoizedState=[e,t===void 0?null:t],e},useContext:ir,useEffect:xm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ui(4194308,4,Nh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ui(4,2,e,t)},useMemo:function(e,t){var n=jr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=j1.bind(null,nt,e),[r.memoizedState,e]},useRef:function(e){var t=jr();return e={current:e},t.memoizedState=e},useState:vm,useDebugValue:ld,useDeferredValue:function(e){return jr().memoizedState=e},useTransition:function(){var e=vm(!1),t=e[0];return e=D1.bind(null,e[1]),jr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=nt,o=jr();if(Ye){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),zt===null)throw Error(A(349));La&30||Th(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,xm(Fh.bind(null,r,a,e),[e]),r.flags|=2048,Ds(9,Ph.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=jr(),t=zt.identifierPrefix;if(Ye){var n=co,r=uo;n=(r&~(1<<32-Cr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ls++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=N1++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},z1={readContext:ir,useCallback:jh,useContext:ir,useEffect:ad,useImperativeHandle:Dh,useInsertionEffect:Ah,useLayoutEffect:Lh,useMemo:Oh,useReducer:uc,useRef:bh,useState:function(){return uc(Ns)},useDebugValue:ld,useDeferredValue:function(e){var t=ur();return Bh(t,bt.memoizedState,e)},useTransition:function(){var e=uc(Ns)[0],t=ur().memoizedState;return[e,t]},useMutableSource:Eh,useSyncExternalStore:Rh,useId:zh,unstable_isNewReconciler:!1},U1={readContext:ir,useCallback:jh,useContext:ir,useEffect:ad,useImperativeHandle:Dh,useInsertionEffect:Ah,useLayoutEffect:Lh,useMemo:Oh,useReducer:cc,useRef:bh,useState:function(){return cc(Ns)},useDebugValue:ld,useDeferredValue:function(e){var t=ur();return bt===null?t.memoizedState=e:Bh(t,bt.memoizedState,e)},useTransition:function(){var e=cc(Ns)[0],t=ur().memoizedState;return[e,t]},useMutableSource:Eh,useSyncExternalStore:Rh,useId:zh,unstable_isNewReconciler:!1};function xr(e,t){if(e&&e.defaultProps){t=rt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function of(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:rt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Eu={isMounted:function(e){return(e=e._reactInternals)?Oa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gn(),o=qo(e),a=fo(r,o);a.payload=t,n!=null&&(a.callback=n),t=Zo(e,a,o),t!==null&&(Mr(t,e,o,r),Bi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gn(),o=qo(e),a=fo(r,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Zo(e,a,o),t!==null&&(Mr(t,e,o,r),Bi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gn(),r=qo(e),o=fo(n,r);o.tag=2,t!=null&&(o.callback=t),t=Zo(e,o,r),t!==null&&(Mr(t,e,r,n),Bi(t,e,r))}};function Sm(e,t,n,r,o,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!Ps(n,r)||!Ps(o,a):!0}function Hh(e,t,n){var r=!1,o=na,a=t.contextType;return typeof a=="object"&&a!==null?a=ir(a):(o=_n(t)?ba:cn.current,r=t.contextTypes,a=(r=r!=null)?Tl(e,o):na),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Eu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function wm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Eu.enqueueReplaceState(t,t.state,null)}function af(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Jf(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=ir(a):(a=_n(t)?ba:cn.current,o.context=Tl(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(of(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Eu.enqueueReplaceState(o,o.state,null),iu(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Il(e,t){try{var n="",r=t;do n+=hg(r),r=r.return;while(r);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function fc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function lf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var V1=typeof WeakMap=="function"?WeakMap:Map;function Kh(e,t,n){n=fo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){mu||(mu=!0,yf=r),lf(e,t)},n}function Gh(e,t,n){n=fo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){lf(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){lf(e,t),typeof r!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function km(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new V1;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=ny.bind(null,e,t,n),t.then(e,e))}function Cm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mm(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fo(-1,1),t.tag=2,Zo(n,t,1))),n.lanes|=1),e)}var $1=yo.ReactCurrentOwner,Pn=!1;function hn(e,t,n,r){t.child=e===null?wh(t,null,n,r):Fl(t,e.child,n,r)}function Em(e,t,n,r,o){n=n.render;var a=t.ref;return Ml(t,o),r=rd(e,t,n,r,a,o),n=od(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,go(e,t,o)):(Ye&&n&&Kf(t),t.flags|=1,hn(e,t,r,o),t.child)}function Rm(e,t,n,r,o){if(e===null){var a=n.type;return typeof a=="function"&&!pd(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Wh(e,t,a,r,o)):(e=Ki(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ps,n(l,r)&&e.ref===t.ref)return go(e,t,o)}return t.flags|=1,e=ea(a,r),e.ref=t.ref,e.return=t,t.child=e}function Wh(e,t,n,r,o){if(e!==null){var a=e.memoizedProps;if(Ps(a,r)&&e.ref===t.ref)if(Pn=!1,t.pendingProps=r=a,(e.lanes&o)!==0)e.flags&131072&&(Pn=!0);else return t.lanes=e.lanes,go(e,t,o)}return sf(e,t,n,r,o)}function Yh(e,t,n){var r=t.pendingProps,o=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(vl,Bn),Bn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(vl,Bn),Bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Oe(vl,Bn),Bn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Oe(vl,Bn),Bn|=r;return hn(e,t,o,n),t.child}function Xh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sf(e,t,n,r,o){var a=_n(n)?ba:cn.current;return a=Tl(t,a),Ml(t,o),n=rd(e,t,n,r,a,o),r=od(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,go(e,t,o)):(Ye&&r&&Kf(t),t.flags|=1,hn(e,t,n,o),t.child)}function Tm(e,t,n,r,o){if(_n(n)){var a=!0;ru(t)}else a=!1;if(Ml(t,o),t.stateNode===null)Vi(e,t),Hh(t,n,r),af(t,n,r,o),r=!0;else if(e===null){var l=t.stateNode,s=t.memoizedProps;l.props=s;var u=l.context,c=n.contextType;typeof c=="object"&&c!==null?c=ir(c):(c=_n(n)?ba:cn.current,c=Tl(t,c));var y=n.getDerivedStateFromProps,d=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==r||u!==c)&&wm(t,l,r,c),Uo=!1;var w=t.memoizedState;l.state=w,iu(t,r,l,o),u=t.memoizedState,s!==r||w!==u||Fn.current||Uo?(typeof y=="function"&&(of(t,n,y,r),u=t.memoizedState),(s=Uo||Sm(t,n,s,r,w,u,c))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=c,r=s):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Ch(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:xr(t.type,s),l.props=c,d=t.pendingProps,w=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=ir(u):(u=_n(n)?ba:cn.current,u=Tl(t,u));var h=n.getDerivedStateFromProps;(y=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==d||w!==u)&&wm(t,l,r,u),Uo=!1,w=t.memoizedState,l.state=w,iu(t,r,l,o);var M=t.memoizedState;s!==d||w!==M||Fn.current||Uo?(typeof h=="function"&&(of(t,n,h,r),M=t.memoizedState),(c=Uo||Sm(t,n,c,r,w,M,u)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,M,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,M,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=M),l.props=r,l.state=M,l.context=u,r=c):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return uf(e,t,n,r,a,o)}function uf(e,t,n,r,o,a){Xh(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return o&&dm(t,n,!1),go(e,t,a);r=t.stateNode,$1.current=t;var s=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Fl(t,e.child,null,a),t.child=Fl(t,null,s,a)):hn(e,t,s,a),t.memoizedState=r.state,o&&dm(t,n,!0),t.child}function Qh(e){var t=e.stateNode;t.pendingContext?fm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fm(e,t.context,!1),qf(e,t.containerInfo)}function Pm(e,t,n,r,o){return Pl(),Wf(o),t.flags|=256,hn(e,t,n,r),t.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function ff(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zh(e,t,n){var r=t.pendingProps,o=tt.current,a=!1,l=(t.flags&128)!==0,s;if((s=l)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Oe(tt,o&1),e===null)return nf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Pu(l,r,0,null),e=Ia(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ff(n),t.memoizedState=cf,e):sd(t,l));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return H1(e,t,l,r,s,o,n);if(a){a=r.fallback,l=t.mode,o=e.child,s=o.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=ea(o,u),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?a=ea(s,a):(a=Ia(a,l,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?ff(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=cf,r}return a=e.child,e=a.sibling,r=ea(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function sd(e,t){return t=Pu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ki(e,t,n,r){return r!==null&&Wf(r),Fl(t,e.child,null,n),e=sd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function H1(e,t,n,r,o,a,l){if(n)return t.flags&256?(t.flags&=-257,r=fc(Error(A(422))),ki(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Pu({mode:"visible",children:r.children},o,0,null),a=Ia(a,o,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Fl(t,e.child,null,l),t.child.memoizedState=ff(l),t.memoizedState=cf,a);if(!(t.mode&1))return ki(e,t,l,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(A(419)),r=fc(a,r,void 0),ki(e,t,l,r)}if(s=(l&e.childLanes)!==0,Pn||s){if(r=zt,r!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|l)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,ho(e,o),Mr(r,e,o,-1))}return md(),r=fc(Error(A(421))),ki(e,t,l,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=ry.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,zn=Qo(o.nextSibling),Un=t,Ye=!0,kr=null,e!==null&&(nr[rr++]=uo,nr[rr++]=co,nr[rr++]=Aa,uo=e.id,co=e.overflow,Aa=t),t=sd(t,r.children),t.flags|=4096,t)}function Fm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),rf(e.return,t,n)}function dc(e,t,n,r,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Jh(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(hn(e,t,r.children,n),r=tt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fm(e,n,t);else if(e.tag===19)Fm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oe(tt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&uu(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),dc(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&uu(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}dc(t,!0,n,null,a);break;case"together":dc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function go(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Na|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=ea(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ea(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function K1(e,t,n){switch(t.tag){case 3:Qh(t),Pl();break;case 5:Mh(t);break;case 1:_n(t.type)&&ru(t);break;case 4:qf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Oe(lu,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Oe(tt,tt.current&1),t.flags|=128,null):n&t.child.childLanes?Zh(e,t,n):(Oe(tt,tt.current&1),e=go(e,t,n),e!==null?e.sibling:null);Oe(tt,tt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Jh(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Oe(tt,tt.current),r)break;return null;case 22:case 23:return t.lanes=0,Yh(e,t,n)}return go(e,t,n)}var qh,df,e0,t0;qh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};df=function(){};e0=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Fa(zr.current);var a=null;switch(n){case"input":o=Ac(e,o),r=Ac(e,r),a=[];break;case"select":o=rt({},o,{value:void 0}),r=rt({},r,{value:void 0}),a=[];break;case"textarea":o=Dc(e,o),r=Dc(e,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=tu)}Oc(n,r);var l;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var s=o[c];for(l in s)s.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ws.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(s=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==s&&(u!=null||s!=null))if(c==="style")if(s){for(l in s)!s.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&s[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(a||(a=[]),a.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ws.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ke("scroll",e),a||s===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};t0=function(e,t,n,r){n!==r&&(t.flags|=4)};function es(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function G1(e,t,n){var r=t.pendingProps;switch(Gf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(t),null;case 1:return _n(t.type)&&nu(),sn(t),null;case 3:return r=t.stateNode,_l(),Ge(Fn),Ge(cn),td(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Si(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kr!==null&&(Sf(kr),kr=null))),df(e,t),sn(t),null;case 5:ed(t);var o=Fa(As.current);if(n=t.type,e!==null&&t.stateNode!=null)e0(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return sn(t),null}if(e=Fa(zr.current),Si(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Or]=t,r[Is]=a,e=(t.mode&1)!==0,n){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(o=0;o<cs.length;o++)Ke(cs[o],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":Od(r,a),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ke("invalid",r);break;case"textarea":zd(r,a),Ke("invalid",r)}Oc(n,a),o=null;for(var l in a)if(a.hasOwnProperty(l)){var s=a[l];l==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&xi(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&xi(r.textContent,s,e),o=["children",""+s]):ws.hasOwnProperty(l)&&s!=null&&l==="onScroll"&&Ke("scroll",r)}switch(n){case"input":fi(r),Bd(r,a,!0);break;case"textarea":fi(r),Ud(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=tu)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Or]=t,e[Is]=r,qh(e,t,!1,!1),t.stateNode=e;e:{switch(l=Bc(n,r),n){case"dialog":Ke("cancel",e),Ke("close",e),o=r;break;case"iframe":case"object":case"embed":Ke("load",e),o=r;break;case"video":case"audio":for(o=0;o<cs.length;o++)Ke(cs[o],e);o=r;break;case"source":Ke("error",e),o=r;break;case"img":case"image":case"link":Ke("error",e),Ke("load",e),o=r;break;case"details":Ke("toggle",e),o=r;break;case"input":Od(e,r),o=Ac(e,r),Ke("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=rt({},r,{value:void 0}),Ke("invalid",e);break;case"textarea":zd(e,r),o=Dc(e,r),Ke("invalid",e);break;default:o=r}Oc(n,o),s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="style"?bp(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&_p(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ks(e,u):typeof u=="number"&&ks(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ws.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Ke("scroll",e):u!=null&&If(e,a,u,l))}switch(n){case"input":fi(e),Bd(e,r,!1);break;case"textarea":fi(e),Ud(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ta(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Sl(e,!!r.multiple,a,!1):r.defaultValue!=null&&Sl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=tu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return sn(t),null;case 6:if(e&&t.stateNode!=null)t0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=Fa(As.current),Fa(zr.current),Si(t)){if(r=t.stateNode,n=t.memoizedProps,r[Or]=t,(a=r.nodeValue!==n)&&(e=Un,e!==null))switch(e.tag){case 3:xi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xi(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Or]=t,t.stateNode=r}return sn(t),null;case 13:if(Ge(tt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&zn!==null&&t.mode&1&&!(t.flags&128))xh(),Pl(),t.flags|=98560,a=!1;else if(a=Si(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(A(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(A(317));a[Or]=t}else Pl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sn(t),a=!1}else kr!==null&&(Sf(kr),kr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||tt.current&1?At===0&&(At=3):md())),t.updateQueue!==null&&(t.flags|=4),sn(t),null);case 4:return _l(),df(e,t),e===null&&Fs(t.stateNode.containerInfo),sn(t),null;case 10:return Qf(t.type._context),sn(t),null;case 17:return _n(t.type)&&nu(),sn(t),null;case 19:if(Ge(tt),a=t.memoizedState,a===null)return sn(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)es(a,!1);else{if(At!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=uu(e),l!==null){for(t.flags|=128,es(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(tt,tt.current&1|2),t.child}e=e.sibling}a.tail!==null&&mt()>bl&&(t.flags|=128,r=!0,es(a,!1),t.lanes=4194304)}else{if(!r)if(e=uu(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),es(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Ye)return sn(t),null}else 2*mt()-a.renderingStartTime>bl&&n!==1073741824&&(t.flags|=128,r=!0,es(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=mt(),t.sibling=null,n=tt.current,Oe(tt,r?n&1|2:n&1),t):(sn(t),null);case 22:case 23:return dd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bn&1073741824&&(sn(t),t.subtreeFlags&6&&(t.flags|=8192)):sn(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function W1(e,t){switch(Gf(t),t.tag){case 1:return _n(t.type)&&nu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _l(),Ge(Fn),Ge(cn),td(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ed(t),null;case 13:if(Ge(tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Pl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ge(tt),null;case 4:return _l(),null;case 10:return Qf(t.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var Ci=!1,un=!1,Y1=typeof WeakSet=="function"?WeakSet:Set,H=null;function yl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(e,t,r)}else n.current=null}function mf(e,t,n){try{n()}catch(r){st(e,t,r)}}var _m=!1;function X1(e,t){if(Xc=Ji,e=lh(),Hf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,s=-1,u=-1,c=0,y=0,d=e,w=null;t:for(;;){for(var h;d!==n||o!==0&&d.nodeType!==3||(s=l+o),d!==a||r!==0&&d.nodeType!==3||(u=l+r),d.nodeType===3&&(l+=d.nodeValue.length),(h=d.firstChild)!==null;)w=d,d=h;for(;;){if(d===e)break t;if(w===n&&++c===o&&(s=l),w===a&&++y===r&&(u=l),(h=d.nextSibling)!==null)break;d=w,w=d.parentNode}d=h}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qc={focusedElem:e,selectionRange:n},Ji=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var M=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var k=M.memoizedProps,P=M.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?k:xr(t.type,k),P);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(R){st(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return M=_m,_m=!1,M}function vs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&mf(t,n,a)}o=o.next}while(o!==r)}}function Ru(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function n0(e){var t=e.alternate;t!==null&&(e.alternate=null,n0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Or],delete t[Is],delete t[qc],delete t[I1],delete t[b1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function r0(e){return e.tag===5||e.tag===3||e.tag===4}function Im(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||r0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tu));else if(r!==4&&(e=e.child,e!==null))for(hf(e,t,n),e=e.sibling;e!==null;)hf(e,t,n),e=e.sibling}function gf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gf(e,t,n),e=e.sibling;e!==null;)gf(e,t,n),e=e.sibling}var Qt=null,Sr=!1;function jo(e,t,n){for(n=n.child;n!==null;)o0(e,t,n),n=n.sibling}function o0(e,t,n){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:un||yl(n,t);case 6:var r=Qt,o=Sr;Qt=null,jo(e,t,n),Qt=r,Sr=o,Qt!==null&&(Sr?(e=Qt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qt.removeChild(n.stateNode));break;case 18:Qt!==null&&(Sr?(e=Qt,n=n.stateNode,e.nodeType===8?ac(e.parentNode,n):e.nodeType===1&&ac(e,n),Rs(e)):ac(Qt,n.stateNode));break;case 4:r=Qt,o=Sr,Qt=n.stateNode.containerInfo,Sr=!0,jo(e,t,n),Qt=r,Sr=o;break;case 0:case 11:case 14:case 15:if(!un&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&mf(n,t,l),o=o.next}while(o!==r)}jo(e,t,n);break;case 1:if(!un&&(yl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){st(n,t,s)}jo(e,t,n);break;case 21:jo(e,t,n);break;case 22:n.mode&1?(un=(r=un)||n.memoizedState!==null,jo(e,t,n),un=r):jo(e,t,n);break;default:jo(e,t,n)}}function bm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Y1),t.forEach(function(r){var o=oy.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function vr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,l=t,s=l;e:for(;s!==null;){switch(s.tag){case 5:Qt=s.stateNode,Sr=!1;break e;case 3:Qt=s.stateNode.containerInfo,Sr=!0;break e;case 4:Qt=s.stateNode.containerInfo,Sr=!0;break e}s=s.return}if(Qt===null)throw Error(A(160));o0(a,l,o),Qt=null,Sr=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){st(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)a0(t,e),t=t.sibling}function a0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vr(t,e),Dr(e),r&4){try{vs(3,e,e.return),Ru(3,e)}catch(k){st(e,e.return,k)}try{vs(5,e,e.return)}catch(k){st(e,e.return,k)}}break;case 1:vr(t,e),Dr(e),r&512&&n!==null&&yl(n,n.return);break;case 5:if(vr(t,e),Dr(e),r&512&&n!==null&&yl(n,n.return),e.flags&32){var o=e.stateNode;try{ks(o,"")}catch(k){st(e,e.return,k)}}if(r&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,s=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&Tp(o,a),Bc(s,l);var c=Bc(s,a);for(l=0;l<u.length;l+=2){var y=u[l],d=u[l+1];y==="style"?bp(o,d):y==="dangerouslySetInnerHTML"?_p(o,d):y==="children"?ks(o,d):If(o,y,d,c)}switch(s){case"input":Lc(o,a);break;case"textarea":Pp(o,a);break;case"select":var w=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Sl(o,!!a.multiple,h,!1):w!==!!a.multiple&&(a.defaultValue!=null?Sl(o,!!a.multiple,a.defaultValue,!0):Sl(o,!!a.multiple,a.multiple?[]:"",!1))}o[Is]=a}catch(k){st(e,e.return,k)}}break;case 6:if(vr(t,e),Dr(e),r&4){if(e.stateNode===null)throw Error(A(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(k){st(e,e.return,k)}}break;case 3:if(vr(t,e),Dr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rs(t.containerInfo)}catch(k){st(e,e.return,k)}break;case 4:vr(t,e),Dr(e);break;case 13:vr(t,e),Dr(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(cd=mt())),r&4&&bm(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(un=(c=un)||y,vr(t,e),un=c):vr(t,e),Dr(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!y&&e.mode&1)for(H=e,y=e.child;y!==null;){for(d=H=y;H!==null;){switch(w=H,h=w.child,w.tag){case 0:case 11:case 14:case 15:vs(4,w,w.return);break;case 1:yl(w,w.return);var M=w.stateNode;if(typeof M.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,M.props=t.memoizedProps,M.state=t.memoizedState,M.componentWillUnmount()}catch(k){st(r,n,k)}}break;case 5:yl(w,w.return);break;case 22:if(w.memoizedState!==null){Lm(d);continue}}h!==null?(h.return=w,H=h):Lm(d)}y=y.sibling}e:for(y=null,d=e;;){if(d.tag===5){if(y===null){y=d;try{o=d.stateNode,c?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,u=d.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=Ip("display",l))}catch(k){st(e,e.return,k)}}}else if(d.tag===6){if(y===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(k){st(e,e.return,k)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;y===d&&(y=null),d=d.return}y===d&&(y=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vr(t,e),Dr(e),r&4&&bm(e);break;case 21:break;default:vr(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(r0(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ks(o,""),r.flags&=-33);var a=Im(e);gf(e,a,o);break;case 3:case 4:var l=r.stateNode.containerInfo,s=Im(e);hf(e,s,l);break;default:throw Error(A(161))}}catch(u){st(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Q1(e,t,n){H=e,l0(e)}function l0(e,t,n){for(var r=(e.mode&1)!==0;H!==null;){var o=H,a=o.child;if(o.tag===22&&r){var l=o.memoizedState!==null||Ci;if(!l){var s=o.alternate,u=s!==null&&s.memoizedState!==null||un;s=Ci;var c=un;if(Ci=l,(un=u)&&!c)for(H=o;H!==null;)l=H,u=l.child,l.tag===22&&l.memoizedState!==null?Nm(o):u!==null?(u.return=l,H=u):Nm(o);for(;a!==null;)H=a,l0(a),a=a.sibling;H=o,Ci=s,un=c}Am(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,H=a):Am(e)}}function Am(e){for(;H!==null;){var t=H;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:un||Ru(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!un)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:xr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ym(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ym(t,l,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var y=c.memoizedState;if(y!==null){var d=y.dehydrated;d!==null&&Rs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}un||t.flags&512&&pf(t)}catch(w){st(t,t.return,w)}}if(t===e){H=null;break}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}}function Lm(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var n=t.sibling;if(n!==null){n.return=t.return,H=n;break}H=t.return}}function Nm(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ru(4,t)}catch(u){st(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){st(t,o,u)}}var a=t.return;try{pf(t)}catch(u){st(t,a,u)}break;case 5:var l=t.return;try{pf(t)}catch(u){st(t,l,u)}}}catch(u){st(t,t.return,u)}if(t===e){H=null;break}var s=t.sibling;if(s!==null){s.return=t.return,H=s;break}H=t.return}}var Z1=Math.ceil,du=yo.ReactCurrentDispatcher,id=yo.ReactCurrentOwner,lr=yo.ReactCurrentBatchConfig,fe=0,zt=null,kt=null,Zt=0,Bn=0,vl=oa(0),At=0,js=null,Na=0,Tu=0,ud=0,xs=null,Tn=null,cd=0,bl=1/0,lo=null,mu=!1,yf=null,Jo=null,Mi=!1,Go=null,pu=0,Ss=0,vf=null,$i=-1,Hi=0;function gn(){return fe&6?mt():$i!==-1?$i:$i=mt()}function qo(e){return e.mode&1?fe&2&&Zt!==0?Zt&-Zt:L1.transition!==null?(Hi===0&&(Hi=Hp()),Hi):(e=Me,e!==0||(e=window.event,e=e===void 0?16:Zp(e.type)),e):1}function Mr(e,t,n,r){if(50<Ss)throw Ss=0,vf=null,Error(A(185));Us(e,n,r),(!(fe&2)||e!==zt)&&(e===zt&&(!(fe&2)&&(Tu|=n),At===4&&Ho(e,Zt)),In(e,r),n===1&&fe===0&&!(t.mode&1)&&(bl=mt()+500,Cu&&aa()))}function In(e,t){var n=e.callbackNode;Lg(e,t);var r=Zi(e,e===zt?Zt:0);if(r===0)n!==null&&Hd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Hd(n),t===1)e.tag===0?A1(Dm.bind(null,e)):gh(Dm.bind(null,e)),F1(function(){!(fe&6)&&aa()}),n=null;else{switch(Kp(r)){case 1:n=Df;break;case 4:n=Vp;break;case 16:n=Qi;break;case 536870912:n=$p;break;default:n=Qi}n=p0(n,s0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function s0(e,t){if($i=-1,Hi=0,fe&6)throw Error(A(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=Zi(e,e===zt?Zt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=hu(e,r);else{t=r;var o=fe;fe|=2;var a=u0();(zt!==e||Zt!==t)&&(lo=null,bl=mt()+500,_a(e,t));do try{ey();break}catch(s){i0(e,s)}while(!0);Xf(),du.current=a,fe=o,kt!==null?t=0:(zt=null,Zt=0,t=At)}if(t!==0){if(t===2&&(o=Hc(e),o!==0&&(r=o,t=xf(e,o))),t===1)throw n=js,_a(e,0),Ho(e,r),In(e,mt()),n;if(t===6)Ho(e,r);else{if(o=e.current.alternate,!(r&30)&&!J1(o)&&(t=hu(e,r),t===2&&(a=Hc(e),a!==0&&(r=a,t=xf(e,a))),t===1))throw n=js,_a(e,0),Ho(e,r),In(e,mt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:Ra(e,Tn,lo);break;case 3:if(Ho(e,r),(r&130023424)===r&&(t=cd+500-mt(),10<t)){if(Zi(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){gn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Jc(Ra.bind(null,e,Tn,lo),t);break}Ra(e,Tn,lo);break;case 4:if(Ho(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-Cr(r);a=1<<l,l=t[l],l>o&&(o=l),r&=~a}if(r=o,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Z1(r/1960))-r,10<r){e.timeoutHandle=Jc(Ra.bind(null,e,Tn,lo),r);break}Ra(e,Tn,lo);break;case 5:Ra(e,Tn,lo);break;default:throw Error(A(329))}}}return In(e,mt()),e.callbackNode===n?s0.bind(null,e):null}function xf(e,t){var n=xs;return e.current.memoizedState.isDehydrated&&(_a(e,t).flags|=256),e=hu(e,t),e!==2&&(t=Tn,Tn=n,t!==null&&Sf(t)),e}function Sf(e){Tn===null?Tn=e:Tn.push.apply(Tn,e)}function J1(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!Er(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ho(e,t){for(t&=~ud,t&=~Tu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Cr(t),r=1<<n;e[n]=-1,t&=~r}}function Dm(e){if(fe&6)throw Error(A(327));El();var t=Zi(e,0);if(!(t&1))return In(e,mt()),null;var n=hu(e,t);if(e.tag!==0&&n===2){var r=Hc(e);r!==0&&(t=r,n=xf(e,r))}if(n===1)throw n=js,_a(e,0),Ho(e,t),In(e,mt()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ra(e,Tn,lo),In(e,mt()),null}function fd(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(bl=mt()+500,Cu&&aa())}}function Da(e){Go!==null&&Go.tag===0&&!(fe&6)&&El();var t=fe;fe|=1;var n=lr.transition,r=Me;try{if(lr.transition=null,Me=1,e)return e()}finally{Me=r,lr.transition=n,fe=t,!(fe&6)&&aa()}}function dd(){Bn=vl.current,Ge(vl)}function _a(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,P1(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(Gf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nu();break;case 3:_l(),Ge(Fn),Ge(cn),td();break;case 5:ed(r);break;case 4:_l();break;case 13:Ge(tt);break;case 19:Ge(tt);break;case 10:Qf(r.type._context);break;case 22:case 23:dd()}n=n.return}if(zt=e,kt=e=ea(e.current,null),Zt=Bn=t,At=0,js=null,ud=Tu=Na=0,Tn=xs=null,Pa!==null){for(t=0;t<Pa.length;t++)if(n=Pa[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=o,r.next=l}n.pending=r}Pa=null}return e}function i0(e,t){do{var n=kt;try{if(Xf(),zi.current=fu,cu){for(var r=nt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}cu=!1}if(La=0,Bt=bt=nt=null,ys=!1,Ls=0,id.current=null,n===null||n.return===null){At=1,js=t,kt=null;break}e:{var a=e,l=n.return,s=n,u=t;if(t=Zt,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,y=s,d=y.tag;if(!(y.mode&1)&&(d===0||d===11||d===15)){var w=y.alternate;w?(y.updateQueue=w.updateQueue,y.memoizedState=w.memoizedState,y.lanes=w.lanes):(y.updateQueue=null,y.memoizedState=null)}var h=Cm(l);if(h!==null){h.flags&=-257,Mm(h,l,s,a,t),h.mode&1&&km(a,c,t),t=h,u=c;var M=t.updateQueue;if(M===null){var k=new Set;k.add(u),t.updateQueue=k}else M.add(u);break e}else{if(!(t&1)){km(a,c,t),md();break e}u=Error(A(426))}}else if(Ye&&s.mode&1){var P=Cm(l);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Mm(P,l,s,a,t),Wf(Il(u,s));break e}}a=u=Il(u,s),At!==4&&(At=2),xs===null?xs=[a]:xs.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=Kh(a,u,t);gm(a,p);break e;case 1:s=u;var f=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Jo===null||!Jo.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var R=Gh(a,s,t);gm(a,R);break e}}a=a.return}while(a!==null)}f0(n)}catch(T){t=T,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function u0(){var e=du.current;return du.current=fu,e===null?fu:e}function md(){(At===0||At===3||At===2)&&(At=4),zt===null||!(Na&268435455)&&!(Tu&268435455)||Ho(zt,Zt)}function hu(e,t){var n=fe;fe|=2;var r=u0();(zt!==e||Zt!==t)&&(lo=null,_a(e,t));do try{q1();break}catch(o){i0(e,o)}while(!0);if(Xf(),fe=n,du.current=r,kt!==null)throw Error(A(261));return zt=null,Zt=0,At}function q1(){for(;kt!==null;)c0(kt)}function ey(){for(;kt!==null&&!Eg();)c0(kt)}function c0(e){var t=m0(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?f0(e):kt=t,id.current=null}function f0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=W1(n,t),n!==null){n.flags&=32767,kt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{At=6,kt=null;return}}else if(n=G1(n,t,Bn),n!==null){kt=n;return}if(t=t.sibling,t!==null){kt=t;return}kt=t=e}while(t!==null);At===0&&(At=5)}function Ra(e,t,n){var r=Me,o=lr.transition;try{lr.transition=null,Me=1,ty(e,t,n,r)}finally{lr.transition=o,Me=r}return null}function ty(e,t,n,r){do El();while(Go!==null);if(fe&6)throw Error(A(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Ng(e,a),e===zt&&(kt=zt=null,Zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mi||(Mi=!0,p0(Qi,function(){return El(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=lr.transition,lr.transition=null;var l=Me;Me=1;var s=fe;fe|=4,id.current=null,X1(e,n),a0(n,e),w1(Qc),Ji=!!Xc,Qc=Xc=null,e.current=n,Q1(n),Rg(),fe=s,Me=l,lr.transition=a}else e.current=n;if(Mi&&(Mi=!1,Go=e,pu=o),a=e.pendingLanes,a===0&&(Jo=null),Fg(n.stateNode),In(e,mt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(mu)throw mu=!1,e=yf,yf=null,e;return pu&1&&e.tag!==0&&El(),a=e.pendingLanes,a&1?e===vf?Ss++:(Ss=0,vf=e):Ss=0,aa(),null}function El(){if(Go!==null){var e=Kp(pu),t=lr.transition,n=Me;try{if(lr.transition=null,Me=16>e?16:e,Go===null)var r=!1;else{if(e=Go,Go=null,pu=0,fe&6)throw Error(A(331));var o=fe;for(fe|=4,H=e.current;H!==null;){var a=H,l=a.child;if(H.flags&16){var s=a.deletions;if(s!==null){for(var u=0;u<s.length;u++){var c=s[u];for(H=c;H!==null;){var y=H;switch(y.tag){case 0:case 11:case 15:vs(8,y,a)}var d=y.child;if(d!==null)d.return=y,H=d;else for(;H!==null;){y=H;var w=y.sibling,h=y.return;if(n0(y),y===c){H=null;break}if(w!==null){w.return=h,H=w;break}H=h}}}var M=a.alternate;if(M!==null){var k=M.child;if(k!==null){M.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}H=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,H=l;else e:for(;H!==null;){if(a=H,a.flags&2048)switch(a.tag){case 0:case 11:case 15:vs(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,H=p;break e}H=a.return}}var f=e.current;for(H=f;H!==null;){l=H;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,H=g;else e:for(l=f;H!==null;){if(s=H,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Ru(9,s)}}catch(T){st(s,s.return,T)}if(s===l){H=null;break e}var R=s.sibling;if(R!==null){R.return=s.return,H=R;break e}H=s.return}}if(fe=o,aa(),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(vu,e)}catch{}r=!0}return r}finally{Me=n,lr.transition=t}}return!1}function jm(e,t,n){t=Il(n,t),t=Kh(e,t,1),e=Zo(e,t,1),t=gn(),e!==null&&(Us(e,1,t),In(e,t))}function st(e,t,n){if(e.tag===3)jm(e,e,n);else for(;t!==null;){if(t.tag===3){jm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jo===null||!Jo.has(r))){e=Il(n,e),e=Gh(t,e,1),t=Zo(t,e,1),e=gn(),t!==null&&(Us(t,1,e),In(t,e));break}}t=t.return}}function ny(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=gn(),e.pingedLanes|=e.suspendedLanes&n,zt===e&&(Zt&n)===n&&(At===4||At===3&&(Zt&130023424)===Zt&&500>mt()-cd?_a(e,0):ud|=n),In(e,t)}function d0(e,t){t===0&&(e.mode&1?(t=pi,pi<<=1,!(pi&130023424)&&(pi=4194304)):t=1);var n=gn();e=ho(e,t),e!==null&&(Us(e,t,n),In(e,n))}function ry(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),d0(e,n)}function oy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),d0(e,n)}var m0;m0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fn.current)Pn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pn=!1,K1(e,t,n);Pn=!!(e.flags&131072)}else Pn=!1,Ye&&t.flags&1048576&&yh(t,au,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vi(e,t),e=t.pendingProps;var o=Tl(t,cn.current);Ml(t,n),o=rd(null,t,r,e,o,n);var a=od();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_n(r)?(a=!0,ru(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Jf(t),o.updater=Eu,t.stateNode=o,o._reactInternals=t,af(t,r,e,n),t=uf(null,t,r,!0,a,n)):(t.tag=0,Ye&&a&&Kf(t),hn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vi(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=ly(r),e=xr(r,e),o){case 0:t=sf(null,t,r,e,n);break e;case 1:t=Tm(null,t,r,e,n);break e;case 11:t=Em(null,t,r,e,n);break e;case 14:t=Rm(null,t,r,xr(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),sf(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),Tm(e,t,r,o,n);case 3:e:{if(Qh(t),e===null)throw Error(A(387));r=t.pendingProps,a=t.memoizedState,o=a.element,Ch(e,t),iu(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=Il(Error(A(423)),t),t=Pm(e,t,r,n,o);break e}else if(r!==o){o=Il(Error(A(424)),t),t=Pm(e,t,r,n,o);break e}else for(zn=Qo(t.stateNode.containerInfo.firstChild),Un=t,Ye=!0,kr=null,n=wh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pl(),r===o){t=go(e,t,n);break e}hn(e,t,r,n)}t=t.child}return t;case 5:return Mh(t),e===null&&nf(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,l=o.children,Zc(r,o)?l=null:a!==null&&Zc(r,a)&&(t.flags|=32),Xh(e,t),hn(e,t,l,n),t.child;case 6:return e===null&&nf(t),null;case 13:return Zh(e,t,n);case 4:return qf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fl(t,null,r,n):hn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),Em(e,t,r,o,n);case 7:return hn(e,t,t.pendingProps,n),t.child;case 8:return hn(e,t,t.pendingProps.children,n),t.child;case 12:return hn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,l=o.value,Oe(lu,r._currentValue),r._currentValue=l,a!==null)if(Er(a.value,l)){if(a.children===o.children&&!Fn.current){t=go(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){l=a.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=fo(-1,n&-n),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var y=c.pending;y===null?u.next=u:(u.next=y.next,y.next=u),c.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),rf(a.return,n,t),s.lanes|=n;break}u=u.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(A(341));l.lanes|=n,s=l.alternate,s!==null&&(s.lanes|=n),rf(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}hn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ml(t,n),o=ir(o),r=r(o),t.flags|=1,hn(e,t,r,n),t.child;case 14:return r=t.type,o=xr(r,t.pendingProps),o=xr(r.type,o),Rm(e,t,r,o,n);case 15:return Wh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),Vi(e,t),t.tag=1,_n(r)?(e=!0,ru(t)):e=!1,Ml(t,n),Hh(t,r,o),af(t,r,o,n),uf(null,t,r,!0,e,n);case 19:return Jh(e,t,n);case 22:return Yh(e,t,n)}throw Error(A(156,t.tag))};function p0(e,t){return Up(e,t)}function ay(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(e,t,n,r){return new ay(e,t,n,r)}function pd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ly(e){if(typeof e=="function")return pd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Af)return 11;if(e===Lf)return 14}return 2}function ea(e,t){var n=e.alternate;return n===null?(n=ar(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ki(e,t,n,r,o,a){var l=2;if(r=e,typeof e=="function")pd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case il:return Ia(n.children,o,a,t);case bf:l=8,o|=8;break;case Fc:return e=ar(12,n,t,o|2),e.elementType=Fc,e.lanes=a,e;case _c:return e=ar(13,n,t,o),e.elementType=_c,e.lanes=a,e;case Ic:return e=ar(19,n,t,o),e.elementType=Ic,e.lanes=a,e;case Mp:return Pu(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kp:l=10;break e;case Cp:l=9;break e;case Af:l=11;break e;case Lf:l=14;break e;case zo:l=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=ar(l,n,t,o),t.elementType=e,t.type=r,t.lanes=a,t}function Ia(e,t,n,r){return e=ar(7,e,r,t),e.lanes=n,e}function Pu(e,t,n,r){return e=ar(22,e,r,t),e.elementType=Mp,e.lanes=n,e.stateNode={isHidden:!1},e}function mc(e,t,n){return e=ar(6,e,null,t),e.lanes=n,e}function pc(e,t,n){return t=ar(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sy(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yu(0),this.expirationTimes=Yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yu(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function hd(e,t,n,r,o,a,l,s,u){return e=new sy(e,t,n,s,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ar(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jf(a),e}function iy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function h0(e){if(!e)return na;e=e._reactInternals;e:{if(Oa(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_n(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(_n(n))return hh(e,n,t)}return t}function g0(e,t,n,r,o,a,l,s,u){return e=hd(n,r,!0,e,o,a,l,s,u),e.context=h0(null),n=e.current,r=gn(),o=qo(n),a=fo(r,o),a.callback=t??null,Zo(n,a,o),e.current.lanes=o,Us(e,o,r),In(e,r),e}function Fu(e,t,n,r){var o=t.current,a=gn(),l=qo(o);return n=h0(n),t.context===null?t.context=n:t.pendingContext=n,t=fo(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zo(o,t,l),e!==null&&(Mr(e,o,l,a),Bi(e,o,l)),l}function gu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Om(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gd(e,t){Om(e,t),(e=e.alternate)&&Om(e,t)}function uy(){return null}var y0=typeof reportError=="function"?reportError:function(e){console.error(e)};function yd(e){this._internalRoot=e}_u.prototype.render=yd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Fu(e,t,null,null)};_u.prototype.unmount=yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Da(function(){Fu(null,e,null,null)}),t[po]=null}};function _u(e){this._internalRoot=e}_u.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$o.length&&t!==0&&t<$o[n].priority;n++);$o.splice(n,0,e),n===0&&Qp(e)}};function vd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Iu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bm(){}function cy(e,t,n,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var c=gu(l);a.call(c)}}var l=g0(t,r,e,0,null,!1,!1,"",Bm);return e._reactRootContainer=l,e[po]=l.current,Fs(e.nodeType===8?e.parentNode:e),Da(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var c=gu(u);s.call(c)}}var u=hd(e,0,!1,null,null,!1,!1,"",Bm);return e._reactRootContainer=u,e[po]=u.current,Fs(e.nodeType===8?e.parentNode:e),Da(function(){Fu(t,u,n,r)}),u}function bu(e,t,n,r,o){var a=n._reactRootContainer;if(a){var l=a;if(typeof o=="function"){var s=o;o=function(){var u=gu(l);s.call(u)}}Fu(t,l,e,o)}else l=cy(n,t,e,o,r);return gu(l)}Gp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=us(t.pendingLanes);n!==0&&(jf(t,n|1),In(t,mt()),!(fe&6)&&(bl=mt()+500,aa()))}break;case 13:Da(function(){var r=ho(e,1);if(r!==null){var o=gn();Mr(r,e,1,o)}}),gd(e,1)}};Of=function(e){if(e.tag===13){var t=ho(e,134217728);if(t!==null){var n=gn();Mr(t,e,134217728,n)}gd(e,134217728)}};Wp=function(e){if(e.tag===13){var t=qo(e),n=ho(e,t);if(n!==null){var r=gn();Mr(n,e,t,r)}gd(e,t)}};Yp=function(){return Me};Xp=function(e,t){var n=Me;try{return Me=e,t()}finally{Me=n}};Uc=function(e,t,n){switch(t){case"input":if(Lc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ku(r);if(!o)throw Error(A(90));Rp(r),Lc(r,o)}}}break;case"textarea":Pp(e,n);break;case"select":t=n.value,t!=null&&Sl(e,!!n.multiple,t,!1)}};Np=fd;Dp=Da;var fy={usingClientEntryPoint:!1,Events:[$s,dl,ku,Ap,Lp,fd]},ts={findFiberByHostInstance:Ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dy={bundleType:ts.bundleType,version:ts.version,rendererPackageName:ts.rendererPackageName,rendererConfig:ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bp(e),e===null?null:e.stateNode},findFiberByHostInstance:ts.findFiberByHostInstance||uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ei.isDisabled&&Ei.supportsFiber)try{vu=Ei.inject(dy),Br=Ei}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fy;$n.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(t))throw Error(A(200));return iy(e,t,null,n)};$n.createRoot=function(e,t){if(!vd(e))throw Error(A(299));var n=!1,r="",o=y0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=hd(e,1,!1,null,null,n,!1,r,o),e[po]=t.current,Fs(e.nodeType===8?e.parentNode:e),new yd(t)};$n.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=Bp(t),e=e===null?null:e.stateNode,e};$n.flushSync=function(e){return Da(e)};$n.hydrate=function(e,t,n){if(!Iu(t))throw Error(A(200));return bu(null,e,t,!0,n)};$n.hydrateRoot=function(e,t,n){if(!vd(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,o=!1,a="",l=y0;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=g0(t,null,e,1,n??null,o,!1,a,l),e[po]=t.current,Fs(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new _u(t)};$n.render=function(e,t,n){if(!Iu(t))throw Error(A(200));return bu(null,e,t,!1,n)};$n.unmountComponentAtNode=function(e){if(!Iu(e))throw Error(A(40));return e._reactRootContainer?(Da(function(){bu(null,null,e,!1,function(){e._reactRootContainer=null,e[po]=null})}),!0):!1};$n.unstable_batchedUpdates=fd;$n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Iu(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return bu(e,t,n,!1,r)};$n.version="18.3.1-next-f1338f8080-20240426";function v0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v0)}catch(e){console.error(e)}}v0(),vp.exports=$n;var my=vp.exports,zm=my;Tc.createRoot=zm.createRoot,Tc.hydrateRoot=zm.hydrateRoot;const x0=["rim","surface","phase","volume"],xd=x0,la=(e,t)=>({width:e,height:t,texels:e*t}),py={rim:0,surface:1,phase:2,volume:3},hy={planar:0,interleaved:1},gy={float32:0,uint8:1},yy={static:0,dynamic:1,workerStream:2},vy={gradientX:0,gradientY:1,magnitude:2,baseR:3,baseG:4,baseB:5,baseA:6,phaseGradX:7,phaseGradY:8,phaseVorticity:9,phaseCoherence:10,volumePhase:11,volumeDepth:12,volumeIntensity:13},Rn={gradientX:"Edge gradient X",gradientY:"Edge gradient Y",magnitude:"Edge magnitude",baseR:"Surface color R",baseG:"Surface color G",baseB:"Surface color B",baseA:"Surface alpha",phaseGradX:"Kuramoto grad X",phaseGradY:"Kuramoto grad Y",phaseVorticity:"Kuramoto vorticity",phaseCoherence:"Kuramoto coherence",volumePhase:"Volume phase slice",volumeDepth:"Volume depth slice",volumeIntensity:"Volume intensity slice"},xl={rim:{kind:"rim",label:"RimField",storage:"planar",format:"float32",channels:[{id:"gradX",semantic:"gradientX",description:Rn.gradientX,components:1},{id:"gradY",semantic:"gradientY",description:Rn.gradientY,components:1},{id:"mag",semantic:"magnitude",description:Rn.magnitude,components:1}],lifetime:{kind:"static",expectedMs:Number.POSITIVE_INFINITY,staleMs:Number.POSITIVE_INFINITY}},surface:{kind:"surface",label:"SurfaceField",storage:"interleaved",format:"uint8",channels:[{id:"R",semantic:"baseR",description:Rn.baseR,components:1},{id:"G",semantic:"baseG",description:Rn.baseG,components:1},{id:"B",semantic:"baseB",description:Rn.baseB,components:1},{id:"A",semantic:"baseA",description:Rn.baseA,components:1}],lifetime:{kind:"static",expectedMs:Number.POSITIVE_INFINITY,staleMs:Number.POSITIVE_INFINITY}},phase:{kind:"phase",label:"PhaseField",storage:"planar",format:"float32",channels:[{id:"gradX",semantic:"phaseGradX",description:Rn.phaseGradX,components:1},{id:"gradY",semantic:"phaseGradY",description:Rn.phaseGradY,components:1},{id:"vort",semantic:"phaseVorticity",description:Rn.phaseVorticity,components:1},{id:"coh",semantic:"phaseCoherence",description:Rn.phaseCoherence,components:1}],lifetime:{kind:"dynamic",expectedMs:16,staleMs:250}},volume:{kind:"volume",label:"VolumeField",storage:"planar",format:"float32",channels:[{id:"phase",semantic:"volumePhase",description:Rn.volumePhase,components:1},{id:"depth",semantic:"volumeDepth",description:Rn.volumeDepth,components:1},{id:"intensity",semantic:"volumeIntensity",description:Rn.volumeIntensity,components:1}],lifetime:{kind:"workerStream",expectedMs:16,staleMs:250}}},Ks=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[-\s]+/g,"_").toUpperCase(),xy=()=>Object.entries(vy).map(([e,t])=>`#define FIELD_SEMANTIC_${Ks(e)} ${t}`).join(`
`),Sy=()=>x0.map(e=>`#define FIELD_KIND_${Ks(e)} ${py[e]}`).join(`
`),wy=()=>Object.entries(hy).map(([e,t])=>`#define FIELD_STORAGE_${Ks(e)} ${t}`).join(`
`),ky=()=>Object.entries(gy).map(([e,t])=>`#define FIELD_FORMAT_${Ks(e)} ${t}`).join(`
`),Cy=()=>Object.entries(yy).map(([e,t])=>`#define FIELD_LIFETIME_${Ks(e)} ${t}`).join(`
`),My=`#define FIELD_CHANNEL_COUNT 4

${Sy()}
${wy()}
${ky()}
${Cy()}
${xy()}

struct FieldLifetimeInfo {
  int kind;
  float expectedMs;
  float staleMs;
};

struct FieldChannelInfo {
  int semantic;
  int components;
  int format;
  int _pad;
};

struct FieldContractInfo {
  ivec2 resolution;
  int storage;
  int channelCount;
  FieldLifetimeInfo lifetime;
  FieldChannelInfo ch0;
  FieldChannelInfo ch1;
  FieldChannelInfo ch2;
  FieldChannelInfo ch3;
};
`,Ey=(e,t)=>{if(!e)throw new Error(t)},or=(e,t,n,r,o)=>{Ey(e.length===t,`[fields:${r}] ${n} length ${e.length} != expected ${t} (${o})`)},Gi=(e,t)=>{const n=e.resolution.texels;or(e.gx,n,"gradX","rim",t),or(e.gy,n,"gradY","rim",t),or(e.mag,n,"mag","rim",t)},hc=(e,t)=>{const n=e.resolution.texels*xl.surface.channels.length;or(e.rgba,n,"rgba","surface",t)},Bo=(e,t)=>{const n=e.resolution.texels;or(e.gradX,n,"gradX","phase",t),or(e.gradY,n,"gradY","phase",t),or(e.vort,n,"vort","phase",t),or(e.coh,n,"coh","phase",t),or(e.amp,n,"amp","phase",t)},fs=(e,t)=>{const n=e.resolution.texels;or(e.phase,n,"phase","volume",t),or(e.depth,n,"depth","volume",t),or(e.intensity,n,"intensity","volume",t)},Ry=e=>({kind:"surface",resolution:la(e.width,e.height),rgba:e.data}),S0=2,Um=Math.PI*2,Ty=e=>{let t=e;for(;t>Math.PI;)t-=Um;for(;t<=-Math.PI;)t+=Um;return t};let Py=0;class w0{constructor(t,n){et(this,"id");et(this,"resolution");et(this,"buffer");et(this,"view");et(this,"real");et(this,"imag");et(this,"metadata");et(this,"inUse",!1);this.id=Py++,this.resolution=la(t.width,t.height);const r=t.texels,o=r*2*Float32Array.BYTES_PER_ELEMENT;this.buffer=n??new ArrayBuffer(o),this.view=new Float32Array(this.buffer),this.real=this.view.subarray(0,r),this.imag=this.view.subarray(r,r*2),this.metadata={schemaVersion:S0,solver:"dispatcher",solverInstanceId:"unassigned",frameId:-1,timestamp:0,dt:0,wavelengthNm:550,pixelPitchMeters:1e-6,space:"screen",phaseReference:"wrapped"}}markAcquired(t){this.metadata=t,this.inUse=!0}markReleased(){this.inUse=!1}getMeta(){return this.metadata}updateMeta(t){this.metadata={...this.metadata,...t,phaseOrigin:t.phaseOrigin??this.metadata.phaseOrigin,userTags:t.userTags??this.metadata.userTags}}isInUse(){return this.inUse}getPhase(t){return Math.atan2(this.imag[t],this.real[t])}applyPhaseRotation(t){const n=Math.cos(t),r=Math.sin(t);for(let o=0;o<this.real.length;o++){const a=this.real[o],l=this.imag[o];this.real[o]=a*n-l*r,this.imag[o]=a*r+l*n}}}const Fy=()=>typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now();class _y{constructor(t){et(this,"solver");et(this,"solverInstanceId");et(this,"resolution");et(this,"capacity");et(this,"pool",[]);et(this,"live",new Set);et(this,"nextFrameId");et(this,"hooks",new Set);et(this,"defaults");this.solver=t.solver,this.solverInstanceId=t.solverInstanceId??`${t.solver}-default`,this.resolution=la(t.resolution.width,t.resolution.height),this.capacity=Math.max(1,t.capacity??4),this.nextFrameId=t.initialFrameId??0,this.defaults={dt:t.defaultDt??0,wavelengthNm:t.defaultWavelengthNm??550,pixelPitchMeters:t.defaultPixelPitchMeters??1e-6,space:t.defaultSpace??"screen"}}acquireFrame(t){let n=this.pool.pop();n||(n=new w0(this.resolution));const r=this.makeMetadata(t);return n.markAcquired(r),this.live.add(n),n}releaseFrame(t){if(!this.live.has(t))throw new Error("[opticalField] attempt to release frame not owned by manager");this.live.delete(t),t.markReleased(),this.pool.length<this.capacity&&this.pool.push(t)}alignPhase(t,n){if(!this.live.has(t))throw new Error("[opticalField] cannot align phase for unmanaged frame");const{anchorIndex:r,referencePhase:o}=n;if(r<0||r>=t.real.length)throw new Error(`[opticalField] anchor index ${r} out of bounds for ${t.real.length} samples`);const a=n.tolerance??1e-6,l=t.getPhase(r);if(!Number.isFinite(l))return 0;const s=Ty(o-l);Math.abs(s)>a&&t.applyPhaseRotation(s),t.updateMeta({phaseReference:"aligned",phaseOrigin:{anchorIndex:r,referencePhase:o,appliedDelta:s}});for(const u of this.hooks)u({field:t,request:n,phaseDelta:s});return s}stampFrame(t,n){if(!this.live.has(t))throw new Error("[opticalField] cannot stamp metadata for unmanaged frame");const r=t.getMeta(),o=this.allocateFrameId(n==null?void 0:n.frameId),a={...this.makeMetadata(n,r),frameId:o,timestamp:(n==null?void 0:n.timestamp)??Fy(),dt:(n==null?void 0:n.dt)??r.dt??this.defaults.dt,wavelengthNm:(n==null?void 0:n.wavelengthNm)??r.wavelengthNm??this.defaults.wavelengthNm,pixelPitchMeters:(n==null?void 0:n.pixelPitchMeters)??r.pixelPitchMeters??this.defaults.pixelPitchMeters,space:(n==null?void 0:n.space)??r.space??this.defaults.space,phaseReference:(n==null?void 0:n.phaseReference)??"wrapped",phaseOrigin:void 0,notes:(n==null?void 0:n.notes)??r.notes,userTags:n!=null&&n.userTags?{...n.userTags}:r.userTags?{...r.userTags}:void 0};return t.markAcquired(a),a}registerPhaseHook(t){return this.hooks.add(t),()=>{this.hooks.delete(t)}}getResolution(){return this.resolution}getLatestFrameId(){return this.nextFrameId-1}allocateFrameId(t){if(t!=null)return t>=this.nextFrameId&&(this.nextFrameId=t+1),t;const n=this.nextFrameId;return this.nextFrameId+=1,n}makeMetadata(t,n){const r=(t==null?void 0:t.userTags)??(n==null?void 0:n.userTags);return{schemaVersion:S0,solver:this.solver,solverInstanceId:this.solverInstanceId,frameId:(t==null?void 0:t.frameId)??(n==null?void 0:n.frameId)??-1,timestamp:(t==null?void 0:t.timestamp)??(n==null?void 0:n.timestamp)??0,dt:(t==null?void 0:t.dt)??(n==null?void 0:n.dt)??this.defaults.dt,wavelengthNm:(t==null?void 0:t.wavelengthNm)??(n==null?void 0:n.wavelengthNm)??this.defaults.wavelengthNm,pixelPitchMeters:(t==null?void 0:t.pixelPitchMeters)??(n==null?void 0:n.pixelPitchMeters)??this.defaults.pixelPitchMeters,space:(t==null?void 0:t.space)??(n==null?void 0:n.space)??this.defaults.space,phaseReference:(t==null?void 0:t.phaseReference)??(n==null?void 0:n.phaseReference)??"wrapped",phaseOrigin:n==null?void 0:n.phaseOrigin,notes:(t==null?void 0:t.notes)??(n==null?void 0:n.notes),userTags:r?{...r}:void 0}}}const Iy=(e,t,n)=>Number.isNaN(e)?t:Number.isFinite(e)?e<t?t:e>n?n:e:e>0?n:t,Au={gain:1,k0:.08,Q:2.2,anisotropy:.6,chirality:.4,transparency:.2},by={gain:{min:0,max:6},k0:{min:.01,max:.45},Q:{min:.5,max:10},anisotropy:{min:0,max:2},chirality:{min:0,max:2.5},transparency:{min:0,max:1}},rl=(e,t)=>{const n=by[e],r=Au[e];return t==null?r:Iy(t,n.min,n.max)},Os=e=>({gain:rl("gain",e==null?void 0:e.gain),k0:rl("k0",e==null?void 0:e.k0),Q:rl("Q",e==null?void 0:e.Q),anisotropy:rl("anisotropy",e==null?void 0:e.anisotropy),chirality:rl("chirality",e==null?void 0:e.chirality),transparency:rl("transparency",e==null?void 0:e.transparency)}),Bs=e=>Os(e),Ur=e=>Os({...e}),Sd=e=>({gain:e.gain,k0:e.k0,Q:e.Q,anisotropy:e.anisotropy,chirality:e.chirality,transparency:e.transparency}),sr=Object.freeze(Sd(Au));Sd(Au);const k0=()=>Ur(Au),Gs=(e,t,n)=>Math.max(t,Math.min(n,e)),C0=e=>Gs(e,0,1),ol=e=>{let t=e;for(;t>Math.PI;)t-=2*Math.PI;for(;t<=-Math.PI;)t+=2*Math.PI;return t},wr=(e,t,n,r)=>{const o=(e%n+n)%n;return(t%r+r)%r*n+o},Vm=e=>C0(e??0),wd=e=>({...e,phaseOrigin:e.phaseOrigin?{...e.phaseOrigin}:void 0,userTags:e.userTags?{...e.userTags}:void 0}),Ay=(e,t,n)=>{const r=la(e,t),o=r.texels,a=new Float32Array(o*3);return{resolution:r,exposureSeconds:0,foveaPx:[Math.floor(e/2),Math.floor(t/2)],buffer:a,L:a.subarray(0,o),M:a.subarray(o,o*2),S:a.subarray(o*2,o*3),opticalMeta:wd(n),kernel:Ur(sr),kernelVersion:0}},Ly=()=>({frameId:-1,timestamp:0,dt:0,kernelVersion:0,kernel:Ur(sr),orderParameter:{magnitude:0,phase:0,real:0,imag:0,sampleCount:0},interference:{mean:0,variance:0,max:0}}),M0=(e,t)=>{const n=Vm(t==null?void 0:t.dmt),r=Vm(t==null?void 0:t.arousal),o=sr.anisotropy,a=sr.chirality,l=sr.transparency,u=1+.45*Gs(e.anisotropy-o,-1,1),c=Math.max(0,u+.25*n+.2*r),y=Math.max(0,e.gain*(1+.35*n+.25*r)),d=1+.4*(e.chirality-a),w=Math.max(0,d+.2*n+.15*r),h=Math.max(0,1+.55*(e.transparency-l)+.25*n);return{flux:c,amplitude:y,phase:w,transparency:h}},Ny=(e,t)=>((!e.theta||e.theta.length!==t)&&(e.theta=new Float32Array(t)),e.theta),Dy=(e,t)=>{const n=sr.k0,r=n>0?(t.k0-n)/n:0,o=Gs(r,-.95,3);return e.phase*(1+.5*o)},jy=(e,t)=>{const n=Gs(t.chirality-sr.chirality,-2.5,2.5);return e.phase*(1+.35*n)},Oy=(e,t,n)=>{const{fluxX:r=0,fluxY:o=0}=t;if(r===0&&o===0)return;const{width:a,height:l}=e.resolution,s=e.real,u=e.imag,c=a>1?1/(a-1):0,y=l>1?1/(l-1):0,d=n.flux;for(let w=0;w<l;w++){const h=l>1?w*y*2-1:0;for(let M=0;M<a;M++){const k=a>1?M*c*2-1:0,P=w*a+M,p=d*(r*k+o*h);if(p===0)continue;const f=Math.cos(p),g=Math.sin(p),R=s[P],T=u[P];s[P]=R*f-T*g,u[P]=R*g+T*f}}},By=(e,t,n,r)=>{const{width:o,height:a}=e.resolution,l=e.real,s=e.imag,{fluxX:u=0,fluxY:c=0}=t,y=Math.cos(u),d=Math.sin(u),w=Math.cos(c),h=Math.sin(c),M=-d,k=-h,P=u!==0,p=c!==0,f=.2*r.flux,g=sr.anisotropy,R=Gs(n.anisotropy-g,-1,1),T=1+.5*R,C=1-.5*R;return{coupling(F,I,j){const G=wr(F-1,I,o,a),Se=wr(F+1,I,o,a),ot=wr(F,I-1,o,a),ye=wr(F,I+1,o,a);let Be=l[G],Ut=s[G],Ie=l[Se],Vt=s[Se],N=l[ot],$=s[ot],O=l[ye],ee=s[ye];if(P&&F===o-1){const Q=Ie,ce=Vt;Ie=Q*y-ce*d,Vt=Q*d+ce*y}if(P&&F===0){const Q=Be,ce=Ut;Be=Q*y-ce*M,Ut=Q*M+ce*y}if(p&&I===a-1){const Q=O,ce=ee;O=Q*w-ce*h,ee=Q*h+ce*w}if(p&&I===0){const Q=N,ce=$;N=Q*w-ce*k,$=Q*k+ce*w}const Z=l[j],we=s[j],Ee=Z+T*(Be+Ie)+C*(N+O),de=we+T*(Ut+Vt)+C*($+ee);return{Hr:f*Ee,Hi:f*de}}}},zy=(e,t,n)=>{const{amp:r,coh:o}=t,{real:a,imag:l}=e,s=n.transparency;for(let u=0;u<a.length;u++){const c=Math.hypot(a[u],l[u])*n.amplitude;r[u]=c,o[u]=C0(c*s)}},Uy=(e,t,n,r,o)=>{const{gradX:a,gradY:l,vort:s}=t,{width:u,height:c}=e.resolution,y=e.real,d=e.imag,w=y.length,h=Ny(o,w);for(let P=0;P<w;P++)h[P]=Math.atan2(d[P],y[P]);const M=Dy(n,r),k=jy(n,r);for(let P=0;P<c;P++)for(let p=0;p<u;p++){const f=P*u+p,g=wr(p-1,P,u,c),R=wr(p+1,P,u,c),T=wr(p,P-1,u,c),C=wr(p,P+1,u,c);a[f]=.5*M*ol(h[R]-h[g]),l[f]=.5*M*ol(h[C]-h[T])}for(let P=0;P<c;P++)for(let p=0;p<u;p++){const f=P*u+p,g=wr(p+1,P,u,c),R=wr(p+1,P+1,u,c),T=wr(p,P+1,u,c),C=ol(h[g]-h[f]),F=ol(h[R]-h[g]),I=ol(h[T]-h[R]),j=ol(h[f]-h[T]);s[f]=k*(C+F+I+j)/(2*Math.PI)}},Vy=(e,t)=>{switch(e){case"flux":t.params&&Oy(t.field,t.params,t.gains);break;case"amplitude":t.derived&&zy(t.field,t.derived,t.gains);break;case"phase":t.derived&&Uy(t.field,t.derived,t.gains,t.kernel,t.scratch);break}},$y=(e,t)=>{const{field:n}=t,{branches:r,recombine:o="sum"}=e;if(!r.length)return;const a=n.resolution,l=a.texels,s=new Float32Array(l),u=new Float32Array(l);let c=0,y=0;for(const M of r){const k=M.weight??1;c+=k,y+=k*k;const P=new w0(a);P.real.set(n.real),P.imag.set(n.imag);const p={field:P,derived:void 0,params:t.params,kernel:t.kernel,gains:t.gains,scratch:{}};kd(M.steps,p);const f=P.real,g=P.imag;for(let R=0;R<l;R++)s[R]+=f[R]*k,u[R]+=g[R]*k}let d=1;switch(o){case"average":c!==0&&(d=1/c);break;case"energy":y!==0&&(d=1/Math.sqrt(y));break;case"sum":default:d=1;break}const w=n.real,h=n.imag;for(let M=0;M<l;M++)w[M]=s[M]*d,h[M]=u[M]*d},kd=(e,t)=>{for(const n of e)n.kind==="operator"?Vy(n.operator,t):n.kind==="beamSplit"&&$y(n,t)},Hy=[{kind:"operator",operator:"amplitude"},{kind:"operator",operator:"phase"}],$m=(e,t,n)=>{const r=la(e,t),o=n??new _y({solver:"kuramoto",resolution:r,initialFrameId:0}),a=o.acquireFrame(),l=Ly(),s=a.getMeta(),u=Ay(e,t,s);return{width:e,height:t,manager:o,field:a,Zr:a.real,Zi:a.imag,telemetry:l,irradiance:u}},Ky=5,gc=(e,t)=>e*t*Ky*Float32Array.BYTES_PER_ELEMENT,Ri=(e,t,n)=>{const r=t*n,o=new Float32Array(e),a=o.subarray(0,r),l=o.subarray(r,r*2),s=o.subarray(r*2,r*3),u=o.subarray(r*3,r*4),c=o.subarray(r*4,r*5);return{kind:"phase",resolution:la(t,n),gradX:a,gradY:l,vort:s,coh:u,amp:c}},Hm=(e,t,n)=>{const{width:r,height:o,Zr:a,Zi:l}=e;for(let y=0;y<o;y++)for(let d=0;d<r;d++){const w=2*Math.PI*t*d/r,h=y*r+d;a[h]=Math.cos(w),l[h]=Math.sin(w)}const s=e.field.getMeta(),u=e.telemetry;u.frameId=-1,u.timestamp=0,u.dt=0,u.kernelVersion=0,u.kernel=Ur(sr),u.orderParameter.magnitude=0,u.orderParameter.phase=0,u.orderParameter.real=0,u.orderParameter.imag=0,u.orderParameter.sampleCount=0,u.interference.mean=0,u.interference.variance=0,u.interference.max=0;const c=e.irradiance;c.exposureSeconds=0,c.foveaPx=[Math.floor(r/2),Math.floor(o/2)],c.L.fill(0),c.M.fill(0),c.S.fill(0),c.kernelVersion=0,c.kernel=Ur(sr),c.opticalMeta=wd(s),n&&(n.gradX.fill(0),n.gradY.fill(0),n.vort.fill(0),n.coh.fill(.5),n.amp.fill(0))},Km=(e,t,n,r,o,a)=>{const{width:l,height:s,Zr:u,Zi:c}=e,{alphaKur:y,gammaKur:d,omega0:w,K0:h,epsKur:M}=t,k=(a==null?void 0:a.kernel)??sr,P=M0(k,a==null?void 0:a.controls),p=a==null?void 0:a.telemetry,f=(p==null?void 0:p.captureIrradiance)??!0;a!=null&&a.schedule&&kd(a.schedule,{field:e.field,derived:void 0,params:t,kernel:k,gains:P,scratch:{}});const g=By(e.field,t,k,P),R=Math.cos(y),T=Math.sin(y),C=.5*h*P.phase,F=Math.sqrt(Math.max(n*M,0)),I=e.irradiance,j=l*s,G=I.L,Se=I.M,ot=I.S;p!=null&&p.foveaPx&&(I.foveaPx=[p.foveaPx[0],p.foveaPx[1]]);let ye=0,Be=0,Ut=0,Ie=0,Vt=0,N=0;for(let ve=0;ve<s;ve++)for(let te=0;te<l;te++){const ge=ve*l+te,{Hr:qt,Hi:ze}=g.coupling(te,ve,ge),B=u[ge],xe=c[ge],Vr=B*B-xe*xe,$t=2*B*xe,We=R*qt+T*ze,sa=-T*qt+R*ze,Xe=qt,Kn=-ze,pt=Vr*Xe-$t*Kn,ia=Vr*Kn+$t*Xe,Rr=R*pt-T*ia,Ct=T*pt+R*ia,Lt=-d*B-w*xe+C*(We-Rr),$r=-d*xe+w*B+C*(sa-Ct),Mt=B+n*Lt+F*r(),Hr=xe+n*$r+F*r();u[ge]=Mt,c[ge]=Hr;const ht=Mt*Mt+Hr*Hr;Ie+=ht,Vt+=ht*ht,ht>N&&(N=ht);const vo=Math.sqrt(ht);if(vo>1e-12){const xn=1/vo;ye+=Mt*xn,Be+=Hr*xn,Ut+=1}f&&(G[ge]=ht,Se[ge]=ht,ot[ge]=ht)}const $=e.manager.stampFrame(e.field,{dt:n,timestamp:o}),O=e.telemetry,ee=Ut>0?1/Ut:0,Z=ye*ee,we=Be*ee;O.frameId=$.frameId,O.timestamp=$.timestamp,O.dt=n;const Ee=(p==null?void 0:p.kernelVersion)??O.kernelVersion;O.kernelVersion=Ee,O.kernel=Ur(k),O.orderParameter.real=Z,O.orderParameter.imag=we,O.orderParameter.magnitude=Math.hypot(Z,we),O.orderParameter.phase=Math.atan2(we,Z),O.orderParameter.sampleCount=Ut;const de=j>0?j:1,Q=Ie/de,ce=Math.max(0,Vt/de-Q*Q);return O.interference.mean=Q,O.interference.variance=ce,O.interference.max=N,I.exposureSeconds=f?n:0,I.kernelVersion=Ee,I.kernel=Ur(k),I.opticalMeta=wd($),{telemetry:O,irradiance:I}},Gm=(e,t,n)=>{const r=(n==null?void 0:n.kernel)??sr,o=M0(r,n==null?void 0:n.controls),a=(n==null?void 0:n.schedule)??Hy,l={field:e.field,derived:t,params:n==null?void 0:n.params,kernel:r,gains:o,scratch:{}};kd(a,l)},Gy=e=>{let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}},Wy=e=>{const t=Gy(e);let n=null;return()=>{if(n!=null){const u=n;return n=null,u}let r=0,o=0;for(;r===0;)r=t();for(;o===0;)o=t();const a=Math.sqrt(-2*Math.log(r)),l=a*Math.cos(2*Math.PI*o);return n=a*Math.sin(2*Math.PI*o),l}},Yy=`#version 300 es
precision highp float;

layout (location = 0) in vec2 aPosition;
out vec2 vUv;

void main() {
  // Keep y=0 at the top edge so the shader matches the CPU compositor orientation.
  vUv = vec2((aPosition.x + 1.0) * 0.5, (1.0 - aPosition.y) * 0.5);
  gl_Position = vec4(aPosition, 0.0, 1.0);
}
`,Xy=`#version 300 es
precision highp float;

${My}

in vec2 vUv;
out vec4 fragColor;

uniform sampler2D uBaseTex;
uniform sampler2D uEdgeTex;
uniform sampler2D uKurTex;
uniform sampler2D uKurAmpTex;
uniform sampler2D uVolumeTex;

uniform vec2 uResolution;
uniform float uTime;

uniform float uEdgeThreshold;
uniform float uEffectiveBlend;
uniform int uDisplayMode;
uniform vec3 uBaseOffsets;
uniform float uSigma;
uniform float uJitter;
uniform float uJitterPhase;
uniform float uBreath;
uniform float uMuJ;
uniform int uPhasePin;
uniform int uMicrosaccade;
uniform int uPolBins;
uniform int uThetaMode;
uniform float uThetaGlobal;
uniform float uContrast;
uniform float uFrameGain;
uniform int uRimEnabled;
uniform float uRimAlpha;
uniform float uWarpAmp;
uniform float uSurfaceBlend;
uniform int uSurfaceRegion;
uniform int uSurfEnabled;
uniform int uKurEnabled;
uniform int uVolumeEnabled;
uniform int uUseWallpaper;
uniform int uOpsCount;
uniform vec4 uOps[8];
uniform int uOrientCount;
uniform float uOrientCos[8];
uniform float uOrientSin[8];
uniform vec2 uCanvasCenter;
uniform float uKernelGain;
uniform float uKernelK0;
uniform float uKernelQ;
uniform float uKernelAniso;
uniform float uKernelChirality;
uniform float uAlive;
uniform float uBeta2;
uniform float uCouplingRimSurfaceBlend;
uniform float uCouplingRimSurfaceAlign;
uniform float uCouplingSurfaceRimOffset;
uniform float uCouplingSurfaceRimSigma;
uniform float uCouplingSurfaceRimHue;
uniform float uCouplingKurTransparency;
uniform float uCouplingKurOrientation;
uniform float uCouplingKurChirality;
uniform float uCouplingScale;
uniform float uCouplingVolumePhaseHue;
uniform float uCouplingVolumeDepthWarp;
uniform float uComposerExposure[4];
uniform float uComposerGamma[4];
uniform float uComposerWeight[4];
uniform vec2 uComposerBlendGain;

#define COMPOSER_FIELD_SURFACE 0
#define COMPOSER_FIELD_RIM 1
#define COMPOSER_FIELD_KUR 2
#define COMPOSER_FIELD_VOLUME 3

const float TAU = 6.283185307179586;

float clamp01(float v) {
  return clamp(v, 0.0, 1.0);
}

float hash2(float x, float y) {
  return fract(sin(x * 127.1 + y * 311.7) * 43758.5453);
}

float applyComposerScalar(float value, int fieldIndex) {
  float exposure = uComposerExposure[fieldIndex];
  float gamma = uComposerGamma[fieldIndex];
  float scaled = clamp(value * exposure, 0.0, 1.0);
  float adjusted = pow(scaled, gamma);
  return clamp(adjusted, 0.0, 1.0);
}

vec3 applyComposerVec3(vec3 rgb, int fieldIndex) {
  return vec3(
    applyComposerScalar(rgb.r, fieldIndex),
    applyComposerScalar(rgb.g, fieldIndex),
    applyComposerScalar(rgb.b, fieldIndex)
  );
}

vec4 fetchEdge(ivec2 coord) {
  return texelFetch(uEdgeTex, coord, 0);
}

vec4 fetchKur(ivec2 coord) {
  return texelFetch(uKurTex, coord, 0);
}

float sampleScalarTexture(sampler2D tex, vec2 coord, int component) {
  vec2 clamped = clamp(coord, vec2(0.0), uResolution - vec2(1.001));
  vec2 base = floor(clamped);
  vec2 frac = clamped - base;
  int width = int(uResolution.x);
  int height = int(uResolution.y);
  int x0 = int(base.x);
  int y0 = int(base.y);
  int x1 = min(x0 + 1, width - 1);
  int y1 = min(y0 + 1, height - 1);
  // Textures are uploaded without UNPACK_FLIP; texelFetch coords follow the same top-left convention as the CPU sampler.
  ivec2 i00 = ivec2(x0, y0);
  ivec2 i10 = ivec2(x1, y0);
  ivec2 i01 = ivec2(x0, y1);
  ivec2 i11 = ivec2(x1, y1);
  vec4 v00 = texelFetch(tex, i00, 0);
  vec4 v10 = texelFetch(tex, i10, 0);
  vec4 v01 = texelFetch(tex, i01, 0);
  vec4 v11 = texelFetch(tex, i11, 0);
  float a = mix(v00[component], v10[component], frac.x);
  float b = mix(v01[component], v11[component], frac.x);
  return mix(a, b, frac.y);
}

vec3 sampleRgbTexture(sampler2D tex, vec2 coord) {
  vec2 clamped = clamp(coord, vec2(0.0), uResolution - vec2(1.001));
  vec2 base = floor(clamped);
  vec2 frac = clamped - base;
  int width = int(uResolution.x);
  int height = int(uResolution.y);
  int x0 = int(base.x);
int y0 = int(base.y);
int x1 = min(x0 + 1, width - 1);
int y1 = min(y0 + 1, height - 1);
ivec2 i00 = ivec2(x0, y0);
ivec2 i10 = ivec2(x1, y0);
ivec2 i01 = ivec2(x0, y1);
ivec2 i11 = ivec2(x1, y1);
  vec4 v00 = texelFetch(tex, i00, 0);
  vec4 v10 = texelFetch(tex, i10, 0);
  vec4 v01 = texelFetch(tex, i01, 0);
  vec4 v11 = texelFetch(tex, i11, 0);
  vec3 a = mix(v00.rgb, v10.rgb, frac.x);
  vec3 b = mix(v01.rgb, v11.rgb, frac.x);
  return mix(a, b, frac.y);
}

vec2 computeLatticeFlow(vec2 coord) {
  if (uOrientCount <= 0) {
    return vec2(0.0);
  }
  float freq = 0.015 + 0.004 * float(uOrientCount);
  float timeShift = uTime * 0.6;
  vec2 flow = vec2(0.0);
  for (int k = 0; k < 8; ++k) {
    if (k >= uOrientCount) break;
    float proj = (coord.x - uCanvasCenter.x) * uOrientCos[k] + (coord.y - uCanvasCenter.y) * uOrientSin[k];
    float phaseVal = proj * freq + timeShift + float(k) * 0.35;
    float magnitude = 0.5 + 0.5 * sin(phaseVal + uBeta2 * 0.25);
    flow += vec2(uOrientCos[k], uOrientSin[k]) * magnitude;
  }
  return flow / max(float(uOrientCount), 1.0);
}

vec2 applyOp(vec4 op, vec2 point) {
  int kind = int(op.x + 0.5);
  vec2 p = point - uCanvasCenter;
  if (kind == 0) {
    float ang = op.y;
    float c = cos(ang);
    float s = sin(ang);
    p = vec2(c * p.x - s * p.y, s * p.x + c * p.y);
  } else if (kind == 1) {
    p = vec2(-p.x, p.y);
  } else if (kind == 2) {
    p = vec2(p.x, -p.y);
  } else if (kind == 3) {
    p = vec2(p.y, p.x);
  } else if (kind == 4) {
    p = vec2(-p.y, -p.x);
  }
  vec2 translation = vec2(op.z * uResolution.x, op.w * uResolution.y);
  return p + uCanvasCenter + translation;
}

vec2 wallpaperAt(vec2 relPt) {
  int N = uOrientCount;
  if (N <= 0) return vec2(0.0);
  float gx = 0.0;
  float gy = 0.0;
  for (int j = 0; j < 8; ++j) {
    if (j >= N) break;
    float c = uOrientCos[j];
    float s = uOrientSin[j];
    float phase = uKernelChirality * (float(j) / float(N));
    if (uAlive > 0.5) {
      phase += 0.2 * sin(TAU * 0.3 * uTime + float(j));
    }
    float arg = TAU * uKernelK0 * (relPt.x * c + relPt.y * s) + phase;
    float d = -TAU * uKernelK0 * sin(arg);
    gx += d * c;
    gy += d * s;
  }
  float inv = 1.0 / float(N);
  return vec2(gx, gy) * inv;
}

float gauss(float x, float s) {
  return exp(-(x * x) / (2.0 * s * s + 1e-9));
}

float luma01(vec3 c) {
  return clamp01(dot(c, vec3(0.2126, 0.7152, 0.0722)));
}

vec3 clamp01(vec3 v) {
  return clamp(v, vec3(0.0), vec3(1.0));
}

float wrapPi(float theta) {
  float twoPi = TAU;
  return theta - floor((theta + 3.141592653589793) / twoPi) * twoPi - 3.141592653589793;
}

float responseSoft(float value, float shaping) {
  float v = clamp(value, 0.0, 1.0);
  float expVal = mix(1.2, 3.5, clamp(shaping, 0.0, 1.0));
  return 1.0 - pow(max(0.0, 1.0 - v), expVal);
}

float responsePow(float value, float shaping) {
  float v = clamp(value, 0.0, 1.0);
  float expVal = mix(1.65, 0.55, clamp(shaping, 0.0, 1.0));
  return pow(v, expVal);
}

void main() {
  vec2 fragCoord = vec2(vUv.x * uResolution.x, vUv.y * uResolution.y);
  vec2 fragClamped = clamp(fragCoord, vec2(0.0), uResolution - vec2(1.0));
  int xPix = int(fragClamped.x);
  int yPix = int(fragClamped.y);
  ivec2 icoord = ivec2(xPix, yPix);
  int width = int(uResolution.x);
  int height = int(uResolution.y);

  vec4 edgeSample = fetchEdge(icoord);
  vec3 baseRgb = texelFetch(uBaseTex, icoord, 0).rgb;
  float magVal = edgeSample.b;

  vec3 volumeSample = vec3(0.0);
  float volumePhaseVal = 0.0;
  float volumeDepthVal = 0.0;
  float volumeIntensityVal = 0.0;
  float volumeDepthGrad = 0.0;
  if (uVolumeEnabled == 1) {
    volumeSample = texelFetch(uVolumeTex, icoord, 0).rgb;
    volumePhaseVal = volumeSample.r;
    volumeDepthVal = volumeSample.g;
    volumeIntensityVal = volumeSample.b;
    int leftX = max(xPix - 1, 0);
    int rightX = min(xPix + 1, width - 1);
    int upY = max(yPix - 1, 0);
    int downY = min(yPix + 1, height - 1);
    float depthLeft = texelFetch(uVolumeTex, ivec2(leftX, yPix), 0).g;
    float depthRight = texelFetch(uVolumeTex, ivec2(rightX, yPix), 0).g;
    float depthUp = texelFetch(uVolumeTex, ivec2(xPix, upY), 0).g;
    float depthDown = texelFetch(uVolumeTex, ivec2(xPix, downY), 0).g;
    float depthDx = (depthRight - depthLeft) * 0.5;
    float depthDy = (depthDown - depthUp) * 0.5;
    volumeDepthGrad = length(vec2(depthDx, depthDy));
  }

  if (uDisplayMode == 1 || uDisplayMode == 2) {
    float yb = clamp01(dot(baseRgb, vec3(0.2126, 0.7152, 0.0722)));
    baseRgb = vec3(yb);
  }

  vec2 warpFlow = computeLatticeFlow(fragCoord);
  if (uUseWallpaper == 1 && uOrientCount == 0) {
    vec2 accum = vec2(0.0);
    if (uOpsCount == 0) {
      accum = wallpaperAt(fragCoord - uCanvasCenter);
    } else {
      for (int k = 0; k < 8; ++k) {
        if (k >= uOpsCount) break;
        vec2 pt = applyOp(uOps[k], fragCoord);
        accum += wallpaperAt(pt - uCanvasCenter);
      }
      accum /= float(uOpsCount);
    }
    warpFlow += accum;
  }

  if (uVolumeEnabled == 1 && uCouplingVolumeDepthWarp > 0.0) {
    float gradNorm = min(volumeDepthGrad / (0.18 + 0.12 * uKernelK0 + 1e-6), 1.0);
    float gradResponse = responseSoft(gradNorm, uCouplingVolumeDepthWarp);
    float gradSignal = applyComposerScalar(gradResponse, COMPOSER_FIELD_VOLUME);
    float boost =
      1.0 +
      uCouplingScale *
        uCouplingVolumeDepthWarp *
        gradSignal *
        uComposerWeight[COMPOSER_FIELD_VOLUME];
    warpFlow *= boost;
  }

  vec2 kurGrad = vec2(0.0);
  float vortVal = 0.0;
  float cohVal = 0.0;
  float ampVal = 0.0;
  if (uKurEnabled == 1) {
    vec4 kurSample = fetchKur(icoord);
    kurGrad = kurSample.xy;
    vortVal = kurSample.z;
    cohVal = clamp(kurSample.w, 0.0, 1.0);
    ampVal = clamp(texelFetch(uKurAmpTex, icoord, 0).r, 0.0, 1.0);
  }

  vec2 combinedFlow = warpFlow + kurGrad;
  vec2 gradEdge = edgeSample.rg;

  vec3 resultRgb = baseRgb;
  float rimEnergy = 0.0;

  float couplingScale = uCouplingScale;
  float sigmaFloorBase = max(0.25, uSigma * 0.25);

  vec2 normal = vec2(0.0);
  vec2 tangent = vec2(0.0);
  float edgeLen = length(gradEdge);
  if (edgeLen > 1e-8) {
    normal = gradEdge / edgeLen;
    tangent = vec2(-normal.y, normal.x);
  }

  if (uRimEnabled == 1 && magVal >= uEdgeThreshold) {
    float thetaRaw = atan(normal.y, normal.x);
    float thetaEdge = thetaRaw;
    if (uThetaMode == 1) {
      thetaEdge = uThetaGlobal;
    } else if (uPolBins > 0) {
      float steps = float(uPolBins);
      thetaEdge = round((thetaRaw / TAU) * steps) * (TAU / steps);
    }

    float thetaUse = thetaEdge;
    if (uCouplingKurOrientation > 0.0) {
      float kurNorm = length(kurGrad);
      if (kurNorm > 1e-6) {
        vec2 edgeDir = vec2(cos(thetaUse), sin(thetaUse));
        vec2 kurDir = kurGrad / kurNorm;
        float mixW = clamp(uCouplingKurOrientation * couplingScale * uComposerWeight[COMPOSER_FIELD_KUR], 0.0, 1.0);
        vec2 blended = mix(edgeDir, kurDir, mixW);
        thetaUse = atan(blended.y, blended.x);
        if (uPolBins > 0) {
          float steps = float(uPolBins);
          thetaUse = round((thetaUse / TAU) * steps) * (TAU / steps);
        }
      }
    }

    float delta = uKernelAniso * 0.9;
    float rho = uKernelChirality * 0.75;
    float thetaEff = thetaUse + rho * uTime;
    float polL = 0.5 * (1.0 + cos(delta) * cos(2.0 * thetaEff));
    float polM = 0.5 * (1.0 + cos(delta) * cos(2.0 * (thetaEff + 0.3)));
    float polS = 0.5 * (1.0 + cos(delta) * cos(2.0 * (thetaEff + 0.6)));

    float jitterSeed = hash2(floor(fragCoord.x + 0.5), floor(fragCoord.y + 0.5));
    float rawJ = sin(uJitterPhase + jitterSeed * TAU);
    float jitterFactor = uJitter * float(uMicrosaccade);
    float localJ = jitterFactor * (float(uPhasePin) == 1.0 ? (rawJ - uMuJ) : rawJ);
    float breath = uBreath;

    float warpNorm = length(warpFlow);
    float bias = 0.0;
    if (uCouplingSurfaceRimOffset > 0.0 && warpNorm > 1e-6) {
      float proj = dot(warpFlow, normal) / (warpNorm + 1e-6);
      float magnitude = responseSoft(
        warpNorm / (1.05 + 0.55 * uKernelK0),
        uCouplingSurfaceRimOffset
      );
      float magnitudeAdjusted = applyComposerScalar(clamp(magnitude, 0.0, 1.0), COMPOSER_FIELD_SURFACE);
      float signedVal = clamp(proj, -1.0, 1.0) * magnitudeAdjusted;
      bias = clamp(
        0.65 *
          couplingScale *
          uCouplingSurfaceRimOffset *
          uComposerWeight[COMPOSER_FIELD_SURFACE] *
          signedVal,
        -0.9,
        0.9
      );
    }

    float sigmaEff = uSigma;
    if (uCouplingSurfaceRimSigma > 0.0 && warpNorm > 1e-6) {
      float sharpness = responsePow(
        warpNorm / (1.15 + 0.6 * uKernelK0),
        uCouplingSurfaceRimSigma
      );
      float sharpnessAdjusted = applyComposerScalar(clamp(sharpness, 0.0, 1.0), COMPOSER_FIELD_SURFACE);
      float drop = clamp(
        0.75 *
          couplingScale *
          uCouplingSurfaceRimSigma *
          uComposerWeight[COMPOSER_FIELD_SURFACE] *
          sharpnessAdjusted,
        0.0,
        1.0
      );
      float sigmaFloor = clamp(sigmaFloorBase, 0.0, uSigma);
      sigmaEff = clamp(uSigma * (1.0 - drop), sigmaFloor, uSigma);
    }

    float offL = uBaseOffsets.x + localJ * 0.35 + bias;
    float offM = uBaseOffsets.y + localJ * 0.5 + bias;
    float offS = uBaseOffsets.z + localJ * 0.8 + bias;

    float hueShift = 0.0;
    if (uVolumeEnabled == 1 && uCouplingVolumePhaseHue > 0.0) {
      float phaseNorm = clamp(volumePhaseVal / 3.141592653589793, -1.0, 1.0);
      float phaseMag = applyComposerScalar(abs(phaseNorm), COMPOSER_FIELD_VOLUME);
      float signedPhase = phaseNorm < 0.0 ? -phaseMag : phaseMag;
      float volHue = clamp(
        uCouplingScale *
          uCouplingVolumePhaseHue *
          uComposerWeight[COMPOSER_FIELD_VOLUME] *
          signedPhase *
          0.6,
        -1.5,
        1.5
      );
      hueShift += volHue;
    }
    if (uCouplingSurfaceRimHue > 0.0 && warpNorm > 1e-6) {
      float latticeAngle = atan(warpFlow.y, warpFlow.x);
      float tangentAngle = atan(tangent.y, tangent.x);
      float deltaAngle = wrapPi(latticeAngle - tangentAngle);
      float hueAmplitude = responseSoft(
        min(abs(deltaAngle) / 3.141592653589793, 1.0),
        uCouplingSurfaceRimHue
      );
      float warpWeight = responsePow(
        warpNorm / (1.1 + 0.6 * uKernelK0),
        uCouplingSurfaceRimHue
      );
      float hueSignal = applyComposerScalar(clamp(hueAmplitude * warpWeight, 0.0, 1.0), COMPOSER_FIELD_SURFACE);
      float signedMag =
        (deltaAngle == 0.0 ? 0.0 : sign(deltaAngle)) * hueSignal;
      hueShift = clamp(
        couplingScale *
          uCouplingSurfaceRimHue *
          uComposerWeight[COMPOSER_FIELD_SURFACE] *
          signedMag *
          0.9,
        -1.4,
        1.4
      );
    }

    vec2 pos = fragCoord;
    vec2 samplePosL = pos + (offL + breath) * normal;
    vec2 samplePosM = pos + (offM + breath) * normal;
    vec2 samplePosS = pos + (offS + breath) * normal;

    float pL = sampleScalarTexture(uEdgeTex, samplePosL, 2);
    float pM = sampleScalarTexture(uEdgeTex, samplePosM, 2);
    float pS = sampleScalarTexture(uEdgeTex, samplePosS, 2);

    float gL = gauss(offL, sigmaEff) * uKernelGain;
    float gM = gauss(offM, sigmaEff) * uKernelGain;
    float gS = gauss(offS, sigmaEff) * uKernelGain;

    float QQ = 1.0 + 0.5 * uKernelQ;
    float modL = pow(0.5 * (1.0 + cos(TAU * uKernelK0 * offL)), QQ);
    float modM = pow(0.5 * (1.0 + cos(TAU * uKernelK0 * offM)), QQ);
    float modS = pow(0.5 * (1.0 + cos(TAU * uKernelK0 * offS)), QQ);

    float chiPhase = TAU * uKernelK0 * dot(pos, tangent) * 0.002 + hueShift;
    float chBase = uKernelChirality;
    if (uKurEnabled == 1 && uCouplingKurChirality > 0.0) {
      float vortClamped = clamp(vortVal, -1.0, 1.0);
      float vortScaled = 0.5 * couplingScale * uCouplingKurChirality * uComposerWeight[COMPOSER_FIELD_KUR] * vortClamped;
      chBase = clamp(chBase + vortScaled, -3.0, 3.0);
    }

    float chiL = 0.5 + 0.5 * sin(chiPhase) * chBase;
    float chiM = 0.5 + 0.5 * sin(chiPhase + 0.8) * chBase;
    float chiS = 0.5 + 0.5 * sin(chiPhase + 1.6) * chBase;

    float cont = uContrast * uFrameGain;
    float Lc = pL * gL * modL * chiL * polL * cont;
    float Mc = pM * gM * modM * chiM * polM * cont;
    float Sc = pS * gS * modS * chiS * polS * cont;

    rimEnergy = (Lc + Mc + Sc) / max(1e-6, cont);

    vec3 rimRgb = vec3(
      clamp01(4.4679 * Lc - 3.5873 * Mc + 0.1193 * Sc),
      clamp01(-1.2186 * Lc + 2.3809 * Mc - 0.1624 * Sc),
      clamp01(0.0497 * Lc - 0.2439 * Mc + 1.2045 * Sc)
    );

    if (uDisplayMode == 2 || uDisplayMode == 3) {
      float yr = luma01(rimRgb);
      rimRgb = vec3(yr);
    }

    if (uDisplayMode == 4) {
      float rimSum = rimRgb.r + rimRgb.g + rimRgb.b;
      float baseSum = baseRgb.r + baseRgb.g + baseRgb.b;
      vec3 weights = vec3(1.0 / 3.0);
      if (baseSum > 1e-6) {
        weights = baseRgb / baseSum;
      }
      vec3 natural = clamp01(rimSum * weights);
      float hueBlend = 0.7;
      float baseBlend = 0.25;
      rimRgb = mix(rimRgb, natural, hueBlend);
      rimRgb = mix(rimRgb, baseRgb, baseBlend);
    }

    rimRgb *= uRimAlpha;
    rimRgb = applyComposerVec3(rimRgb, COMPOSER_FIELD_RIM);

    float pixelBlend = clamp(uEffectiveBlend * uComposerBlendGain.x, 0.0, 1.0);
    if (uKurEnabled == 1 && uCouplingKurTransparency > 0.0) {
      float kurMeasure = applyComposerScalar(0.5 * (cohVal + ampVal), COMPOSER_FIELD_KUR);
      float boost = clamp(
        1.0 +
          couplingScale *
            uCouplingKurTransparency *
            uComposerWeight[COMPOSER_FIELD_KUR] *
            (kurMeasure - 0.5) *
            1.5,
        0.1,
        2.5
      );
      pixelBlend = clamp(pixelBlend * boost, 0.0, 1.0);
    }
    pixelBlend = clamp(pixelBlend * uComposerWeight[COMPOSER_FIELD_RIM], 0.0, 1.0);

    resultRgb = mix(resultRgb, rimRgb, pixelBlend);
  }

  if (uSurfEnabled == 1) {
    float mask = 1.0;
    if (uSurfaceRegion == 0) {
      mask = clamp01(
        (uEdgeThreshold - magVal) / max(1e-6, uEdgeThreshold)
      );
    } else if (uSurfaceRegion == 1) {
      mask = clamp01(
        (magVal - uEdgeThreshold) / max(1e-6, 1.0 - uEdgeThreshold)
      );
    }
    if (mask > 1e-3) {
      vec2 surfFlow = combinedFlow;
      if (uCouplingRimSurfaceAlign > 0.0 && magVal >= uEdgeThreshold && edgeLen > 1e-8) {
        vec2 tangentN = tangent;
        float surfLen = length(surfFlow);
        if (surfLen > 1e-6) {
          float dotVal = dot(surfFlow, tangentN) / (surfLen + 1e-9);
          float alignment = responsePow(
            (dotVal + 1.0) * 0.5,
            uCouplingRimSurfaceAlign
          );
          float alignWeight =
            clamp(
              uCouplingRimSurfaceAlign *
                couplingScale *
                uComposerWeight[COMPOSER_FIELD_SURFACE] *
                alignment,
              0.0,
              1.0
            );
          vec2 target = tangentN * surfLen;
          surfFlow = mix(surfFlow, target, alignWeight);
        }
      }
      if (uKurEnabled == 1 && uCouplingKurOrientation > 0.0) {
        float kurNorm = length(kurGrad);
        float surfLen = length(surfFlow);
        if (kurNorm > 1e-6 && surfLen > 1e-6) {
          vec2 target = (kurGrad / kurNorm) * surfLen;
          float weight =
            clamp(uCouplingKurOrientation * couplingScale * uComposerWeight[COMPOSER_FIELD_KUR] * 0.75, 0.0, 1.0);
          surfFlow = mix(surfFlow, target, weight);
        }
      }
      float dirNorm = length(surfFlow) + 1e-6;
      float dirAngle = atan(surfFlow.y, surfFlow.x);
      float dirW = 1.0 + 0.5 * uKernelAniso * cos(2.0 * dirAngle);
      float amplitude = clamp(uWarpAmp * dirNorm * dirW, 0.0, 1.0);
      float phaseShift = dirAngle + uTime * 0.45;
      vec3 warped = vec3(
        clamp01(0.5 + 0.5 * sin(phaseShift)),
        clamp01(0.5 + 0.5 * sin(phaseShift + 2.094395102f)),
        clamp01(0.5 + 0.5 * sin(phaseShift + 4.188790204f))
      );
      warped *= amplitude;
      if (uDisplayMode == 2) {
        float yy = luma01(warped);
        warped = vec3(yy);
      }
      warped = applyComposerVec3(warped, COMPOSER_FIELD_SURFACE);
      float sb = uSurfaceBlend * mask * uComposerBlendGain.y;
      if (uCouplingRimSurfaceBlend > 0.0) {
        float energy = responseSoft(
          rimEnergy / (0.75 + 0.25 * uKernelGain),
          uCouplingRimSurfaceBlend
        );
        float rimBoost = clamp(
          1.0 + couplingScale * uCouplingRimSurfaceBlend * uComposerWeight[COMPOSER_FIELD_RIM] * energy,
          0.2,
          3.0
        );
        sb *= rimBoost;
      }
      if (uKurEnabled == 1 && uCouplingKurTransparency > 0.0) {
        float kurMeasure = applyComposerScalar(0.5 * (cohVal + ampVal), COMPOSER_FIELD_KUR);
        float boost = clamp(
          1.0 +
            couplingScale *
              uCouplingKurTransparency *
              uComposerWeight[COMPOSER_FIELD_KUR] *
              (kurMeasure - 0.5) *
              1.5,
          0.1,
          3.0
        );
        sb *= boost;
      }
      sb = clamp(sb * uComposerWeight[COMPOSER_FIELD_SURFACE], 0.0, 1.0);
      resultRgb = mix(resultRgb, warped, sb);
    }
  }

  fragColor = vec4(resultRgb, 1.0);
}
`,Qy=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);function Wm(e){const t=Zy(e,Yy,Xy),n=e.getAttribLocation(t,"aPosition"),r=e.createVertexArray(),o=e.createBuffer();if(!r||!o)throw new Error("Failed to allocate buffers for GPU renderer");e.bindVertexArray(r),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,Qy,e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.bindVertexArray(null);const a=qy(e,t),l=ns(e,{format:e.RGBA,internalFormat:e.RGBA8,type:e.UNSIGNED_BYTE}),s=ns(e,{format:e.RGBA,internalFormat:e.RGBA32F,type:e.FLOAT}),u=ns(e,{format:e.RGBA,internalFormat:e.RGBA32F,type:e.FLOAT}),c=ns(e,{format:e.RED,internalFormat:e.R32F,type:e.FLOAT}),y=ns(e,{format:e.RGBA,internalFormat:e.RGBA32F,type:e.FLOAT}),d={width:1,height:1,textures:{base:l,edge:s,kur:u,amp:c,volume:y}},w=new Float32Array(32),h=new Float32Array(8),M=new Float32Array(8);let k=null,P=null,p=null,f="empty",g=null,R="empty";return e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.disable(e.BLEND),e.clearColor(0,0,0,1),{resize(C,F){d.width=C,d.height=F,e.viewport(0,0,C,F),k=null,P=null,p=null,f="empty",g=null,R="empty"},uploadBase(C){Jy(e,d.textures.base.texture,C)},uploadRim(C){const F=d.width*d.height,I=F*4;if((!k||k.length!==I)&&(k=new Float32Array(I)),!C)k.fill(0);else{if(Gi(C,"gpu:rim"),C.resolution.width!==d.width||C.resolution.height!==d.height)throw new Error(`[gpuRenderer] rim field resolution ${C.resolution.width}x${C.resolution.height} mismatch renderer ${d.width}x${d.height}`);for(let j=0;j<F;j++)k[j*4+0]=C.gx[j],k[j*4+1]=C.gy[j],k[j*4+2]=C.mag[j],k[j*4+3]=0}rs(e,d.textures.edge.texture,k,d.width,d.height)},uploadPhase(C){const F=d.width*d.height,I=F*4;if((!P||P.length!==I)&&(P=new Float32Array(I),f="empty"),(!p||p.length!==F)&&(p=new Float32Array(F),f="empty"),!C){f!=="zeros"&&(P.fill(0),p.fill(0),rs(e,d.textures.kur.texture,P,d.width,d.height),Xm(e,d.textures.amp.texture,p,d.width,d.height),f="zeros");return}if(Bo(C,"gpu:phase"),C.resolution.width!==d.width||C.resolution.height!==d.height)throw new Error(`[gpuRenderer] phase field resolution ${C.resolution.width}x${C.resolution.height} mismatch renderer ${d.width}x${d.height}`);for(let j=0;j<F;j++)P[j*4+0]=C.gradX[j],P[j*4+1]=C.gradY[j],P[j*4+2]=C.vort[j],P[j*4+3]=C.coh[j],p[j]=C.amp[j];rs(e,d.textures.kur.texture,P,d.width,d.height),Xm(e,d.textures.amp.texture,p,d.width,d.height),f="data"},uploadVolume(C){const F=d.width*d.height,I=F*4;if((!g||g.length!==I)&&(g=new Float32Array(I),R="empty"),!C){R!=="zeros"&&(g.fill(0),rs(e,d.textures.volume.texture,g,d.width,d.height),R="zeros");return}if(fs(C,"gpu:volume"),C.resolution.width!==d.width||C.resolution.height!==d.height)throw new Error(`[gpuRenderer] volume field resolution ${C.resolution.width}x${C.resolution.height} mismatch renderer ${d.width}x${d.height}`);for(let j=0;j<F;j++)g[j*4+0]=C.phase[j],g[j*4+1]=C.depth[j],g[j*4+2]=C.intensity[j],g[j*4+3]=0;rs(e,d.textures.volume.texture,g,d.width,d.height),R="data"},render(C){e.useProgram(t),os(e,d.textures.base.texture,0,a.baseTex),os(e,d.textures.edge.texture,1,a.edgeTex),os(e,d.textures.kur.texture,2,a.kurTex),os(e,d.textures.amp.texture,3,a.kurAmpTex),os(e,d.textures.volume.texture,4,a.volumeTex),e.uniform2f(a.resolution,d.width,d.height),e.uniform1f(a.time,C.time),e.uniform1f(a.edgeThreshold,C.edgeThreshold),e.uniform1f(a.effectiveBlend,C.effectiveBlend),e.uniform1i(a.displayMode,C.displayMode),e.uniform3f(a.baseOffsets,C.baseOffsets[0],C.baseOffsets[1],C.baseOffsets[2]),e.uniform1f(a.sigma,C.sigma),e.uniform1f(a.jitter,C.jitter),e.uniform1f(a.jitterPhase,C.jitterPhase),e.uniform1f(a.breath,C.breath),e.uniform1f(a.muJ,C.muJ),e.uniform1i(a.phasePin,C.phasePin?1:0),e.uniform1i(a.microsaccade,C.microsaccade?1:0),e.uniform1i(a.polBins,C.polBins),e.uniform1i(a.thetaMode,C.thetaMode),e.uniform1f(a.thetaGlobal,C.thetaGlobal),e.uniform1f(a.contrast,C.contrast),e.uniform1f(a.frameGain,C.frameGain),e.uniform1i(a.rimEnabled,C.rimEnabled?1:0),e.uniform1f(a.rimAlpha,C.rimAlpha),e.uniform1f(a.warpAmp,C.warpAmp),e.uniform1f(a.surfaceBlend,C.surfaceBlend),e.uniform1i(a.surfaceRegion,C.surfaceRegion),e.uniform1i(a.surfEnabled,C.surfEnabled?1:0),e.uniform1i(a.kurEnabled,C.kurEnabled?1:0),e.uniform1i(a.volumeEnabled,C.volumeEnabled?1:0),e.uniform1i(a.useWallpaper,C.useWallpaper?1:0),e.uniform2f(a.canvasCenter,C.center[0],C.center[1]),e.uniform1f(a.kernelGain,C.kernel.gain),e.uniform1f(a.kernelK0,C.kernel.k0),e.uniform1f(a.kernelQ,C.kernel.Q),e.uniform1f(a.kernelAniso,C.kernel.anisotropy),e.uniform1f(a.kernelChirality,C.kernel.chirality),e.uniform1f(a.alive,C.alive?1:0),e.uniform1f(a.beta2,C.beta2),e.uniform1f(a.couplingRimSurfaceBlend,C.coupling.rimToSurfaceBlend),e.uniform1f(a.couplingRimSurfaceAlign,C.coupling.rimToSurfaceAlign),e.uniform1f(a.couplingSurfaceRimOffset,C.coupling.surfaceToRimOffset),e.uniform1f(a.couplingSurfaceRimSigma,C.coupling.surfaceToRimSigma),e.uniform1f(a.couplingSurfaceRimHue,C.coupling.surfaceToRimHue),e.uniform1f(a.couplingKurTransparency,C.coupling.kurToTransparency),e.uniform1f(a.couplingKurOrientation,C.coupling.kurToOrientation),e.uniform1f(a.couplingKurChirality,C.coupling.kurToChirality),e.uniform1f(a.couplingScale,C.couplingScale),e.uniform1f(a.couplingVolumePhaseHue,C.coupling.volumePhaseToHue),e.uniform1f(a.couplingVolumeDepthWarp,C.coupling.volumeDepthToWarp),e.uniform1fv(a.composerExposure,C.composerExposure),e.uniform1fv(a.composerGamma,C.composerGamma),e.uniform1fv(a.composerWeight,C.composerWeight),e.uniform2f(a.composerBlendGain,C.composerBlendGain[0],C.composerBlendGain[1]);const F=C.ops;e.uniform1i(a.opsCount,F.length);for(let I=0;I<8;I++){const j=I*4;if(I<F.length){const G=F[I];w[j+0]=G.kind,w[j+1]=G.angle,w[j+2]=G.tx,w[j+3]=G.ty}else w[j+0]=0,w[j+1]=0,w[j+2]=0,w[j+3]=0}e.uniform4fv(a.ops,w),e.uniform1i(a.orientCount,C.orientations.cos.length),h.fill(0),h.set(C.orientations.cos.subarray(0,Math.min(8,C.orientations.cos.length))),e.uniform1fv(a.orientCos,h),M.fill(0),M.set(C.orientations.sin.subarray(0,Math.min(8,C.orientations.sin.length))),e.uniform1fv(a.orientSin,M),e.viewport(0,0,d.width,d.height),e.bindVertexArray(r),e.drawArrays(e.TRIANGLES,0,6),e.bindVertexArray(null)},readPixels(C){if(C.length<d.width*d.height*4)throw new Error("readPixels target buffer too small");e.readPixels(0,0,d.width,d.height,e.RGBA,e.UNSIGNED_BYTE,C)},dispose(){e.deleteProgram(t),e.deleteVertexArray(r),e.deleteBuffer(o),e.deleteTexture(d.textures.base.texture),e.deleteTexture(d.textures.edge.texture),e.deleteTexture(d.textures.kur.texture),e.deleteTexture(d.textures.amp.texture),e.deleteTexture(d.textures.volume.texture)}}}function Zy(e,t,n){const r=Ym(e,e.VERTEX_SHADER,t),o=Ym(e,e.FRAGMENT_SHADER,n),a=e.createProgram();if(!a)throw new Error("Failed to create program");if(e.attachShader(a,r),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS)){const l=e.getProgramInfoLog(a);throw e.deleteProgram(a),new Error(`Program link failed: ${l??"unknown error"}`)}return e.detachShader(a,r),e.detachShader(a,o),e.deleteShader(r),e.deleteShader(o),a}function Ym(e,t,n){const r=e.createShader(t);if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const o=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error(`Shader compile failed: ${o??"unknown error"}`)}return r}function ns(e,t){const n=e.createTexture();if(!n)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),{texture:n,width:1,height:1}}function Jy(e,t,n){e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data),e.bindTexture(e.TEXTURE_2D,null)}function rs(e,t,n,r,o){e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,r,o,0,e.RGBA,e.FLOAT,n),e.bindTexture(e.TEXTURE_2D,null)}function Xm(e,t,n,r,o){e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,0,e.R32F,r,o,0,e.RED,e.FLOAT,n),e.bindTexture(e.TEXTURE_2D,null)}function os(e,t,n,r){e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(r,n)}function qy(e,t){return{baseTex:W(e,t,"uBaseTex"),edgeTex:W(e,t,"uEdgeTex"),kurTex:W(e,t,"uKurTex"),kurAmpTex:W(e,t,"uKurAmpTex"),volumeTex:W(e,t,"uVolumeTex"),resolution:W(e,t,"uResolution"),time:W(e,t,"uTime"),edgeThreshold:W(e,t,"uEdgeThreshold"),effectiveBlend:W(e,t,"uEffectiveBlend"),displayMode:W(e,t,"uDisplayMode"),baseOffsets:W(e,t,"uBaseOffsets"),sigma:W(e,t,"uSigma"),jitter:W(e,t,"uJitter"),jitterPhase:W(e,t,"uJitterPhase"),breath:W(e,t,"uBreath"),muJ:W(e,t,"uMuJ"),phasePin:W(e,t,"uPhasePin"),microsaccade:W(e,t,"uMicrosaccade"),polBins:W(e,t,"uPolBins"),thetaMode:W(e,t,"uThetaMode"),thetaGlobal:W(e,t,"uThetaGlobal"),contrast:W(e,t,"uContrast"),frameGain:W(e,t,"uFrameGain"),rimEnabled:W(e,t,"uRimEnabled"),rimAlpha:W(e,t,"uRimAlpha"),warpAmp:W(e,t,"uWarpAmp"),surfaceBlend:W(e,t,"uSurfaceBlend"),surfaceRegion:W(e,t,"uSurfaceRegion"),surfEnabled:W(e,t,"uSurfEnabled"),kurEnabled:W(e,t,"uKurEnabled"),volumeEnabled:W(e,t,"uVolumeEnabled"),useWallpaper:W(e,t,"uUseWallpaper"),opsCount:W(e,t,"uOpsCount"),ops:W(e,t,"uOps"),orientCount:W(e,t,"uOrientCount"),orientCos:W(e,t,"uOrientCos"),orientSin:W(e,t,"uOrientSin"),canvasCenter:W(e,t,"uCanvasCenter"),kernelGain:W(e,t,"uKernelGain"),kernelK0:W(e,t,"uKernelK0"),kernelQ:W(e,t,"uKernelQ"),kernelAniso:W(e,t,"uKernelAniso"),kernelChirality:W(e,t,"uKernelChirality"),alive:W(e,t,"uAlive"),beta2:W(e,t,"uBeta2"),couplingRimSurfaceBlend:W(e,t,"uCouplingRimSurfaceBlend"),couplingRimSurfaceAlign:W(e,t,"uCouplingRimSurfaceAlign"),couplingSurfaceRimOffset:W(e,t,"uCouplingSurfaceRimOffset"),couplingSurfaceRimSigma:W(e,t,"uCouplingSurfaceRimSigma"),couplingSurfaceRimHue:W(e,t,"uCouplingSurfaceRimHue"),couplingKurTransparency:W(e,t,"uCouplingKurTransparency"),couplingKurOrientation:W(e,t,"uCouplingKurOrientation"),couplingKurChirality:W(e,t,"uCouplingKurChirality"),couplingScale:W(e,t,"uCouplingScale"),couplingVolumePhaseHue:W(e,t,"uCouplingVolumePhaseHue"),couplingVolumeDepthWarp:W(e,t,"uCouplingVolumeDepthWarp"),composerExposure:W(e,t,"uComposerExposure"),composerGamma:W(e,t,"uComposerGamma"),composerWeight:W(e,t,"uComposerWeight"),composerBlendGain:W(e,t,"uComposerBlendGain")}}function W(e,t,n){const r=e.getUniformLocation(t,n);if(!r)throw new Error(`Uniform ${n} not found`);return r}const io=1e-6,wf=.9,ev=1/(1-wf),Qm={wallpapericityMean:0,wallpapericityStd:0,beatEnergyMean:0,beatEnergyStd:0,resonanceRate:0,sampleCount:0,dogMean:0,dogStd:0,orientationMean:0,orientationStd:0,divisiveMean:0,divisiveStd:0},tv=e=>{const{width:t,height:n}=e.resolution,r=t*n,o=new Float32Array(r),a=e.rgba;for(let l=0;l<r;l++){const s=l*4,u=a[s]/255,c=a[s+1]/255,y=a[s+2]/255;o[l]=.2126*u+.7152*c+.0722*y}return o},Zm=e=>{const t=Math.max(1,Math.floor(e*3)),n=t*2+1,r=new Float32Array(n);let o=0;const a=1/(2*e*e+io);for(let l=-t;l<=t;l++){const s=Math.exp(-(l*l)*a);r[l+t]=s,o+=s}if(o<=0)r.fill(1/n);else for(let l=0;l<n;l++)r[l]/=o;return r},Jm=(e,t,n,r)=>{const o=r.length-1>>1,a=new Float32Array(t*n),l=new Float32Array(t*n);for(let s=0;s<n;s++)for(let u=0;u<t;u++){let c=0;for(let y=-o;y<=o;y++){const d=Math.min(t-1,Math.max(0,u+y));c+=e[s*t+d]*r[y+o]}a[s*t+u]=c}for(let s=0;s<n;s++)for(let u=0;u<t;u++){let c=0;for(let y=-o;y<=o;y++){const d=Math.min(n-1,Math.max(0,s+y));c+=a[d*t+u]*r[y+o]}l[s*t+u]=c}return l},nv=(e,t,n,r,o=1.6)=>{const a=Zm(Math.max(r,io)),l=Zm(Math.max(r*o,io)),s=Jm(e,t,n,a),u=Jm(e,t,n,l),c=t*n,y=new Float32Array(c);for(let d=0;d<c;d++)y[d]=s[d]-u[d];return y},rv=(e,t,n)=>{const r=new Float32Array(t*n),o=new Float32Array(t*n),a=(u,c)=>c*t+u,l=[-1,0,1,-2,0,2,-1,0,1],s=[-1,-2,-1,0,0,0,1,2,1];for(let u=1;u<n-1;u++)for(let c=1;c<t-1;c++){let y=0,d=0,w=0;for(let M=-1;M<=1;M++)for(let k=-1;k<=1;k++){const P=e[a(c+k,u+M)];y+=P*l[w],d+=P*s[w],w++}const h=a(c,u);r[h]=y,o[h]=d}return{gx:r,gy:o}},as=(e,t,n)=>{if(n<=0)return{mean:0,std:0};const r=e/n,o=Math.max(0,t/n-r*r);return{mean:r,std:Math.sqrt(o)}},ov=(e,t)=>{if(!e)return{...Qm};const{width:n,height:r}=e.resolution,o=n*r;if(o===0)return{...Qm};const a=tv(e),{gx:l,gy:s}=rv(a,n,r),u=[.7,1.2,2.4],c=u.length,y=new Float32Array(o);for(let $=0;$<u.length;$++){const O=nv(a,n,r,u[$]);for(let ee=0;ee<o;ee++){const Z=Math.abs(O[ee]);y[ee]+=Z}}const d=t.orientations.length>0?t.orientations:[0],w=d.length,h=d.map($=>Math.cos($)),M=d.map($=>Math.sin($)),k=!!t.includeMaps,P=k?new Float32Array(o):void 0,p=k&&w>1?new Float32Array(o):void 0;let f=0,g=0,R=0,T=0,C=0,F=0,I=0,j=0,G=0,Se=0,ot=0;for(let $=0;$<o;$++){const O=y[$]/c;G+=O,Se+=O*O;const ee=l[$],Z=s[$],we=ee*ee+Z*Z,Ee=Math.sqrt(we),de=Ee>io?1/Ee:0;let Q=0,ce=0,ve=0;for(let qt=0;qt<w;qt++){let ze=0;if(de>0){const B=Math.abs(ee*h[qt]+Z*M[qt])*de;if(B>=wf){const xe=(B-wf)*ev,Vr=xe*xe,$t=B*B;ze=we*$t*Vr}}Q+=ze,ze>ce?(ve=ce,ce=ze):ze>ve&&(ve=ze)}Q<=io&&we>io&&(Q=we,we>ce?(ve=ce,ce=we):we>ve&&(ve=we)),C+=Q,F+=Q*Q;const te=Q/(Q+O+io);I+=te,j+=te*te,f+=te,g+=te*te,P&&(P[$]=te);let ge=0;if(w>1&&ce>io){const qt=ve/(ce+io);ge=qt*te,qt>.6&&te>.1&&ot++}R+=ge,T+=ge*ge,p&&(p[$]=ge)}const ye=as(f,g,o),Be=as(R,T,o),Ut=as(G,Se,o),Ie=as(C,F,o),Vt=as(I,j,o),N=o>0?ot/o:0;return{wallpapericityMean:ye.mean,wallpapericityStd:ye.std,beatEnergyMean:Be.mean,beatEnergyStd:Be.std,resonanceRate:N,sampleCount:o,dogMean:Ut.mean,dogStd:Ut.std,orientationMean:Ie.mean,orientationStd:Ie.std,divisiveMean:Vt.mean,divisiveStd:Vt.std,wallpapericityMap:P,beatEnvelopeMap:p}},al={g1:.6,k1:.35,q1:.5,a1:.7,c1:.6,t1:.5},tr=["surface","rim","kur","volume"],Lu=()=>({fields:{surface:{exposure:1,gamma:1,weight:1},rim:{exposure:1,gamma:1,weight:1},kur:{exposure:1,gamma:1,weight:1},volume:{exposure:1,gamma:1,weight:1}},dmtRouting:"auto",solverRegime:"balanced"}),E0=e=>{const t=e.dmtRouting,n=e.solverRegime,r=t==="rimBias"?1.1:t==="surfaceBias"?.9:1,o=t==="surfaceBias"?1.1:t==="rimBias"?.9:1,a=n==="rimLocked"?1.1:n==="surfaceLocked"?.9:1,l=n==="surfaceLocked"?1.1:n==="rimLocked"?.9:1;return[r*a,o*l]},yc=(e,t,n,r)=>Number.isFinite(e)?_e(e,t,n):r,av=e=>{const t=Lu(),n=e??t,r={fields:{surface:{...t.fields.surface},rim:{...t.fields.rim},kur:{...t.fields.kur},volume:{...t.fields.volume}},dmtRouting:n.dmtRouting??t.dmtRouting,solverRegime:n.solverRegime??t.solverRegime};return tr.forEach(o=>{var s;const a=(s=n.fields)==null?void 0:s[o],l=t.fields[o];r.fields[o]={exposure:yc((a==null?void 0:a.exposure)??l.exposure,0,8,l.exposure),gamma:yc((a==null?void 0:a.gamma)??l.gamma,.2,5,l.gamma),weight:yc((a==null?void 0:a.weight)??l.weight,0,2.5,l.weight)}}),r},_e=(e,t,n)=>Math.max(t,Math.min(n,e)),J=e=>_e(e,0,1),vc=(e,t)=>Math.exp(-(e*e)/(2*t*t+1e-9)),xc=(e,t,n)=>J(.2126*e+.7152*t+.0722*n),Vo=(e,t,n)=>e*(1-n)+t*n,R0=e=>{let t=e;const n=2*Math.PI;return t=t-Math.floor((t+Math.PI)/n)*n,t-Math.PI},Ti=(e,t)=>{const n=J(e),r=Vo(1.2,3.5,J(t));return 1-Math.pow(1-n,r)},Sc=(e,t)=>{const n=J(e),r=Vo(1.65,.55,J(t));return Math.pow(n,r)},qm=e=>Array.from({length:e},()=>({phaseCos:0,phaseSin:0,parallaxSum:0,count:0})),ep=(e,t)=>{if(!e)return null;const n=[],r=[];for(const f of e){if(f.count<=0)continue;const R=Math.hypot(f.phaseCos,f.phaseSin)>1e-9?Math.atan2(f.phaseSin,f.phaseCos):0,T=_e(f.parallaxSum/f.count,-1,1);n.push(R),r.push(T)}const o=n.length;if(o===0)return null;if(o===1){const f=r[0];return{branchCount:o,phaseShiftMean:0,phaseShiftStd:0,parallaxMean:f,parallaxStd:0,parallaxAbsMean:Math.abs(f),source:t}}let a=0,l=0;for(const f of n)a+=Math.cos(f),l+=Math.sin(f);a/=o,l/=o;const s=Math.atan2(l,a);let u=0,c=0;for(const f of n){const g=Math.abs(R0(f-s));u+=g,c+=g*g}const y=u/o,d=Math.max(0,c/o-y*y),w=Math.sqrt(d);let h=0,M=0;for(const f of r)h+=f,M+=Math.abs(f);h/=o;const k=M/o;let P=0;for(const f of r){const g=f-h;P+=g*g}const p=Math.sqrt(Math.max(0,P/o));return{branchCount:o,phaseShiftMean:y,phaseShiftStd:w,parallaxMean:h,parallaxStd:p,parallaxAbsMean:k,source:t}},lv=(e,t,n)=>{const r=J(.45+.4*n);if(r<=1e-6||t<=1e-6)return 1;const a=1/Math.max(1-e*e,.2)-1,l=1+r*t*a;return _e(l,1,1+r*3)},kf=(e,t)=>{const n=Math.sin(e*127.1+t*311.7)*43758.5453;return n-Math.floor(n)},T0=(e,t)=>({gain:e.gain*(1+al.g1*t),k0:e.k0*(1+al.k1*t),Q:e.Q*(1+al.q1*t),anisotropy:e.anisotropy+al.a1*t,chirality:e.chirality+al.c1*t,transparency:e.transparency+al.t1*t}),P0=e=>{const n=.3333333333333333,r=(c,y=0,d=0)=>({kind:"rot",angle:c,tx:y,ty:d}),o=(c=0,y=0)=>r(0,c,y),a=(c=0,y=0)=>({kind:"mirrorX",tx:c,ty:y}),l=(c=0,y=0)=>({kind:"mirrorY",tx:c,ty:y}),s=(c=0,y=0)=>({kind:"diag1",tx:c,ty:y}),u=(c=0,y=0)=>({kind:"diag2",tx:c,ty:y});switch(e){case"p1":return[o(),o(.5,0),o(0,.5),o(.5,.5)];case"p2":return[r(0),r(Math.PI),r(0,.5,.5),r(Math.PI,.5,.5)];case"pm":return[o(),a(),o(.5,0),a(.5,0)];case"pg":return[o(),a(.5,0),o(0,.5),a(.5,.5)];case"cm":return[o(),l(0,.5),a(.5,0),l(.5,.5)];case"pmm":return[r(0),r(Math.PI),a(),l()];case"pmg":return[r(0),a(),l(.5,0),r(Math.PI,.5,0)];case"pgg":return[r(0),r(Math.PI),a(.5,0),l(0,.5)];case"cmm":return[r(0),a(),l(),s(),u(),r(Math.PI,.5,.5)];case"p4":return[0,Math.PI/2,Math.PI,3*Math.PI/2].map(c=>r(c));case"p4m":return[r(0),r(Math.PI/2),r(Math.PI),r(3*Math.PI/2),a(),l(),s(),u()];case"p4g":return[r(0),r(Math.PI/2),r(Math.PI),r(3*Math.PI/2),a(.5,0),l(0,.5),s(.5,0),u(0,.5)];case"p3":return[0,2*Math.PI/3,4*Math.PI/3].map(c=>r(c));case"p3m1":return[r(0),r(2*Math.PI/3),r(4*Math.PI/3),a(),s(n,0),u(0,n)];case"p31m":return[r(0),r(2*Math.PI/3),r(4*Math.PI/3),l(),s(2*n,n),u(n,2*n)];case"p6":return Array.from({length:6},(c,y)=>r(y*Math.PI/3));case"p6m":return[...Array.from({length:6},(c,y)=>r(y*Math.PI/3)),a(),l()];default:return[r(0)]}},sv=e=>e.map(t=>{const n=t.tx??0,r=t.ty??0;switch(t.kind){case"rot":return{kind:0,angle:t.angle,tx:n,ty:r};case"mirrorX":return{kind:1,angle:0,tx:n,ty:r};case"mirrorY":return{kind:2,angle:0,tx:n,ty:r};case"diag1":return{kind:3,angle:0,tx:n,ty:r};case"diag2":return{kind:4,angle:0,tx:n,ty:r};default:return{kind:0,angle:0,tx:n,ty:r}}}),iv=(e,t,n,r,o)=>{const a=t-r,l=n-o;let s=a,u=l;switch(e.kind){case"rot":{const h=Math.cos(e.angle),M=Math.sin(e.angle);s=h*a-M*l,u=M*a+h*l;break}case"mirrorX":s=-a,u=l;break;case"mirrorY":s=a,u=-l;break;case"diag1":s=l,u=a;break;case"diag2":s=-l,u=-a;break}const c=r*2,y=o*2,d=(e.tx??0)*c,w=(e.ty??0)*y;return{x:r+s+d,y:o+u+w}},wc=(e,t,n,r,o)=>{const a=_e(t,0,r-1.001),l=_e(n,0,o-1.001),s=Math.floor(a),u=Math.floor(l),c=s+1,y=u+1,d=a-s,w=l-u,h=(R,T)=>T*r+R,M=e[h(s,u)],k=e[h(Math.min(c,r-1),u)],P=e[h(s,Math.min(y,o-1))],p=e[h(Math.min(c,r-1),Math.min(y,o-1))],f=M*(1-d)+k*d,g=P*(1-d)+p*d;return f*(1-w)+g*w},uv=(e,t,n,r,o,a,l)=>{const s=n.length,u=2*Math.PI;let c=0,y=0;for(let w=0;w<s;w++){const h=o.chirality*(w/Math.max(1,s))+(l?.2*Math.sin(u*.3*a+w):0),M=e*n[w]+t*r[w],k=u*o.k0*M+h,P=-u*o.k0*Math.sin(k);c+=P*n[w],y+=P*r[w]}const d=s>0?1/s:1;return{gx:c*d,gy:y*d}},er=(e,t,n)=>{if(n<=0)return{mean:0,std:0};const r=e/n,o=_e(t/n-r*r,0,1/0);return{mean:r,std:Math.sqrt(o)}},kc=2*Math.PI,cv=12,fv=4,Cc=32,tp=e=>{const{width:t,height:n,timeSeconds:r,out:o,surface:a,rim:l,phase:s,volume:u,kernel:c,dmt:y,blend:d,normPin:w,normTarget:h,lastObs:M,lambdaRef:k,lambdas:P,beta2:p,microsaccade:f,alive:g,phasePin:R,edgeThreshold:T,wallpaperGroup:C,surfEnabled:F,orientationAngles:I,thetaMode:j,thetaGlobal:G,polBins:Se,jitter:ot,coupling:ye,sigma:Be,contrast:Ut,rimAlpha:Ie,rimEnabled:Vt,displayMode:N,surfaceBlend:$,surfaceRegion:O,warpAmp:ee,kurEnabled:Z,debug:we,composer:Ee}=e,de=(we==null?void 0:we.rim)??null,Q=(we==null?void 0:we.surface)??null;de&&(de.energyHist.fill(0),de.hueHist.fill(0)),Q&&Q.magnitudeHist.fill(0);const ce=Bs(c),ve=av(Ee),te=ve.fields,ge=D=>({energy:0,share:0,weight:te[D].weight,blend:0}),qt=e.couplingBase?{...e.couplingBase}:{...ye},ze={fields:{surface:ge("surface"),rim:ge("rim"),kur:ge("kur"),volume:ge("volume")},dmtRouting:ve.dmtRouting,solverRegime:ve.solverRegime,coupling:{base:qt,effective:{...ye},scale:1}},B={rim:{mean:0,max:0,std:0,count:0},warp:{mean:0,std:0,dominantAngle:0,count:0},gradient:{gradMean:0,gradStd:0,vortMean:0,vortStd:0,cohMean:0,cohStd:0,sampleCount:0},compositor:{effectiveBlend:0,surfaceMean:0,surfaceMax:0,surfaceCount:0},volume:{phaseMean:0,phaseStd:0,depthMean:0,depthStd:0,depthGradMean:0,depthGradStd:0,intensityMean:0,intensityStd:0,sampleCount:0},parallax:{radialSlope:0,eccentricityMean:0,kMean:0,kStd:0,tagConsistency:0,sampleCount:0},motionEnergy:{branchCount:0,phaseShiftMean:0,phaseShiftStd:0,parallaxMean:0,parallaxStd:0,parallaxAbsMean:0,source:"none"},composer:ze,kuramoto:{orderParameter:{magnitude:0,phase:0,real:0,imag:0,sampleCount:0},interference:{mean:0,variance:0,max:0},frameId:-1,timestamp:0,dt:0,kernelVersion:0,kernel:Ur(ce)},texture:{wallpapericity:0,wallpaperStd:0,beatEnergy:0,beatStd:0,resonanceRate:0,sampleCount:0,earlyVision:{wallpapericity:0,wallpaperStd:0,beatEnergy:0,beatStd:0,resonanceRate:0,sampleCount:0,dogMean:0,dogStd:0,orientationMean:0,orientationStd:0,divisiveMean:0,divisiveStd:0},crystallizer:{wallpapericity:0,wallpaperStd:0,beatEnergy:0,beatStd:0,resonanceRate:0,sampleCount:0}}};if(e.kurTelemetry){const D=e.kurTelemetry;B.kuramoto.orderParameter.magnitude=D.orderParameter.magnitude,B.kuramoto.orderParameter.phase=D.orderParameter.phase,B.kuramoto.orderParameter.real=D.orderParameter.real,B.kuramoto.orderParameter.imag=D.orderParameter.imag,B.kuramoto.orderParameter.sampleCount=D.orderParameter.sampleCount,B.kuramoto.interference.mean=D.interference.mean,B.kuramoto.interference.variance=D.interference.variance,B.kuramoto.interference.max=D.interference.max,B.kuramoto.frameId=D.frameId,B.kuramoto.timestamp=D.timestamp,B.kuramoto.dt=D.dt,B.kuramoto.kernelVersion=D.kernelVersion,B.kuramoto.kernel=Ur(D.kernel)}const[xe,Vr]=E0(ve),$t=(D,Y)=>{const X=J(D*Y.exposure),K=Math.pow(X,Y.gamma);return J(K)},We=(D,Y)=>J(Math.pow(J(D*Y.exposure),Y.gamma)),sa=(D,Y)=>[We(D[0],Y),We(D[1],Y),We(D[2],Y)],Xe={surface:0,rim:0,kur:0,volume:0},Kn={surface:0,rim:0,kur:0,volume:0},pt={surface:0,rim:0,kur:0,volume:0},ia=(a==null?void 0:a.rgba)??null,Rr=l??null,Ct=s??null,Lt=u??null,$r=(Lt==null?void 0:Lt.phase)??null,Mt=(Lt==null?void 0:Lt.depth)??null,Hr=(Lt==null?void 0:Lt.intensity)??null,{rimToSurfaceBlend:ht,rimToSurfaceAlign:vo,surfaceToRimOffset:xn,surfaceToRimSigma:Ba,surfaceToRimHue:Kr,kurToTransparency:xo,kurToOrientation:cr,kurToChirality:Ws,volumePhaseToHue:Gr,volumeDepthToWarp:Dl}=ye;let Wr=null,Ys=0,Yr=0,Xs=0,Xr=0,Qs=0,Qr=0,Zs=0,gt=0,Tr=0;if($r&&Mt&&Hr){Wr=new Float32Array(t*n);for(let D=0;D<n;D++){const Y=D>0?D-1:D,X=D+1<n?D+1:D;for(let K=0;K<t;K++){const Re=K>0?K-1:K,yt=K+1<t?K+1:K,Ue=D*t+K,at=D*t+Re,jt=D*t+yt,Rt=Y*t+K,mn=X*t+K,vt=$r[Ue],Qe=Mt[Ue],Tt=Hr[Ue];Ys+=vt,Yr+=vt*vt,Xs+=Qe,Xr+=Qe*Qe,Qs+=Tt,Qr+=Tt*Tt;const Qa=(Mt[jt]-Mt[at])*.5,Qn=(Mt[mn]-Mt[Rt])*.5,xt=Math.hypot(Qa,Qn);Wr[Ue]=xt,Zs+=xt,gt+=xt*xt,Tr++}}}const Gn=$r!=null&&Gr>1e-4,fr=Wr!=null&&Dl>1e-4,jl=ht>1e-4||vo>1e-4,Js=xn>1e-4||Ba>1e-4||Kr>1e-4,ua=Z&&xo>1e-4,Sn=Z&&cr>1e-4,za=Z&&Ws>1e-4,be=1+.65*y;ze.coupling.scale=be,ze.coupling.effective={rimToSurfaceBlend:ye.rimToSurfaceBlend*be,rimToSurfaceAlign:ye.rimToSurfaceAlign*be,surfaceToRimOffset:ye.surfaceToRimOffset*be,surfaceToRimSigma:ye.surfaceToRimSigma*be,surfaceToRimHue:ye.surfaceToRimHue*be,kurToTransparency:ye.kurToTransparency*be,kurToOrientation:ye.kurToOrientation*be,kurToChirality:ye.kurToChirality*be,volumePhaseToHue:ye.volumePhaseToHue*be,volumeDepthToWarp:ye.volumeDepthToWarp*be};const Nu=Math.max(.25,Be*.25);if(!!!(ia&&Rr)){for(let D=0;D<n;D++)for(let Y=0;Y<t;Y++){const X=(D*t+Y)*4,K=Math.sin(Y/t*Math.PI*6+r),Re=Math.sin(D/n*Math.PI*6-r*.7),yt=J(.5+.5*K*Re);o[X+0]=Math.floor(yt*255),o[X+1]=Math.floor((.4+.6*yt)*180),o[X+2]=Math.floor((1-yt)*255),o[X+3]=255}return{metrics:B,obsAverage:null}}const{gx:So,gy:dr,mag:wo}=Rr,me=ia,ca=(Ct==null?void 0:Ct.gradX)??null,Wn=(Ct==null?void 0:Ct.gradY)??null,Ua=(Ct==null?void 0:Ct.vort)??null,Pr=(Ct==null?void 0:Ct.coh)??null,ko=(Ct==null?void 0:Ct.amp)??null,Ne=Bs(T0(ce,y)),fa=J(d+Ne.transparency*.5),Co=1e-6,Ol=w?Math.pow((h+Co)/(M+Co),.5):1;B.compositor.effectiveBlend=fa;const da={L:p*(k/P.L-1),M:p*(k/P.M-1),S:p*(k/P.S-1)},Va=f?r*6:0,Fr=g?.15*Math.sin(2*Math.PI*.55*r):0,$a=C==="off"?[]:P0(C),bn=$a.length,Du=F||Js,_r=t*.5,ma=n*.5,Et=I.map(D=>Math.cos(D)),Ha=I.map(D=>Math.sin(D)),Ht=Et.length,Ka=Ht>0?new Float32Array(Ht):null,Yn=bn>0?new Float32Array(bn):null;let pa=0,ha=0,Bl=0,Mo=0,qs=0,en=0;const tn=ov(a,{orientations:I});B.texture.earlyVision={wallpapericity:tn.wallpapericityMean,wallpaperStd:tn.wallpapericityStd,beatEnergy:tn.beatEnergyMean,beatStd:tn.beatEnergyStd,resonanceRate:tn.resonanceRate,sampleCount:tn.sampleCount,dogMean:tn.dogMean,dogStd:tn.dogStd,orientationMean:tn.orientationMean,orientationStd:tn.orientationStd,divisiveMean:tn.divisiveMean,divisiveStd:tn.divisiveStd};const Ir=Math.min(tn.beatEnergyMean*cv,1),zl=Math.hypot(_r,ma)||1,Eo=Ht>1?qm(Ht):null,mr=bn>1?qm(bn):null;let Ro=0,wn=0,To=0,Ga=0,Nt=0,Wa=0,An=0;const Ya=(D,Y)=>{if(!D||Y<=0)return;let X=0,K=0,Re=0;for(let jt=0;jt<Y;jt++){const Rt=D[jt];X+=Rt,Rt>K?(Re=K,K=Rt):Rt>Re&&(Re=Rt)}const yt=Y>0?X/Y:0,Ue=K>Co?Re/(K+Co):0,at=Ue*yt*Ir;pa+=yt,ha+=yt*yt,Bl+=at,Mo+=at*at,Ir>0&&Ue>.6&&yt>.1&&qs++,en++};if(ca&&Wn){let D=0,Y=0,X=0,K=0,Re=0,yt=0;const Ue=ca.length;for(let at=0;at<Ue;at++){const jt=Math.hypot(ca[at],Wn[at]);D+=jt,Y+=jt*jt;const Rt=Ua?Ua[at]:0;X+=Rt,K+=Rt*Rt;const mn=Pr?Pr[at]:0;Re+=mn,yt+=mn*mn}B.gradient.gradMean=D/Ue,B.gradient.gradStd=er(D,Y,Ue).std,B.gradient.vortMean=X/Ue,B.gradient.vortStd=er(X,K,Ue).std,B.gradient.cohMean=Re/Ue,B.gradient.cohStd=er(Re,yt,Ue).std,B.gradient.sampleCount=Ue}let kn=0,ga=0;if(R&&f){for(let Y=0;Y<n;Y+=8)for(let X=0;X<t;X+=8){const K=Y*t+X;wo[K]>=T&&(kn+=Math.sin(Va+kf(X,Y)*Math.PI*2),ga++)}kn=ga?kn/ga:0}let ya=0,va=0,Po=0,xa=0,fn=0,Ul=0,Vl=0,Fo=0,Sa=0,Xa=0,ei=0,ti=0,dn=0,Zr=0,Cn=Number.POSITIVE_INFINITY,_o=0,Jr=Number.POSITIVE_INFINITY,Dt=0,Xn=0;for(let D=0;D<n;D++)for(let Y=0;Y<t;Y++){const X=D*t+Y,K=X*4,Re=Y-_r,yt=D-ma,Ue=Math.hypot(Re,yt),at=zl>0?Ue/zl:0,jt=Ue>1e-6?Re/Ue:0,Rt=Ue>1e-6?yt/Ue:0;if(o[K+0]=me[K+0],o[K+1]=me[K+1],o[K+2]=me[K+2],o[K+3]=255,N==="grayBaseColorRims"||N==="grayBaseGrayRims"){const pe=Math.floor(.2126*o[K+0]+.7152*o[K+1]+.0722*o[K+2]);o[K+0]=pe,o[K+1]=pe,o[K+2]=pe}let mn=0,vt=0;Z&&ca&&Wn&&(mn=ca[X],vt=Wn[X]);let Qe=0,Tt=0;const Qa=Q?Math.min(Q.orientationCount,Ht):0;if(Ht>0){const pe=.015+.004*Ht,ie=r*.6+y*.3;for(let re=0;re<Ht;re++){const Ve=((Y-_r)*Et[re]+(D-ma)*Ha[re])*pe+ie+re*.35,$e=.5+.5*Math.sin(Ve+p*.25),jn=(Ve%kc+kc)%kc;if(Eo){const he=Eo[re],Te=Et[re]*$e,nn=Ha[re]*$e,pn=Math.hypot(Te,nn);if(pn>1e-6){const De=1/pn;he.phaseCos+=Te*De,he.phaseSin+=nn*De;const On=_e((Te*jt+nn*Rt)*De,-1,1);he.parallaxSum+=On,he.count+=1}}if(Qe+=Et[re]*$e,Tt+=Ha[re]*$e,Ka&&(Ka[re]=J($e)),Q&&re<Qa){Q.phases[re][X]=jn,Q.magnitudes[re][X]=$e;const he=re*Cc,Te=Math.min(Cc-1,Math.floor(_e($e,0,.999999)*Cc));Q.magnitudeHist[he+Te]+=1,$e>Xn&&(Xn=$e)}}const Ce=1/Math.max(Ht,1);Qe*=Ce,Tt*=Ce,Ka&&Ya(Ka,Ht)}else if(Du){for(let ie=0;ie<bn;ie++){const Ce=iv($a[ie],Y,D,_r,ma),re=uv(Ce.x-_r,Ce.y-ma,Et,Ha,Ne,r,g);if(mr){const ut=mr[ie],Ve=re.gx,$e=re.gy,jn=Math.hypot(Ve,$e);if(jn>1e-6){const he=1/jn;ut.phaseCos+=Ve*he,ut.phaseSin+=$e*he;const Te=_e((Ve*jt+$e*Rt)*he,-1,1);ut.parallaxSum+=Te,ut.count+=1}}if(Qe+=re.gx,Tt+=re.gy,Yn){const ut=Math.hypot(re.gx,re.gy),Ve=Math.min(ut/(1+.75*Ne.k0),1);Yn[ie]=Ve}}const pe=bn>0?1/bn:1;Qe*=pe,Tt*=pe,Yn&&Ya(Yn,bn)}if(fr&&Wr){const pe=Wr[X],ie=Math.min(pe/(.18+.12*Ne.k0+1e-6),1),Ce=Ti(ie,Dl),re=$t(Ce,te.volume);Xe.volume+=re,Kn.volume+=re,pt.volume+=1;const ut=1+be*Dl*re*te.volume.weight;Qe*=ut,Tt*=ut}let Qn=mn+Qe,xt=vt+Tt,Ze=Math.hypot(Qn,xt),gr=1;if(Ze>1e-6){const pe=Math.max(.12+.85*Ne.k0,.001),ie=Math.min(Ze/pe,1),Ce=lv(at,ie,Ne.transparency);if(Qn*=Ce,xt*=Ce,Ze=Math.hypot(Qn,xt),Ze>1e-6){const re=_e((Qn*jt+xt*Rt)/Ze,-1,1),ut=Math.min(Ze/pe,1),Ve=Math.abs(re)*ut;gr=_e(1+(Ce-1)*Ve,.4,2.8),Ro+=at,wn+=at*at,To+=Ze,Ga+=Ze*Ze,Nt+=at*Ze,Wa+=Math.abs(re),An++}}const Ar=Qn,ri=xt,Gt=Ze;Gt>0&&(Vl+=Gt,Fo+=Gt*Gt,Xa+=Ar/Gt,ei+=ri/Gt,Sa++);const no=wo[X];let Wt=0;if(Vt&&no>=T){let pe=So[X],ie=dr[X];const Ce=Math.hypot(pe,ie)+1e-8;pe/=Ce,ie/=Ce;const re=-ie,ut=pe,Ve=Math.PI*2,$e=Math.atan2(ie,pe);let he=j==="gradient"?Se>0?Math.round($e/Ve*Se)*(Ve/Se):$e:G;if(Sn){const Pe=Math.hypot(mn,vt);if(Pe>1e-6){const je=Math.cos(he),Ae=Math.sin(he),Yt=mn/Pe,lt=vt/Pe,qn=J(cr*be*te.kur.weight),No=Vo(je,Yt,qn),i=Vo(Ae,lt,qn);he=Math.atan2(i,No),Se>0&&(he=Math.round(he/Ve*Se)*(Ve/Se))}}const Te=Ne.anisotropy*.9,nn=Ne.chirality*.75,pn=he+nn*r,De=.5*(1+Math.cos(Te)*Math.cos(2*pn)),On=.5*(1+Math.cos(Te)*Math.cos(2*(pn+.3))),Pt=.5*(1+Math.cos(Te)*Math.cos(2*(pn+.6))),ct=Math.sin(Va+kf(Y,D)*Math.PI*2),St=ot*(f?R?ct-kn:ct:0),ft=Math.hypot(Qe,Tt);let Zn=0;if(xn>1e-4&&ft>1e-6){const Pe=(Qe*pe+Tt*ie)/(ft+1e-9),je=Ti(ft/(1.05+.55*Ne.k0),xn),Ae=_e(Pe,-1,1)*je;Zn=_e(.65*be*xn*te.surface.weight*Ae,-.9,.9)}let Jn=Be;if(Ba>1e-4&&ft>1e-6){const Pe=Sc(ft/(1.15+.6*Ne.k0),Ba),je=J(.75*be*Ba*te.surface.weight*Pe),Ae=Math.min(Be,Nu);Jn=_e(Be*(1-je),Ae,Be)}const Lr=da.L+St*.35+Zn,ro=da.M+St*.5+Zn,Je=da.S+St*.8+Zn;let bo=0;if(Gn&&$r){const Pe=$r[X],je=_e(Pe/Math.PI,-1,1),Ae=$t(Math.abs(je),te.volume),Yt=je<0?-Ae:Ae,lt=_e(be*Gr*te.volume.weight*Yt*.6,-1.5,1.5);bo+=lt,Xe.volume+=Math.abs(Yt),Kn.volume+=Math.abs(Yt),pt.volume+=1}if(Kr>1e-4&&ft>1e-6){const Pe=Math.atan2(Tt,Qe),je=Math.atan2(ut,re),Ae=R0(Pe-je),Yt=Ti(Math.min(Math.abs(Ae)/Math.PI,1),Kr),lt=Sc(ft/(1.1+.6*Ne.k0),Kr),qn=$t(J(Yt*lt),te.surface),No=(Ae===0?0:Math.sign(Ae))*qn;bo=_e(be*Kr*te.surface.weight*No*.9,-1.4,1.4)}const oo=wc(wo,Y+(Lr+Fr)*pe,D+(Lr+Fr)*ie,t,n),ka=wc(wo,Y+(ro+Fr)*pe,D+(ro+Fr)*ie,t,n),Ca=wc(wo,Y+(Je+Fr)*pe,D+(Je+Fr)*ie,t,n),oi=vc(Lr,Jn)*Ne.gain,$l=vc(ro,Jn)*Ne.gain,Ma=vc(Je,Jn)*Ne.gain,ao=1+.5*Ne.Q,ju=Math.pow(.5*(1+Math.cos(2*Math.PI*Ne.k0*Lr)),ao),Ou=Math.pow(.5*(1+Math.cos(2*Math.PI*Ne.k0*ro)),ao),Hl=Math.pow(.5*(1+Math.cos(2*Math.PI*Ne.k0*Je)),ao),rn=2*Math.PI*Ne.k0*(Y*re+D*ut)*.002+bo;let Nr=Ne.chirality;if(za&&Ua){const Pe=_e(Ua[X],-1,1),je=.5*be*Ws*te.kur.weight*Pe;Nr=_e(Nr+je,-3,3)}const Ao=.5+.5*Math.sin(rn)*Nr,Kl=.5+.5*Math.sin(rn+.8)*Nr,Bu=.5+.5*Math.sin(rn+1.6)*Nr,Za=Ut*Ol,Lo=oo*oi*ju*Ao*De*Za,Ja=ka*$l*Ou*Kl*On*Za,qa=Ca*Ma*Hl*Bu*Pt*Za;Wt=(Lo+Ja+qa)/Math.max(1e-6,Za);let on=4.4679*Lo+-3.5873*Ja+.1193*qa,wt=-1.2186*Lo+2.3809*Ja+-.1624*qa,Ft=.0497*Lo+-.2439*Ja+1.2045*qa;if(on=J(on),wt=J(wt),Ft=J(Ft),N==="grayBaseGrayRims"||N==="colorBaseGrayRims"){const Pe=xc(on,wt,Ft);on=Pe,wt=Pe,Ft=Pe}else if(N==="colorBaseBlendedRims"){const Pe=J(me[K+0]/255),je=J(me[K+1]/255),Ae=J(me[K+2]/255),Yt=on+wt+Ft,lt=Pe+je+Ae,qn=lt>1e-6?1/lt:1/3,No=lt>1e-6?Pe*qn:1/3,i=lt>1e-6?je*qn:1/3,m=lt>1e-6?Ae*qn:1/3,x=J(Yt*No),E=J(Yt*i),b=J(Yt*m),L=.7,_=.25;on=J(on*(1-L)+x*L),wt=J(wt*(1-L)+E*L),Ft=J(Ft*(1-L)+b*L),on=J(on*(1-_)+Pe*_),wt=J(wt*(1-_)+je*_),Ft=J(Ft*(1-_)+Ae*_)}on*=Ie,wt*=Ie,Ft*=Ie;const el=sa([on,wt,Ft],te.rim);if(on=el[0],wt=el[1],Ft=el[2],de){const Pe=_e(Wt/fv,0,.999999),je=Math.min(de.energyHist.length-1,Math.floor(Pe*de.energyHist.length));de.energy[X]=Wt,de.energyHist[je]+=1;const Ae=Math.sqrt(3)*(wt-Ft),Yt=2*on-wt-Ft+1e-9;let lt=Math.atan2(Ae,Yt)/Ve;lt<0&&(lt+=1),de.hue[X]=lt;const qn=Math.min(de.hueHist.length-1,Math.floor(lt*de.hueHist.length));de.hueHist[qn]+=1,Wt<Cn&&(Cn=Wt),Wt>_o&&(_o=Wt),lt<Jr&&(Jr=lt),lt>Dt&&(Dt=lt)}let an=J(fa*xe);if(an=J(an*gr),ua&&Pr){const Pe=J(Pr[X]),je=ko?J(ko[X]):Pe;let Ae=.5*(Pe+je);Ae=$t(Ae,te.kur);const Yt=_e(1+be*xo*te.kur.weight*(Ae-.5)*1.5,.1,2.5);an=J(an*Yt),Xe.kur+=Ae,Kn.kur+=Ae,pt.kur+=1}an=J(an*te.rim.weight),o[K+0]=Math.floor(o[K+0]*(1-an)+on*255*an),o[K+1]=Math.floor(o[K+1]*(1-an)+wt*255*an),o[K+2]=Math.floor(o[K+2]*(1-an)+Ft*255*an),Xe.rim+=Wt*an,Kn.rim+=an,pt.rim+=1,Po+=Wt,xa+=Wt*Wt,fn++,Wt>Ul&&(Ul=Wt),!(Y&7)&&!(D&7)&&(ya+=(oo+ka+Ca)/3,va++)}else de&&(de.energy[X]=0,de.hue[X]=0);if(F){let pe=1;if(O==="surfaces"?pe=J((T-no)/Math.max(1e-6,T)):O==="edges"&&(pe=J((no-T)/Math.max(1e-6,1-T))),pe>.001){let ie=Ar,Ce=ri;if(jl&&no>=T){const Pt=Math.hypot(So[X],dr[X])+1e-8,ct=-dr[X]/Pt,St=So[X]/Pt,ft=Math.hypot(ie,Ce);if(ft>1e-6){const Zn=(ie*ct+Ce*St)/(ft+1e-9),Jn=Sc((Zn+1)*.5,vo),Lr=J(vo*be*te.surface.weight*Jn),ro=ct*ft,Je=St*ft;ie=Vo(ie,ro,Lr),Ce=Vo(Ce,Je,Lr)}}if(Sn){const Pt=Math.hypot(mn,vt);if(Pt>1e-6){const ct=Math.hypot(ie,Ce);if(ct>1e-6){const St=mn/Pt*ct,ft=vt/Pt*ct,Zn=J(cr*be*te.kur.weight*.75);ie=Vo(ie,St,Zn),Ce=Vo(Ce,ft,Zn)}}}const re=Math.hypot(ie,Ce)+1e-6,ut=Math.atan2(Ce,ie),Ve=1+.5*Ne.anisotropy*Math.cos(2*ut),$e=J(ee*re*Ve),jn=ut+r*.45;let he=J(.5+.5*Math.sin(jn)),Te=J(.5+.5*Math.sin(jn+2*Math.PI/3)),nn=J(.5+.5*Math.sin(jn+4*Math.PI/3));if(he*=$e,Te*=$e,nn*=$e,N==="grayBaseGrayRims"){const Pt=xc(he,Te,nn);he=Pt,Te=Pt,nn=Pt}const pn=sa([he,Te,nn],te.surface);he=pn[0],Te=pn[1],nn=pn[2];let De=$*pe*Vr;if(De*=gr,jl){const Pt=Ti(Wt/(.75+.25*Ne.gain),ht),ct=_e(1+be*ht*te.rim.weight*Pt,.2,3);De*=ct}if(ua&&Pr){const Pt=J(Pr[X]),ct=ko?J(ko[X]):Pt;let St=.5*(Pt+ct);St=$t(St,te.kur);const ft=_e(1+be*xo*te.kur.weight*(St-.5)*1.5,.1,3);De*=ft,Xe.kur+=St,Kn.kur+=St,pt.kur+=1}De=J(De*te.surface.weight),o[K+0]=Math.floor(o[K+0]*(1-De)+he*255*De),o[K+1]=Math.floor(o[K+1]*(1-De)+Te*255*De),o[K+2]=Math.floor(o[K+2]*(1-De)+nn*255*De);const On=xc(he,Te,nn);Xe.surface+=On*De,Kn.surface+=De,pt.surface+=1,ti+=De,De>dn&&(dn=De),Zr++}}}const it=er(pa,ha,en),pr=er(Bl,Mo,en),wa=en>0?qs/en:0;B.texture.crystallizer={wallpapericity:it.mean,wallpaperStd:it.std,beatEnergy:pr.mean,beatStd:pr.std,resonanceRate:wa,sampleCount:en};const br=B.texture.earlyVision;B.texture.wallpapericity=en>0?.5*(br.wallpapericity+it.mean):br.wallpapericity,B.texture.wallpaperStd=Math.max(br.wallpaperStd,it.std),B.texture.beatEnergy=Math.max(br.beatEnergy,pr.mean),B.texture.beatStd=Math.max(br.beatStd,pr.std),B.texture.resonanceRate=Math.max(br.resonanceRate,wa),B.texture.sampleCount=Math.max(br.sampleCount,en);const ke=er(Po,xa,fn);B.rim={mean:ke.mean,std:ke.std,max:Ul,count:fn};const ni=er(Vl,Fo,Sa),Ln=Sa>0?Math.atan2(ei,Xa):0;B.warp={mean:ni.mean,std:ni.std,dominantAngle:Ln,count:Sa};const Mn=er(To,Ga,An);let En=0;if(An>1){const D=An*wn-Ro*Ro;Math.abs(D)>1e-9&&(En=(An*Nt-Ro*To)/D)}const Nn=An>0?Ro/An:0,Dn=An>0?Wa/An:0;B.parallax={radialSlope:En,eccentricityMean:Nn,kMean:Mn.mean,kStd:Mn.std,tagConsistency:Dn,sampleCount:An};const qr=ep(Eo,"orientation"),Io=ep(mr,"wallpaper");if(B.motionEnergy=qr??Io??B.motionEnergy,B.compositor.surfaceMean=Zr?ti/Zr:0,B.compositor.surfaceMax=dn,B.compositor.surfaceCount=Zr,Tr>0){const D=er(Ys,Yr,Tr),Y=er(Xs,Xr,Tr),X=er(Qs,Qr,Tr),K=er(Zs,gt,Tr);B.volume.phaseMean=D.mean,B.volume.phaseStd=D.std,B.volume.depthMean=Y.mean,B.volume.depthStd=Y.std,B.volume.intensityMean=X.mean,B.volume.intensityStd=X.std,B.volume.depthGradMean=K.mean,B.volume.depthGradStd=K.std,B.volume.sampleCount=Tr}else B.volume.phaseMean=0,B.volume.phaseStd=0,B.volume.depthMean=0,B.volume.depthStd=0,B.volume.depthGradMean=0,B.volume.depthGradStd=0,B.volume.intensityMean=0,B.volume.intensityStd=0,B.volume.sampleCount=0;const Kt=Xe.surface+Xe.rim+Xe.kur+Xe.volume,hr=B.composer.fields;tr.forEach(D=>{const Y=pt[D],X=Xe[D];hr[D].energy=Y>0?X/Y:0,hr[D].blend=Y>0?Kn[D]/Y:0,hr[D].share=Kt>1e-6?X/Kt:0}),B.compositor.effectiveBlend=J(fa*xe*te.rim.weight);const eo=va>0?_e(ya/va,.001,10):_e(M,.001,10);let to;if(de||Q){if(to={},de){const D=Number.isFinite(Cn)?Cn:0,Y=_o,X=Number.isFinite(Jr)?Jr:0,K=Dt;to.rim={energyMin:D,energyMax:Y,hueMin:X,hueMax:K}}Q&&(to.surface={magnitudeMax:Xn,orientationCount:Q.orientationCount})}return{metrics:B,obsAverage:eo,debug:to}},Mc=()=>typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),dv=1e-6,mv=(e,t)=>{const n=[];return Object.keys(e).forEach(r=>{Math.abs(e[r]-t[r])>dv&&n.push(r)}),n},Pi=e=>({spec:Ur(e.spec),version:e.version,timestamp:e.timestamp,source:e.source,changed:[...e.changed]});class pv{constructor(t,n="init"){et(this,"snapshot");et(this,"subscribers");et(this,"pendingEvent");et(this,"scheduled",!1);et(this,"lastDispatchLatency",0);const r=Bs(t??k0());this.snapshot={spec:r,version:0,timestamp:Mc(),source:n,changed:["gain","k0","Q","anisotropy","chirality","transparency"]},this.subscribers=new Set,this.pendingEvent=null}getSnapshot(){return Pi(this.snapshot)}subscribe(t,n){return this.subscribers.add(t),((n==null?void 0:n.immediate)??!0)&&t(this.getSnapshot()),()=>{this.subscribers.delete(t)}}update(t,n){const r=Bs({...this.snapshot.spec,...t}),o=mv(this.snapshot.spec,r);if(!(n!=null&&n.force)&&o.length===0)return null;const a={spec:r,version:this.snapshot.version+1,timestamp:Mc(),source:(n==null?void 0:n.source)??"unspecified",changed:o};return this.snapshot=a,this.enqueueBroadcast(a),Pi(a)}replace(t,n){return this.update(t,n)}enqueueBroadcast(t){this.pendingEvent=t,!this.scheduled&&(this.scheduled=!0,queueMicrotask(()=>this.flush()))}flush(){this.scheduled=!1;const t=this.pendingEvent;if(!t)return;this.pendingEvent=null,this.lastDispatchLatency=Math.max(0,Mc()-t.timestamp);const n=Pi(t);for(const r of this.subscribers)r(Pi(n))}getDiagnostics(){return{subscriberCount:this.subscribers.size,lastVersion:this.snapshot.version,lastSource:this.snapshot.source,lastDispatchLatency:this.lastDispatchLatency}}getSubscriberCount(){return this.subscribers.size}}const hv=new pv,gv=()=>hv,yv=e=>{const{data:t,width:n,height:r}=e,o=new Float32Array(n*r);for(let h=0;h<r;h++)for(let M=0;M<n;M++){const k=(h*n+M)*4;o[h*n+M]=(.2126*t[k]+.7152*t[k+1]+.0722*t[k+2])/255}const a=new Float32Array(n*r),l=new Float32Array(n*r),s=(h,M)=>M*n+h,u=[-1,0,1,-2,0,2,-1,0,1],c=[-1,-2,-1,0,0,0,1,2,1];for(let h=1;h<r-1;h++)for(let M=1;M<n-1;M++){let k=0,P=0,p=0;for(let f=-1;f<=1;f++)for(let g=-1;g<=1;g++){const R=o[s(M+g,h+f)];k+=R*u[p],P+=R*c[p],p++}a[s(M,h)]=k,l[s(M,h)]=P}const y=new Float32Array(n*r);let d=1e-6;for(let h=0;h<y.length;h++){const M=Math.hypot(a[h],l[h]);y[h]=M,M>d&&(d=M)}const w=1/d;for(let h=0;h<y.length;h++)y[h]*=w;return{kind:"rim",resolution:la(n,r),gx:a,gy:l,mag:y}},vv=e=>({kind:e,available:!1,resolution:null,updatedAt:null,stalenessMs:Number.POSITIVE_INFINITY,stale:!1,lastSource:null}),xv=()=>xd.reduce((e,t)=>(e[t]=vv(t),e),{}),Sv=(e,t,n,r,o)=>{const a={...e[t],available:!0,resolution:n,updatedAt:o,stalenessMs:0,stale:!1,lastSource:r};return e[t]===a?e:{...e,[t]:a}},wv=(e,t,n,r)=>{const o=e[t];if(!o.available&&o.lastSource===n)return e;const a={...o,available:!1,resolution:null,updatedAt:r,stalenessMs:Number.POSITIVE_INFINITY,stale:!1,lastSource:n};return{...e,[t]:a}},kv=(e,t)=>{let n=!1;const r=[],o={...e};for(const a of xd){const l=e[a],s=xl[a],u=l.updatedAt,c=l.available&&u!=null?Math.max(0,t-u):Number.POSITIVE_INFINITY,y=s.lifetime.staleMs,d=l.available&&u!=null&&c>y,w=l.available?c:Number.POSITIVE_INFINITY;(Math.abs(l.stalenessMs-w)>.5||l.stale!==d)&&(n=!0,o[a]={...l,stalenessMs:w,stale:d},r.push({kind:a,becameStale:!l.stale&&d,recovered:l.stale&&!d,stalenessMs:w}))}return{next:n?o:e,changes:r}},Ec=(e,t,n)=>Math.max(t,Math.min(n,e)),Cv=e=>{const t=Math.PI*2;return e-Math.floor((e+Math.PI)/t)*t-Math.PI},Mv=e=>{let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}},Ev=(e,t,n=2024)=>{const r=e*t,o=new Float32Array(r),a=new Float32Array(r),l=new Float32Array(r),s=Mv(n);for(let c=0;c<r;c++)o[c]=(s()-.5)*Math.PI,a[c]=s(),l[c]=.4+.6*s();const u={width:e,height:t,time:0,phase:new Float32Array(r),depth:new Float32Array(r),intensity:new Float32Array(r),basePhase:o,baseDepth:a,baseIntensity:l};return F0(u,0),u},F0=(e,t)=>{const{width:n,height:r,basePhase:o,baseDepth:a,baseIntensity:l,phase:s,depth:u,intensity:c}=e,y=n*r;e.time+=t;const d=e.time;for(let w=0;w<r;w++){const h=r>1?w/(r-1)*2-1:0;for(let M=0;M<n;M++){const k=n>1?M/(n-1)*2-1:0,P=w*n+M,p=Math.hypot(k,h),f=Math.atan2(h,k),g=p*1.75+f*.5;s[P]=Cv(o[P]+.75*Math.sin(g+d*.9));const R=Ec(.35+.65*Math.sin(p*3.2-d*.6),0,1);u[P]=Ec(.2+.6*a[P]+.4*R*(.5+.5*Math.cos(f*2.2-d*.4)),0,1),c[P]=Ec(l[P]*(.55+.45*(.5+.5*Math.sin(p*2.4+f*1.1+d*.7))),0,1.5)}}y<=0},np=e=>({kind:"volume",resolution:la(e.width,e.height),phase:e.phase,depth:e.depth,intensity:e.intensity}),Cd=(e,t)=>new ImageData(new Uint8ClampedArray(e*t*4),e,t),Rv=(e,t)=>{const n=Cd(e,t),r=n.data,o=e*.5,a=t*.5,l=Math.hypot(o,a);for(let s=0;s<t;s++)for(let u=0;u<e;u++){const c=(s*e+u)*4,y=u-o,d=s-a,w=Math.hypot(y,d),h=Math.abs(Math.sin(w*.12)),M=Math.exp(-Math.pow(w/(l*.9),2)),k=(Math.atan2(d,y)/(2*Math.PI)+1)%1,P=.15+.75*M,p=.5*h+.2*M,f=k*6,g=p*(1-Math.abs(f%2-1));let R=0,T=0,C=0;f>=0&&f<1?(R=p,T=g):f<2?(R=g,T=p):f<3?(T=p,C=g):f<4?(T=g,C=p):f<5?(R=g,C=p):(R=p,C=g);const F=P-p/2;r[c+0]=Math.round((R+F)*255),r[c+1]=Math.round((T+F)*255),r[c+2]=Math.round((C+F)*255),r[c+3]=255}return n},Tv=(e,t)=>{const n=Cd(e,t),r=n.data,o=Math.max(8,Math.floor(Math.min(e,t)/12));for(let a=0;a<t;a++)for(let l=0;l<e;l++){const s=(a*e+l)*4,c=(Math.floor(l/o)+Math.floor(a/o)&1)===0?40:220;r[s+0]=c,r[s+1]=c,r[s+2]=c,r[s+3]=255}return n},Pv=(e,t)=>{const n=Cd(e,t),r=n.data,o=2*Math.PI/Math.max(1,e);for(let a=0;a<t;a++)for(let l=0;l<e;l++){const s=(a*e+l)*4,u=l/e,c=a/t,y=.5+.5*(Math.sin(u*5*Math.PI+Math.cos(c*2*Math.PI))+.5*Math.sin((u+c)*3*Math.PI+Math.sin(u*o*40))),d=Math.abs(Math.sin((u+c)*Math.PI*6)),w=Math.round(255*Math.min(1,y*.8+d*.2)),h=Math.round(255*Math.min(1,y*.6+.3)),M=Math.round(255*Math.min(1,.4+d*.5));r[s+0]=w,r[s+1]=h,r[s+2]=M,r[s+3]=255}return n},Fv={width:512,height:512},Fi=[{id:"circles",label:"Concentric Circles",description:"Radial rings with chromatic gradients for rim energy checks.",generate:Rv},{id:"checkerboard",label:"High-Contrast Checkerboard",description:"Binary checkerboard to stress edge detection and coupling deltas.",generate:Tv},{id:"texturedPlane",label:"Textured Plane",description:"Sinusoidal warp plane for surface morph and |Z| baselines.",generate:Pv}],Cf={rimToSurface:!0,surfaceToRim:!0},rp=e=>({rimToSurface:e.rimToSurface,surfaceToRim:e.surfaceToRim}),_v=(e,t)=>{const n=ll(e);return t.rimToSurface||(n.rimToSurfaceBlend=0,n.rimToSurfaceAlign=0),t.surfaceToRim||(n.surfaceToRimOffset=0,n.surfaceToRimSigma=0,n.surfaceToRimHue=0),n},_i=[{name:"Rainbow Rims + DMT Kernel Effects",params:{edgeThreshold:.08,blend:.39,kernel:Os({gain:3,k0:.2,Q:4.6,anisotropy:.95,chirality:1.46,transparency:.28}),dmt:.2,thetaMode:"gradient",thetaGlobal:0,beta2:1.9,jitter:1.16,sigma:4,microsaccade:!0,speed:1.32,contrast:1.62},coupling:{rimToSurfaceBlend:.45,rimToSurfaceAlign:.55,surfaceToRimOffset:.4,surfaceToRimSigma:.6,surfaceToRimHue:.5,kurToTransparency:.35,kurToOrientation:.35,kurToChirality:.6,volumePhaseToHue:.35,volumeDepthToWarp:.3},composer:Lu(),couplingToggles:Cf}],ls={locked:{label:"Locked coherence",description:"Low-noise lattice with stable phase alignment.",params:{K0:.85,alphaKur:.18,gammaKur:.16,omega0:0,epsKur:.0025}},highEnergy:{label:"High-energy flux",description:"Strong coupling and drive yielding intense wavefronts.",params:{K0:1.35,alphaKur:.12,gammaKur:.1,omega0:.55,epsKur:.006}},chaotic:{label:"Chaotic drift",description:"Loose locking with broadband oscillations and noise.",params:{K0:1.1,alphaKur:.28,gammaKur:.12,omega0:.35,epsKur:.012}}},op=64,Rc=32,Ii=64,Iv=2.5,ap={surface:"Surface",rim:"Rim",kur:"Kuramoto",volume:"Volume"},ll=e=>({rimToSurfaceBlend:e.rimToSurfaceBlend,rimToSurfaceAlign:e.rimToSurfaceAlign,surfaceToRimOffset:e.surfaceToRimOffset,surfaceToRimSigma:e.surfaceToRimSigma,surfaceToRimHue:e.surfaceToRimHue,kurToTransparency:e.kurToTransparency,kurToOrientation:e.kurToOrientation,kurToChirality:e.kurToChirality,volumePhaseToHue:e.volumePhaseToHue,volumeDepthToWarp:e.volumeDepthToWarp}),bv=(e,t)=>{const n=e??{};return{rimToSurfaceBlend:typeof n.rimToSurfaceBlend=="number"?n.rimToSurfaceBlend:t.rimToSurfaceBlend,rimToSurfaceAlign:typeof n.rimToSurfaceAlign=="number"?n.rimToSurfaceAlign:t.rimToSurfaceAlign,surfaceToRimOffset:typeof n.surfaceToRimOffset=="number"?n.surfaceToRimOffset:t.surfaceToRimOffset,surfaceToRimSigma:typeof n.surfaceToRimSigma=="number"?n.surfaceToRimSigma:t.surfaceToRimSigma,surfaceToRimHue:typeof n.surfaceToRimHue=="number"?n.surfaceToRimHue:t.surfaceToRimHue,kurToTransparency:typeof n.kurToTransparency=="number"?n.kurToTransparency:t.kurToTransparency,kurToOrientation:typeof n.kurToOrientation=="number"?n.kurToOrientation:t.kurToOrientation,kurToChirality:typeof n.kurToChirality=="number"?n.kurToChirality:t.kurToChirality,volumePhaseToHue:typeof n.volumePhaseToHue=="number"?n.volumePhaseToHue:t.volumePhaseToHue,volumeDepthToWarp:typeof n.volumeDepthToWarp=="number"?n.volumeDepthToWarp:t.volumeDepthToWarp}},Mf=e=>({fields:{surface:{...e.fields.surface},rim:{...e.fields.rim},kur:{...e.fields.kur},volume:{...e.fields.volume}},dmtRouting:e.dmtRouting,solverRegime:e.solverRegime}),Av=e=>{const t=Lu();if(!e)return t;const n=Mf(t);return n.dmtRouting=e.dmtRouting??t.dmtRouting,n.solverRegime=e.solverRegime??t.solverRegime,tr.forEach(r=>{var a;const o=(a=e.fields)==null?void 0:a[r];o&&(n.fields[r]={exposure:typeof o.exposure=="number"?o.exposure:t.fields[r].exposure,gamma:typeof o.gamma=="number"?o.gamma:t.fields[r].gamma,weight:typeof o.weight=="number"?o.weight:t.fields[r].weight})}),n},Lv=e=>e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()),bi=e=>`(${e.map(t=>Math.round(t)).join(", ")})`,Nv=e=>{if(e<=0)return"0 B";const t=["B","KB","MB","GB"],n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),r=e/Math.pow(1024,n),o=r>=100||n===0?0:r>=10?1:2;return`${r.toFixed(o)} ${t[n]}`},Dv=e=>_e(e,0,1),jv=()=>{const e=S.useRef(null);return S.useCallback(()=>{if(e.current!=null){const l=e.current;return e.current=null,l}let t=0,n=0;for(;t===0;)t=Math.random();for(;n===0;)n=Math.random();const r=Math.sqrt(-2*Math.log(t)),o=r*Math.cos(2*Math.PI*n),a=r*Math.sin(2*Math.PI*n);return e.current=a,o},[])},Ov=e=>{switch(e){case"grayBaseColorRims":return 1;case"grayBaseGrayRims":return 2;case"colorBaseGrayRims":return 3;case"colorBaseBlendedRims":return 4;default:return 0}},Bv={ok:{border:"rgba(34,197,94,0.35)",background:"rgba(34,197,94,0.16)",color:"#bbf7d0"},warn:{border:"rgba(251,191,36,0.4)",background:"rgba(251,191,36,0.18)",color:"#fde68a"},stale:{border:"rgba(248,113,113,0.45)",background:"rgba(248,113,113,0.2)",color:"#fecaca"},missing:{border:"rgba(148,163,184,0.35)",background:"rgba(148,163,184,0.16)",color:"#e2e8f0"}},zv={ok:"fresh",warn:"lagging",stale:"stale",missing:"missing"},Uv=e=>{switch(e){case"surfaces":return 0;case"edges":return 1;default:return 2}};function Vv(){var No;const e=S.useRef(null),t=S.useRef(null),n=S.useRef(null),r=S.useRef(!0),o=S.useRef(null),a=S.useRef(null),l=S.useRef([]),s=S.useRef(null),u=S.useRef(null),c=S.useMemo(()=>gv(),[]),y=S.useRef(c.getSnapshot()),d=S.useRef(y.current.version),w=S.useRef(d.current),[h,M]=S.useState(720),[k,P]=S.useState(480),[p,f]=S.useState("gpu"),[g,R]=S.useState(null),T=S.useRef(null),C=S.useRef(null),F=S.useRef(null),[I,j]=S.useState(.22),[G,Se]=S.useState(.65),[ot,ye]=S.useState(1),[Be,Ut]=S.useState(!0),[Ie,Vt]=S.useState(!1),[N,$]=S.useState(!1),[O,ee]=S.useState(!1),[Z,we]=S.useState(1.1),[Ee,de]=S.useState(.5),[Q,ce]=S.useState(1.4),[ve,te]=S.useState(!0),[ge,qt]=S.useState(1),[ze,B]=S.useState(1),[xe,Vr]=S.useState(()=>k0()),$t=S.useCallback(i=>Vr(m=>Bs({...m,...i})),[]);S.useEffect(()=>c.subscribe(i=>{y.current=i,d.current=i.version,!Xn.current&&Kt.current&&hr.current&&Kt.current.postMessage({kind:"kernelSpec",spec:i.spec,version:i.version})}),[c]),S.useEffect(()=>{c.replace(xe,{source:"ui",force:!0})},[xe,c]);const[We,sa]=S.useState(0),[Xe,Kn]=S.useState("gradient"),[pt,ia]=S.useState(0),[Rr,Ct]=S.useState("color"),[Lt,$r]=S.useState(!0),[Mt,Hr]=S.useState(!1),[ht,vo]=S.useState(16),[xn,Ba]=S.useState(!0),[Kr,xo]=S.useState("locked"),[cr,Ws]=S.useState(!1),[Gr,Dl]=S.useState("p4"),[Wr,Ys]=S.useState(4),[Yr,Xs]=S.useState(.35),[Xr,Qs]=S.useState(1),[Qr,Zs]=S.useState("surfaces"),[gt,Tr]=S.useState({rimToSurfaceBlend:.45,rimToSurfaceAlign:.55,surfaceToRimOffset:.4,surfaceToRimSigma:.6,surfaceToRimHue:.5,kurToTransparency:.35,kurToOrientation:.35,kurToChirality:.6,volumePhaseToHue:.35,volumeDepthToWarp:.3}),Gn=S.useCallback(i=>m=>Tr(x=>({...x,[i]:m})),[]),[fr,jl]=S.useState(Cf),Js=S.useCallback(i=>m=>jl(x=>({...x,[i]:m})),[]),ua=S.useCallback(i=>{const m=i??fr;return{base:ll(gt),effective:_v(gt,m)}},[gt,fr]),[Sn,za]=S.useState(()=>Lu()),be=S.useCallback((i,m)=>x=>za(E=>({...E,fields:{...E.fields,[i]:{...E.fields[i],[m]:x}}})),[]),Nu=S.useCallback(i=>{za(m=>({...m,dmtRouting:i}))},[]),Md=S.useCallback(i=>{za(m=>({...m,solverRegime:i}))},[]),So=S.useMemo(()=>{const i=new Float32Array(tr.length),m=new Float32Array(tr.length),x=new Float32Array(tr.length);tr.forEach((b,L)=>{const _=Sn.fields[b];i[L]=_.exposure,m[L]=_.gamma,x[L]=_.weight});const E=E0(Sn);return{exposure:i,gamma:m,weight:x,blendGain:E}},[Sn]),[dr,wo]=S.useState(!1),[me,ca]=S.useState(!1),[Wn,Ua]=S.useState(!1),[Pr,ko]=S.useState(.6),[Ne,fa]=S.useState(.2),[Co,Ol]=S.useState(.15),[da,Va]=S.useState(0),[Fr,$a]=S.useState(.002),[bn,Du]=S.useState(0),[_r,ma]=S.useState(0),[Et,Ha]=S.useState(1),[Ht,Ka]=S.useState(0),[Yn,pa]=S.useState(!1),[ha,Bl]=S.useState(null),[Mo,qs]=S.useState(!0),[en,tn]=S.useState(null),[Ir,zl]=S.useState(null),[Eo,mr]=S.useState("idle"),[Ro,wn]=S.useState(null),[To,Ga]=S.useState(null),[Nt,Wa]=S.useState({checked:!1,best:null}),[An,Ya]=S.useState(()=>xv()),[kn,ga]=S.useState(null),[ya,va]=S.useState(null),[Po,xa]=S.useState(null),[fn,Ul]=S.useState(!1),[Vl,Fo]=S.useState(null),[Sa,Xa]=S.useState("circles"),[ei,ti]=S.useState({}),dn=S.useCallback((i,m,x)=>{const E=performance.now();Ya(b=>{const L=Sv(b,i,m,x,E);if(!b[i].available){const _=xl[i];console.info(`[fields] ${_.label} available ${m.width}x${m.height} via ${x}`)}return L})},[]),Zr=S.useCallback((i,m)=>{const x=performance.now();Ya(E=>{if(!E[i].available)return E;const b=xl[i];return console.warn(`[fields] ${b.label} unavailable via ${m}`),wv(E,i,m,x)})},[]),Cn=S.useCallback(()=>{a.current&&(a.current.getTracks().forEach(i=>i.stop()),a.current=null)},[]),_o=S.useMemo(()=>Math.min(h*k*24,8e7),[h,k]),Jr=S.useRef(.6),Dt=S.useRef(.6),Xn=S.useRef(!1),it=S.useRef(null),pr=S.useRef(null),wa=S.useRef(null),br=S.useRef({kernelVersion:-1,frameId:-1}),ke=S.useRef(null),ni=S.useRef(null),Ln=S.useRef(null),Mn=S.useRef(null),En=S.useRef(null),Nn=S.useRef(null),Dn=S.useRef(null),qr=S.useRef(null),Io=S.useRef(null),Kt=S.useRef(null),hr=S.useRef(!1),eo=S.useRef(0),to=S.useRef(0),D=S.useRef([]),Y=S.useRef(null),X=S.useRef(-1),K=S.useRef(null),Re=S.useRef(null),yt=S.useRef(null),Ue=S.useRef(null),at=S.useRef(null),jt=S.useRef(null),Rt=S.useRef({count:0,cos:new Float32Array(0),sin:new Float32Array(0)}),mn=S.useRef({enabled:!1,samples:[],maxSamples:120,label:"frame-profiler"});S.useEffect(()=>{const i=window.setInterval(()=>{const m=performance.now();Ya(x=>{const{next:E,changes:b}=kv(x,m);if(b.length===0)return x;for(const L of b){const _=xl[L.kind];L.becameStale?console.warn(`[fields] ${_.label} stale ${L.stalenessMs.toFixed(0)}ms`):L.recovered&&console.info(`[fields] ${_.label} recovered`)}return E})},300);return()=>window.clearInterval(i)},[]);const vt=S.useRef([]),Qe=S.useRef({enabled:!1,thresholds:{frame:28,renderGpu:10,renderCpu:20,kuramoto:8},history:[],lastLogTs:0}),Tt=S.useRef({windowStart:performance.now(),frames:0}),Qa=jv(),Qn=S.useCallback(i=>{if(!i)return;const m=br.current;if(i.frameId===m.frameId)return;const x=`[kur-telemetry] frame ${i.frameId} kernel v${i.kernelVersion} R=${i.orderParameter.magnitude.toFixed(4)} phase=${i.orderParameter.phase.toFixed(3)} meanE=${i.interference.mean.toFixed(4)}`;i.kernelVersion!==m.kernelVersion?console.info(`${x} gain=${i.kernel.gain.toFixed(3)} k0=${i.kernel.k0.toFixed(3)} anis=${i.kernel.anisotropy.toFixed(3)} chir=${i.kernel.chirality.toFixed(3)}`):console.debug(x),br.current={kernelVersion:i.kernelVersion,frameId:i.frameId}},[]),xt=S.useCallback((i,m)=>{const x=Qe.current;if(!x.enabled)return;const E=x.thresholds[i]??x.thresholds.frame;if(m>E){const b=performance.now();b-x.lastLogTs>1e3&&(console.warn(`[telemetry] ${i} ${m.toFixed(2)}ms`),x.lastLogTs=b)}x.history.push({phase:i,ms:m,ts:performance.now()}),x.history.length>360&&x.history.shift()},[]);S.useEffect(()=>{Qe.current.enabled=Yn,Yn||(Qe.current.history=[],Qe.current.lastLogTs=0,vt.current=[])},[Yn]),S.useEffect(()=>{Mo?(Tt.current.windowStart=performance.now(),Tt.current.frames=0):(Tt.current.frames=0,Tt.current.windowStart=performance.now())},[Mo]),S.useEffect(()=>{if(!Yn){Bl(null);return}const i=window.setInterval(()=>{const m=vt.current.slice(-120);if(m.length===0)return;const x=tr.reduce((_,z)=>(_[z]={energy:0,blend:0,share:0,weight:0},_),{});m.forEach(_=>{const z=_.metrics.composer;tr.forEach(U=>{x[U].energy+=z.fields[U].energy,x[U].blend+=z.fields[U].blend,x[U].share+=z.fields[U].share,x[U].weight=z.fields[U].weight})});const E=m[m.length-1].metrics.composer,b=m.length,L={fields:{},coupling:{scale:E.coupling.scale,base:ll(E.coupling.base),effective:ll(E.coupling.effective)},updatedAt:Date.now()};tr.forEach(_=>{L.fields[_]={energy:x[_].energy/b,blend:x[_].blend/b,share:x[_].share/b,weight:x[_].weight}}),Bl(L)},500);return()=>window.clearInterval(i)},[Yn]),S.useEffect(()=>(window.__getFrameMetrics=()=>[...vt.current],()=>{window.__getFrameMetrics=void 0}),[]);const Ze=S.useMemo(()=>{const i=_e(Math.round(Wr),2,8);return Array.from({length:i},(m,x)=>x*2*Math.PI/i)},[Wr]),gr=S.useMemo(()=>({L:560,M:530,S:420}),[]),Ar=520,ri=S.useMemo(()=>xd.map(i=>{const m=An[i],x=xl[i],E=m.stalenessMs;let b;return m.available?m.stale?b="stale":x.lifetime.expectedMs!==Number.POSITIVE_INFINITY&&E>x.lifetime.expectedMs*1.5?b="warn":b="ok":b="missing",{kind:i,label:x.label,state:b,stalenessMs:E,resolution:m.resolution}}),[An]),Gt=S.useCallback(()=>{(!it.current||it.current.width!==h||it.current.height!==k)&&(it.current=$m(h,k),it.current&&(pr.current=it.current.telemetry,wa.current=it.current.irradiance)),it.current&&(pr.current=it.current.telemetry,wa.current=it.current.irradiance);const i=h*k;if(!ke.current||ke.current.gradX.length!==i||ke.current.resolution.width!==h||ke.current.resolution.height!==k){const m=new ArrayBuffer(gc(h,k));ni.current=m;const x=Ri(m,h,k);return Bo(x,"cpu:init"),ke.current=x,Ln.current=x.gradX,Mn.current=x.gradY,En.current=x.vort,Nn.current=x.coh,Dn.current=x.amp,!0}return Bo(ke.current,"cpu:reuse"),Ln.current=ke.current.gradX,Mn.current=ke.current.gradY,En.current=ke.current.vort,Nn.current=ke.current.coh,Dn.current=ke.current.amp,!1},[h,k]),no=S.useCallback(()=>{if(h<=0||k<=0){qr.current=null,Io.current=null;return}const i=qr.current;(!i||i.width!==h||i.height!==k)&&(qr.current=Ev(h,k))},[h,k]),Wt=S.useCallback(i=>{let m=K.current;if(!m||m.width!==h||m.height!==k){const x=i.createImageData(h,k);m={image:x,data:x.data,width:h,height:k},K.current=m}return m},[h,k]),pe=S.useCallback(()=>{const i=h*k;let m=yt.current;return!m||m.energy.length!==i?(m={energy:new Float32Array(i),hue:new Float32Array(i),energyHist:new Uint32Array(op),hueHist:new Uint32Array(op)},yt.current=m):(m.energyHist.fill(0),m.hueHist.fill(0)),m},[h,k]),ie=S.useCallback(i=>{var b;if(i<=0)return null;const m=h*k;let x=Ue.current;if(!x||x.orientationCount!==i||x.magnitudes.length!==i||((b=x.magnitudes[0])==null?void 0:b.length)!==m){const L=Array.from({length:i},()=>new Float32Array(m)),_=Array.from({length:i},()=>new Float32Array(m));x={phases:L,magnitudes:_,magnitudeHist:new Float32Array(i*Rc),orientationCount:i},Ue.current=x}else x&&x.magnitudeHist.fill(0);return x??null},[h,k]),Ce=S.useCallback((i,m,x,E)=>{if(i)if(Ie&&m&&(E!=null&&E.rim)?ga({energyRange:[E.rim.energyMin,E.rim.energyMax],hueRange:[E.rim.hueMin,E.rim.hueMax],energyHist:Array.from(m.energyHist),hueHist:Array.from(m.hueHist)}):Ie||ga(null),N&&x&&(E!=null&&E.surface)){const b=[];for(let L=0;L<x.orientationCount;L++){const _=L*Rc,z=x.magnitudeHist.slice(_,_+Rc);b.push(Array.from(z))}va({orientationCount:x.orientationCount,magnitudeMax:E.surface.magnitudeMax,magnitudeHist:b})}else N||va(null)},[Ie,N,ga,va]),re=S.useCallback((i,m)=>{if(!i){O||xa(null),fn||Fo(null);return}if(O&&m&&m.amp){let x=at.current;!x||x.length!==Ii?(x=new Float32Array(Ii),at.current=x):x.fill(0);let E=Number.POSITIVE_INFINITY,b=0;const L=m.amp;for(let _=0;_<L.length;_++){const z=L[_];z<E&&(E=z),z>b&&(b=z);const U=Math.min(.999999,z/Iv),oe=Math.min(Ii-1,Math.floor(U*Ii));x[oe]+=1}xa({ampRange:[Number.isFinite(E)?E:0,b],ampHist:Array.from(x)})}else(!O||!m)&&xa(null);if(fn&&m&&m.coh){const{width:x,height:E}=m.resolution,b=Math.max(1,Math.min(96,x)),L=Math.max(1,Math.min(96,E)),_=x/b,z=E/L;let U=jt.current;(!U||U.width!==b||U.height!==L)&&(U={width:b,height:L,data:new Float32Array(b*L)},jt.current=U);const oe=U.data;let q=Number.POSITIVE_INFINITY,se=0;const Le=m.coh;for(let V=0;V<L;V++){const He=Math.min(Math.floor((V+.5)*z),E-1);for(let ue=0;ue<b;ue++){const ae=Math.min(Math.floor((ue+.5)*_),x-1),Fe=Le[He*x+ae];oe[V*b+ue]=Fe,Fe<q&&(q=Fe),Fe>se&&(se=Fe)}}Number.isFinite(q)||(q=0),(!Number.isFinite(se)||se<q)&&(se=q),Fo({width:b,height:L,values:Float32Array.from(oe),min:q,max:se})}else(!fn||!m)&&Fo(null)},[O,fn,xa,Fo]);S.useEffect(()=>{fn||(Fo(null),jt.current=null)},[fn]);const ut=S.useCallback(i=>(Rt.current.count!==i&&(Rt.current={count:i,cos:new Float32Array(i),sin:new Float32Array(i)}),Rt.current),[]),Ve=S.useCallback(()=>{const i=n.current;if(!i)return;const{renderer:m}=i;T.current&&m.uploadBase(T.current),F.current&&m.uploadRim(F.current),r.current=!1},[]),$e=S.useCallback(()=>{if(p!=="gpu")return null;const i=e.current;if(!i)return null;i.width=h,i.height=k;let m=n.current;if(!m||m.gl.canvas!==i){const x=i.getContext("webgl2",{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0});if(!x)return console.warn("[gpu] WebGL2 unavailable; falling back to CPU renderer."),f("cpu"),null;m&&m.renderer.dispose();const E=Wm(x);m={gl:x,renderer:E},n.current=m,r.current=!0}return m.renderer.resize(h,k),r.current&&Ve(),m},[p,h,k,Ve]),jn=S.useCallback((i,m=120,x="frame-profiler")=>{const E=mn.current;E.enabled=i,E.maxSamples=m,E.samples=[],E.label=x,console.log(`[frame-profiler] ${i?`collecting ${m} samples (${x})`:"disabled"}`)},[]),he=S.useCallback(i=>{Gt(),!(!it.current||!ke.current)&&Hm(it.current,i,ke.current)},[Gt]),Te=S.useCallback(()=>({alphaKur:Ne,gammaKur:Co,omega0:da,K0:Pr,epsKur:Fr,fluxX:bn,fluxY:_r}),[Ne,Co,da,Pr,Fr,bn,_r]);S.useEffect(()=>{me?he(Et):(Gt(),ke.current&&(ke.current.gradX.fill(0),ke.current.gradY.fill(0),ke.current.vort.fill(0),ke.current.coh.fill(.5),ke.current.amp.fill(0),Dn.current=ke.current.amp,Zr("phase","cpu-reset")),Zr("volume","cpu-reset"))},[me,Et,he,Gt]),S.useEffect(()=>{if(!dr){Io.current=null,qr.current=null,Zr("volume","volume-disabled");return}if(no(),qr.current){const i=np(qr.current);fs(i,"volume:init"),Io.current=i,dn("volume",i.resolution,"volume:stub")}},[dr,no,dn,Zr]);const nn=S.useCallback(i=>{if(!me||(Gt(),!it.current))return;const m=y.current;w.current=m.version;const x=typeof performance<"u"?performance.now():Date.now(),E=Km(it.current,Te(),i,Qa,x,{kernel:m.spec,controls:{dmt:We},telemetry:{kernelVersion:m.version}});pr.current=E.telemetry,wa.current=E.irradiance,Qn(E.telemetry)},[me,Gt,Te,Qa,We,Qn]),pn=S.useCallback(()=>{if(!me||(Gt(),!it.current||!ke.current))return;const i=y.current;Gm(it.current,ke.current,{kernel:i.spec,controls:{dmt:We}}),dn("phase",ke.current.resolution,"cpu")},[me,Gt,We,dn]),De=S.useCallback(()=>{he(Et),!Xn.current&&Kt.current&&hr.current&&Kt.current.postMessage({kind:"reset",qInit:Et})},[he,Et]),On=S.useCallback(()=>{xo("custom")},[xo]),Pt=S.useCallback(i=>{const m=ls[i];ko(m.params.K0),fa(m.params.alphaKur),Ol(m.params.gammaKur),Va(m.params.omega0),$a(m.params.epsKur),xo(i),De()},[ko,fa,Ol,Va,$a,De]);S.useEffect(()=>{Xn.current=Wn},[Wn]);const ct=S.useCallback(()=>{D.current=[],Y.current=null,eo.current=0,to.current=0,X.current=-1,Ln.current=null,Mn.current=null,En.current=null,Nn.current=null,Dn.current=null,at.current=null,jt.current=null},[]),St=S.useCallback(i=>{const m=Kt.current;if(m)try{m.postMessage({kind:"returnBuffer",buffer:i.buffer},[i.buffer])}catch(x){console.debug("[kur-worker] buffer return skipped",x)}},[]),ft=S.useCallback(()=>{if(!Kt.current)return;const m=D.current;if(m.length===0)return;const x=m.shift(),E=Y.current;Y.current=x,X.current=x.frameId,Ln.current=x.gradX,Mn.current=x.gradY,En.current=x.vort,Nn.current=x.coh,Dn.current=x.amp,pr.current=x.instrumentation.telemetry,wa.current=null,Qn(x.instrumentation.telemetry),E&&St(E)},[St,Qn]),Zn=S.useCallback(i=>{var _;if(!Kt.current)return;eo.current=Math.max(eo.current-1,0);const m=Ri(i.buffer,h,k);Bo(m,"worker:frame"),dn("phase",m.resolution,"worker");const x={buffer:i.buffer,gradX:m.gradX,gradY:m.gradY,vort:m.vort,coh:m.coh,amp:m.amp,timestamp:i.timestamp,frameId:((_=i.meta)==null?void 0:_.frameId)??i.frameId,kernelVersion:i.kernelVersion??0,meta:i.meta,instrumentation:i.instrumentation};i.meta&&i.meta.frameId!==i.frameId&&console.warn(`[kur-worker] frameId mismatch meta=${i.meta.frameId} payload=${i.frameId}`),x.kernelVersion!==y.current.version&&console.debug(`[kur-worker] kernel version drift: worker=${x.kernelVersion} ui=${y.current.version}`);const E=X.current;if(x.frameId<=E){console.debug(`[kur-worker] dropping stale frame ${x.frameId} (last=${E})`),St(x);return}const b=D.current;let L=!1;for(let z=0;z<b.length;z++){const U=b[z];if(x.frameId===U.frameId){console.debug(`[kur-worker] skipping duplicate frame ${x.frameId}`),St(x);return}if(x.frameId<U.frameId){b.splice(z,0,x),L=!0;break}}L||b.push(x),Xn.current||ft()},[k,h,ft,St]),Jn=S.useCallback(()=>{const i=Kt.current;i&&i.terminate(),Kt.current=null,hr.current=!1,eo.current=0,to.current=0,ct()},[ct]),Lr=S.useCallback(i=>{switch(i.kind){case"ready":if(hr.current=!0,!Xn.current&&Kt.current){const m=y.current;Kt.current.postMessage({kind:"kernelSpec",spec:m.spec,version:m.version})}break;case"frame":Zn(i);break;case"log":console.log(i.message);break;default:console.warn("[kur-worker] unknown message",i);break}},[Zn]),ro=S.useCallback(()=>{if(!me||Xn.current)return;Jn(),ct();const i=gc(h,k),m=[new ArrayBuffer(i),new ArrayBuffer(i)],x=new Worker(new URL("/assets/kuramotoWorker-se8Z99Nm.js",import.meta.url),{type:"module"});Kt.current=x,hr.current=!1,eo.current=0,to.current=0,D.current=[],Y.current=null,x.onmessage=E=>{Lr(E.data)},x.postMessage({kind:"init",width:h,height:k,params:Te(),qInit:Et,buffers:m,seed:Math.floor(Math.random()*1e9)},m)},[ct,Te,Lr,k,me,Et,Jn,h]);S.useEffect(()=>{if(!me||Wn){Jn(),ct(),me&&Wn&&(Gt(),he(Et));return}return ro(),()=>{Jn(),ct()}},[me,Wn,ro,Jn,ct,Gt,he,Et]),S.useEffect(()=>{if(!me||Xn.current)return;const i=Kt.current;!i||!hr.current||i.postMessage({kind:"updateParams",params:Te()})},[Te,me,Wn]);const Je=S.useCallback((i,m,x=!0,E,b)=>{const L=y.current,_=L.spec,z=C.current;z&&hc(z,"cpu:surface");const U=F.current;U&&Gi(U,"cpu:rim");const oe=Io.current;oe&&fs(oe,"cpu:volume");let q=null;const se=ke.current;if(se){const Fe=se.resolution,qe=(E==null?void 0:E.gradX)??Ln.current,_t=(E==null?void 0:E.gradY)??Mn.current,It=(E==null?void 0:E.vort)??En.current,Xt=(E==null?void 0:E.coh)??Nn.current,dt=(E==null?void 0:E.amp)??Dn.current;qe&&_t&&It&&Xt&&dt&&(q={kind:"phase",resolution:Fe,gradX:qe,gradY:_t,vort:It,coh:Xt,amp:dt},Bo(q,E?"phase:override":"phase:cpu"),dn("phase",Fe,E?"worker":"cpu"))}const Le=Ie?pe():null,V=N&&Ze.length>0?ie(Ze.length):null,{base:He,effective:ue}=ua(b==null?void 0:b.toggles),ae=tp({width:h,height:k,timeSeconds:m,out:i,surface:z,rim:U,phase:q,volume:oe,kernel:_,dmt:We,blend:G,normPin:xn,normTarget:Jr.current,lastObs:Dt.current,lambdaRef:Ar,lambdas:gr,beta2:Z,microsaccade:ve,alive:Mt,phasePin:Lt,edgeThreshold:I,wallpaperGroup:Gr,surfEnabled:cr,orientationAngles:Ze,thetaMode:Xe,thetaGlobal:pt,polBins:ht,jitter:Ee,coupling:ue,couplingBase:He,sigma:Q,contrast:ze,rimAlpha:ot,rimEnabled:Be,displayMode:Rr,surfaceBlend:Yr,surfaceRegion:Qr,warpAmp:Xr,kurEnabled:me,debug:Le||V?{rim:Le??void 0,surface:V??void 0}:void 0,composer:Sn,kurTelemetry:pr.current??void 0});return x&&ae.obsAverage!=null&&(Dt.current=ae.obsAverage),x&&ae.metrics&&(vt.current.push({backend:"cpu",ts:performance.now(),metrics:ae.metrics,kernelVersion:L.version}),vt.current.length>240&&vt.current.shift()),Ce(x,Le,V,ae.debug),re(x,q),ae.metrics},[We,G,xn,gr,Ar,Z,ve,Mt,C,F,Lt,k,h,I,Gr,cr,Ze,Xe,pt,ht,Ee,Q,ze,ot,Be,Rr,Yr,Qr,Xr,me,dr,Sn,ua,pe,ie,Ce,re,T]),bo=S.useCallback(i=>{if(!Mo)return;const m=Tt.current,x=performance.now();m.frames===0&&(m.windowStart=x),m.frames+=1;const E=x-m.windowStart;if(E<1e3)return;const b=m.frames>0?m.frames*1e3/E:0;m.windowStart=x,m.frames=0,(!Re.current||Re.current.length!==h*k*4)&&(Re.current=new Uint8ClampedArray(h*k*4));const L=Re.current;let _=null;try{_=Je(L,i,!1)}catch(se){console.warn("[frame-log] failed to sample metrics",se)}if(!_){console.log(`[frame-log] fps=${b.toFixed(1)} metrics=unavailable heatmap=${fn?"on":"off"}`);return}const z=_.composer.fields.rim.energy,U=_.composer.fields.surface.energy,oe=_.gradient.cohMean??0,q=_.gradient.cohStd??0;console.log(`[frame-log] fps=${b.toFixed(1)} rim=${z.toFixed(3)} surface=${U.toFixed(3)} |Z|=${oe.toFixed(3)}±${q.toFixed(3)} heatmap=${fn?"on":"off"}`)},[Mo,Je,fn,h,k]),oo=S.useCallback((i,m,x)=>{const E=y.current,b=E.spec,{gl:L,renderer:_}=i;if(!F.current||!T.current){L.clear(L.COLOR_BUFFER_BIT);return}const z=Ie?pe():null,U=N&&Ze.length>0?ie(Ze.length):null,{base:oe,effective:q}=ua(),se=Qe.current.enabled&&x,Le=x&&(se||z!=null||U!=null),V=se?performance.now():0,He=T0(b,We),ue=Dv(G+He.transparency*.5),ae=1e-6,Fe=xn?Math.pow((Jr.current+ae)/(Dt.current+ae),.5):1,qe={L:Z*(Ar/gr.L-1),M:Z*(Ar/gr.M-1),S:Z*(Ar/gr.S-1)},_t=ve?m*6:0,It=Mt?.15*Math.sin(2*Math.PI*.55*m):0,Xt=F.current,{gx:dt,gy:Gl,mag:zu}=Xt,ai=Ln.current,tl=Mn.current,Ed=En.current,Rd=Nn.current,Td=Dn.current,li=Io.current;li&&fs(li,"gpu:volume-active");const Uu=C.current;Uu&&hc(Uu,"gpu:surface"),Gi(Xt,"gpu:rim-active");const Pd=ke.current,Wl=Pd&&ai&&tl&&Ed&&Rd&&Td?{kind:"phase",resolution:Pd.resolution,gradX:ai,gradY:tl,vort:Ed,coh:Rd,amp:Td}:null;Wl&&Bo(Wl,"gpu:phase-active");const _0=P0(Gr),I0=sv(_0),b0=cr||q.surfaceToRimOffset>1e-4||q.surfaceToRimSigma>1e-4||q.surfaceToRimHue>1e-4,Fd=Ze.length,Vu=ut(Fd),A0=Vu.cos,L0=Vu.sin;for(let yr=0;yr<Fd;yr++)A0[yr]=Math.cos(Ze[yr]),L0[yr]=Math.sin(Ze[yr]);const N0=h*.5,D0=k*.5;let _d=0;if(Lt&&ve){let yr=0,Do=0;for(let si=0;si<k;si+=8)for(let ii=0;ii<h;ii+=8){const O0=si*h+ii;zu[O0]>=I&&(yr+=Math.sin(_t+kf(ii,si)*Math.PI*2),Do++)}_d=Do?yr/Do:0}let Id=null;if(Le){(!Re.current||Re.current.length!==h*k*4)&&(Re.current=new Uint8ClampedArray(h*k*4));const yr=Re.current,Do=tp({width:h,height:k,timeSeconds:m,out:yr,surface:Uu,rim:Xt,phase:Wl,volume:li,kernel:b,dmt:We,blend:G,normPin:xn,normTarget:Jr.current,lastObs:Dt.current,lambdaRef:Ar,lambdas:gr,beta2:Z,microsaccade:ve,alive:Mt,phasePin:Lt,edgeThreshold:I,wallpaperGroup:Gr,surfEnabled:cr,orientationAngles:Ze,thetaMode:Xe,thetaGlobal:pt,polBins:ht,jitter:Ee,coupling:q,couplingBase:oe,sigma:Q,contrast:ze,rimAlpha:ot,rimEnabled:Be,displayMode:Rr,surfaceBlend:Yr,surfaceRegion:Qr,warpAmp:Xr,kurEnabled:me,debug:z||U?{rim:z??void 0,surface:U??void 0}:void 0,composer:Sn,kurTelemetry:pr.current??void 0});Id=Do.debug,se&&(vt.current.push({backend:"gpu",ts:performance.now(),metrics:Do.metrics,kernelVersion:E.version}),vt.current.length>240&&vt.current.shift(),Do.obsAverage!=null&&(Dt.current=Do.obsAverage))}Ce(x,z,U,Id??void 0),re(x,Wl),_.uploadPhase(Wl),_.uploadVolume(li??null);const j0=1+.65*We;_.render({time:m,edgeThreshold:I,effectiveBlend:ue,displayMode:Ov(Rr),baseOffsets:[qe.L,qe.M,qe.S],sigma:Q,jitter:Ee,jitterPhase:_t,breath:It,muJ:_d,phasePin:Lt,microsaccade:ve,polBins:ht,thetaMode:Xe==="gradient"?0:1,thetaGlobal:pt,contrast:ze,frameGain:Fe,rimAlpha:ot,rimEnabled:Be,warpAmp:Xr,surfaceBlend:Yr,surfaceRegion:Uv(Qr),surfEnabled:cr,kurEnabled:me,volumeEnabled:dr,useWallpaper:b0,kernel:He,alive:Mt,beta2:Z,coupling:q,couplingScale:j0,composerExposure:So.exposure,composerGamma:So.gamma,composerWeight:So.weight,composerBlendGain:So.blendGain,orientations:Vu,ops:I0,center:[N0,D0]}),bo(m),se&&xt("renderGpu",performance.now()-V)},[F,C,T,We,G,xn,gr,Ar,Z,ve,Mt,Ze,ut,Gr,cr,Xe,pt,ht,Ee,ua,Q,ze,ot,Be,Xr,Yr,Qr,me,h,k,I,xt,Ie,N,pe,ie,Ce,re,O,bo]),ka=S.useCallback(i=>{if(!dr)return;no();const m=qr.current;if(!m)return;F0(m,i);const x=np(m);fs(x,"volume:stub"),Io.current=x,dn("volume",x.resolution,"volume:stub")},[dr,no,dn]),Ca=S.useCallback((i,m)=>{if(!me)return;const x=Qe.current.enabled?performance.now():0;if(Xn.current)nn(i),pn();else{const E=Kt.current;if(E&&hr.current){const b=eo.current;if(b<2){const L=to.current++;E.postMessage({kind:"tick",dt:i,timestamp:m,frameId:L}),eo.current=b+1}}ft()}x&&xt("kuramoto",performance.now()-x)},[me,nn,pn,ft,xt]),oi=S.useCallback((i,m)=>{const x=Qe.current.enabled,E=x?performance.now():0,b=.016*ge;Ca(b,m),ka(b);const L=Wt(i),_=mn.current;let z=0;_.enabled&&(z=performance.now());let U=0;if(x&&(U=performance.now()),Je(L.data,m,!0),U&&xt("renderCpu",performance.now()-U),_.enabled){const oe=performance.now()-z;if(_.samples.push(oe),_.samples.length>=_.maxSamples){const q=_.samples.length,Le=_.samples.reduce((ae,Fe)=>ae+Fe,0)/q,V=[..._.samples].sort((ae,Fe)=>ae-Fe),He=Math.min(V.length-1,Math.floor(V.length*.95)),ue=V[He]??Le;console.log(`[${_.label}] avg ${Le.toFixed(3)}ms p95 ${ue.toFixed(3)}ms over ${q} frames`),_.samples=[],_.enabled=!1}}i.putImageData(L.image,0,0),bo(m),E&&xt("frame",performance.now()-E)},[Ca,ka,ge,Wt,Je,xt,bo]),$l=S.useCallback(async(i=10)=>{if(!F.current||!C.current)return console.warn("[regression] skipping: surface or rim field not ready."),{maxDelta:0,perFrameMax:[]};if(!me)return console.warn("[regression] Kuramoto disabled; nothing to compare."),{maxDelta:0,perFrameMax:[]};const m=Te(),x=h*k*4,E=.016*ge,b=12345,L=Dt.current,z=y.current.spec,U=$m(h,k),oe=new ArrayBuffer(gc(h,k)),q=Ri(oe,h,k),se=Wy(b);Hm(U,Et,q);const Le=[];for(let ae=0;ae<i;ae++){Km(U,m,E,se,E*(ae+1),{kernel:z,controls:{dmt:We}}),Gm(U,q,{kernel:z,controls:{dmt:We}});const Fe=new Uint8ClampedArray(x),qe=ae*(1/60);Je(Fe,qe,!1,q),Le.push(Fe)}let V;try{V=await new Promise((ae,Fe)=>{const qe=new Worker(new URL("/assets/kuramotoWorker-se8Z99Nm.js",import.meta.url),{type:"module"});qe.onmessage=_t=>{const It=_t.data;It.kind==="simulateResult"?(qe.terminate(),ae(It.buffers)):It.kind==="log"&&console.log(It.message)},qe.onerror=_t=>{qe.terminate(),Fe(_t)},qe.postMessage({kind:"simulate",frameCount:i,dt:E,params:m,width:h,height:k,qInit:Et,seed:b})})}catch(ae){return console.error("[regression] worker simulation failed",ae),Dt.current=L,{maxDelta:1/0,perFrameMax:[]}}const He=[];let ue=0;for(let ae=0;ae<i;ae++){const Fe=Ri(V[ae],h,k),qe=new Uint8ClampedArray(x),_t=ae*(1/60);Je(qe,_t,!1,Fe);const It=Le[ae];let Xt=0;for(let dt=0;dt<x;dt++){const Gl=Math.abs(qe[dt]-It[dt])/255;Gl>Xt&&(Xt=Gl)}He.push(Xt),Xt>ue&&(ue=Xt)}return Dt.current=L,console.log(`[regression] compared ${i} frames, max normalized delta ${ue}`),console.assert(ue<1e-6,`[regression] expected <=1e-6 delta, saw max ${ue}`),{maxDelta:ue,perFrameMax:He}},[F,C,me,h,k,Je,Te,ge,Et,We]),Ma=S.useCallback(async()=>{if(!F.current||!T.current||!C.current)return console.warn("[gpu-regression] base pixels, surface, or rim data unavailable."),null;const i=document.createElement("canvas");i.width=h,i.height=k;const m=i.getContext("webgl2",{alpha:!1,premultipliedAlpha:!1,antialias:!1,preserveDrawingBuffer:!0});if(!m)return console.warn("[gpu-regression] WebGL2 unavailable for parity check."),null;const x=Wm(m);x.resize(h,k),x.uploadBase(T.current),x.uploadRim(F.current);const E=ke.current,b=E&&Ln.current&&Mn.current&&En.current&&Nn.current&&Dn.current?{kind:"phase",resolution:E.resolution,gradX:Ln.current,gradY:Mn.current,vort:En.current,coh:Nn.current,amp:Dn.current}:null;b&&Bo(b,"gpu:parity-phase"),x.uploadPhase(b);const L={gl:m,renderer:x},_=h*k*4,z=new Uint8ClampedArray(_),U=new Uint8Array(_),oe=h*k,q=[{label:"scene-A",time:0},{label:"scene-B",time:.37},{label:"scene-C",time:.73}],se=[],Le=Dt.current;try{for(const V of q){const He=E&&Ln.current&&Mn.current&&En.current&&Nn.current&&Dn.current?{kind:"phase",resolution:E.resolution,gradX:Ln.current,gradY:Mn.current,vort:En.current,coh:Nn.current,amp:Dn.current}:null;He&&Bo(He,"gpu:parity-phase-loop"),x.uploadPhase(He),Je(z,V.time,!1),oo(L,V.time,!1),m.finish(),x.readPixels(U);let ue=0,ae=0,Fe=-1,qe=[0,0,0],_t=[0,0,0];for(let Xt=0;Xt<oe;Xt++){const dt=Xt*4,Gl=Math.abs(z[dt]-U[dt]),zu=Math.abs(z[dt+1]-U[dt+1]),ai=Math.abs(z[dt+2]-U[dt+2]),tl=Math.max(Gl,zu,ai);tl>ae&&(ae=tl,Fe=Xt,qe=[z[dt],z[dt+1],z[dt+2]],_t=[U[dt],U[dt+1],U[dt+2]]),tl>1&&ue++}const It=Fe>=0?[Fe%h,Math.floor(Fe/h)]:[0,0];ae>1&&console.warn(`[gpu-regression] ${V.label} worst Δ${ae.toFixed(2)} at (${It[0]},${It[1]}) CPU ${bi(qe)} GPU ${bi(_t)}`),se.push({label:V.label,mismatched:ue,percent:ue/oe*100,maxDelta:ae,maxCoord:It,cpuColor:qe,gpuColor:_t})}}finally{Dt.current=Le,x.dispose()}return{scenes:se,tolerancePercent:.5}},[F,C,T,h,k,Ln,Mn,En,Nn,Je,oo]),ao=S.useCallback((i=60)=>{if(!F.current||!T.current||!C.current)return console.warn("[perf] surface or rim field unavailable."),null;const m=Dt.current,x=h*k*4,E=new Uint8ClampedArray(x),b=performance.now();for(let V=0;V<i;V++){const He=V*.016666666666666666;Je(E,He,!1)}const _=(performance.now()-b)/i,z=_>0?1e3/_:1/0,U=$e();if(!U)return console.warn("[perf] GPU renderer unavailable."),Dt.current=m,null;const oe=performance.now();for(let V=0;V<i;V++){const He=V*.016666666666666666;oo(U,He,!1)}U.gl.finish();const se=(performance.now()-oe)/i,Le=se>0?1e3/se:1/0;return Dt.current=m,{frameCount:i,cpuMs:_,gpuMs:se,cpuFps:z,gpuFps:Le,throughputGain:_/se}},[F,C,T,h,k,Je,$e,oo]),ju=S.useCallback(async()=>{const i=await Ma();if(!i){tn(null);return}tn({...i,timestamp:Date.now()})},[Ma]),Ou=S.useCallback((i=120)=>{const m=ao(i);if(!m){zl(null);return}zl({...m,timestamp:Date.now()})},[ao]),Hl=S.useCallback(i=>{!i&&n.current&&(n.current.renderer.dispose(),n.current=null),i&&(r.current=!0),f(i?"gpu":"cpu")},[f]),rn=S.useMemo(()=>{if(!en||en.scenes.length===0)return null;const i=en.scenes.reduce((x,E)=>E.percent>x.percent?E:x,en.scenes[0]),m=i.percent<=en.tolerancePercent;return{worst:i,within:m,tolerance:en.tolerancePercent}},[en]),Nr=S.useMemo(()=>Ir?{cpuMs:Ir.cpuMs,gpuMs:Ir.gpuMs,cpuFps:Ir.cpuFps,gpuFps:Ir.gpuFps,throughputGain:Ir.throughputGain}:null,[Ir]),Ao=Eo==="recording",Kl=Eo==="finalizing",Bu=Nt.checked&&((No=Nt.best)==null?void 0:No.container)!=="mp4",Za=Nt.checked&&!!Nt.best&&Nt.best.container==="mp4",Lo=Kl||!Ao&&!Za,Ja=S.useMemo(()=>(_o/1e6).toFixed(1),[_o]);S.useEffect(()=>{if(typeof window>"u")return;const i=window.MediaRecorder;if(!i||typeof i.isTypeSupported!="function"){Wa({checked:!0,best:null});return}const x=[{mimeType:"video/mp4;codecs=avc1.4d402a",container:"mp4"},{mimeType:"video/mp4;codecs=avc1.4d401e",container:"mp4"},{mimeType:"video/mp4;codecs=h264",container:"mp4"},{mimeType:"video/mp4",container:"mp4"},{mimeType:"video/webm;codecs=vp9",container:"webm"},{mimeType:"video/webm;codecs=vp8",container:"webm"},{mimeType:"video/webm",container:"webm"}].find(E=>{try{return i.isTypeSupported(E.mimeType)}catch{return!1}});Wa({checked:!0,best:x??null})},[Wa]);const qa=S.useCallback(()=>{if(wn(null),Eo!=="idle")return;if(!Nt.checked){wn("Detecting capture support, please try again in a moment.");return}if(!Nt.best){wn("MediaRecorder is unavailable in this browser.");return}if(Nt.best.container!=="mp4"){wn("This browser cannot record MP4 directly. Try Safari 17+ or export WebM and convert with ffmpeg.");return}const i=e.current;if(!i){wn("Canvas is not ready yet.");return}if(typeof i.captureStream!="function"){wn("canvas.captureStream() is not supported in this environment.");return}const m=window.MediaRecorder;if(!m){wn("MediaRecorder constructor is missing on window.");return}s.current&&(URL.revokeObjectURL(s.current),s.current=null),Ga(null),l.current=[],u.current=Nt.best.mimeType;try{const x=i.captureStream(60);a.current=x;const E=x.getVideoTracks()[0];E&&typeof E.applyConstraints=="function"&&E.applyConstraints({frameRate:{ideal:60,max:60}}).catch(()=>{});const b=new m(x,{mimeType:Nt.best.mimeType,videoBitsPerSecond:_o});o.current=b,mr("recording"),b.ondataavailable=L=>{L.data&&L.data.size>0&&l.current.push(L.data)},b.onerror=L=>{const _=L.error,z=(_==null?void 0:_.message)??"Recorder error.";l.current=[],u.current=null,Cn(),o.current=null,mr("idle"),wn(z)},b.onstop=()=>{var Le;const L=l.current;l.current=[];const _=u.current??((Le=Nt.best)==null?void 0:Le.mimeType)??"video/mp4";if(u.current=null,Cn(),o.current=null,!L.length){mr("idle"),wn("Recorder produced no data.");return}const z=new Blob(L,{type:_}),U=new Date().toISOString().replace(/[:.]/g,"-"),oe=_.includes("mp4")?"mp4":_.includes("webm")?"webm":"mp4",q=`rainbow-perimeter-${U}.${oe}`;s.current&&URL.revokeObjectURL(s.current);const se=URL.createObjectURL(z);s.current=se,Ga({url:se,size:z.size,mimeType:_,filename:q}),mr("idle")},b.start(1e3)}catch(x){l.current=[],u.current=null,Cn(),o.current=null,mr("idle"),wn(x instanceof Error?x.message:String(x))}},[Nt,e,_o,Eo,Ga,Cn]),on=S.useCallback(()=>{const i=o.current;if(i){if(i.state==="inactive"){Cn(),o.current=null;return}mr("finalizing");try{i.stop()}catch(m){Cn(),o.current=null,l.current=[],u.current=null,mr("idle"),wn(m instanceof Error?m.message:String(m))}}},[Cn]);S.useEffect(()=>{if(typeof window>"u")return;const i=window;i.__setFrameProfiler=jn,i.__runFrameRegression=$l,i.__runGpuParityCheck=Ma,i.__measureRenderPerformance=ao;const m=x=>{Hl(x==="gpu")};return i.__setRenderBackend=m,i.__setTelemetryEnabled=x=>{pa(!!x)},i.__getTelemetryHistory=()=>[...Qe.current.history],()=>{i.__setFrameProfiler===jn&&delete i.__setFrameProfiler,i.__runFrameRegression===$l&&delete i.__runFrameRegression,i.__runGpuParityCheck===Ma&&delete i.__runGpuParityCheck,i.__measureRenderPerformance===ao&&delete i.__measureRenderPerformance,i.__setRenderBackend===m&&delete i.__setRenderBackend,i.__setTelemetryEnabled===pa&&delete i.__setTelemetryEnabled,i.__getTelemetryHistory&&delete i.__getTelemetryHistory}},[jn,$l,Ma,ao,Hl,pa]),S.useEffect(()=>{const i=e.current;if(!i)return;let m=!0,x=0;const E=performance.now();if(p==="gpu"){const _=()=>{if(!m)return;const z=$e();if(!z){m=!1;return}const U=Qe.current.enabled?performance.now():0,oe=(performance.now()-E)*.001,q=.016*ge;Ca(q,oe),ka(q),oo(z,oe,!0),U&&xt("frame",performance.now()-U),x=requestAnimationFrame(_)};return _(),()=>{m=!1,cancelAnimationFrame(x)}}const b=i.getContext("2d",{willReadFrequently:!0});if(!b)return;i.width=h,i.height=k;const L=()=>{if(!m)return;const _=(performance.now()-E)*.001;oi(b,_),x=requestAnimationFrame(L)};return L(),()=>{m=!1,cancelAnimationFrame(x)}},[p,$e,oo,oi,Ca,ka,ge,h,k,xt]),S.useEffect(()=>()=>{const i=o.current;if(i&&i.state!=="inactive")try{i.stop()}catch{}o.current=null,l.current=[],u.current=null,Cn(),s.current&&(URL.revokeObjectURL(s.current),s.current=null)},[Cn]);const wt=S.useCallback((i,m)=>{const x=i.width,E=i.height;M(x),P(E),T.current=i;const b=Ry(i);hc(b,"io:surface"),C.current=b,dn("surface",b.resolution,m);const L=yv({data:i.data,width:x,height:E});Gi(L,"io:rim"),F.current=L,dn("rim",L.resolution,m),r.current=!0;const _=n.current;_&&_.renderer.resize(x,E),Ve(),Jr.current=.6,Dt.current=.6},[dn,Ve]),Ft=S.useCallback(i=>{const m=Fi.find(z=>z.id===i);if(!m){console.warn(`[synthetic] unknown case ${i}`);return}Xa(i);const{width:x,height:E}=Fv,b=m.generate(x,E);wt(b,`dev:${i}`),me&&pn(),(!Re.current||Re.current.length!==x*E*4)&&(Re.current=new Uint8ClampedArray(x*E*4));const L=Re.current,_=Je(L,0,!1);if(_){ti(q=>({...q,[i]:{metrics:_,timestamp:Date.now()}}));const z=_.composer.fields.rim.energy.toFixed(3),U=_.composer.fields.surface.energy.toFixed(3),oe=_.gradient.cohMean.toFixed(3);console.log(`[synthetic] ${m.label} rim=${z} surface=${U} |Z|=${oe}`)}},[pn,wt,me,Je,Xa]),el=S.useCallback(i=>{if(typeof document>"u"){console.warn("[coupling-diff] document unavailable for export");return}if(!T.current||!F.current){console.warn("[coupling-diff] base image or rim field not ready");return}const m=h*k*4,x=new Uint8ClampedArray(m),E=new Uint8ClampedArray(m),b={rimToSurface:i==="rimToSurface"?!1:fr.rimToSurface,surfaceToRim:i==="surfaceToRim"?!1:fr.surfaceToRim},L=Je(x,0,!1),_=Je(E,0,!1,void 0,{toggles:b});if(!L||!_){console.warn("[coupling-diff] unable to compute frame metrics");return}const z=new Uint8ClampedArray(m);let U=0;for(let ue=0;ue<m;ue+=4){const ae=Math.abs(x[ue]-E[ue]),Fe=Math.abs(x[ue+1]-E[ue+1]),qe=Math.abs(x[ue+2]-E[ue+2]),_t=Math.max(ae,Fe,qe),It=Math.min(255,_t*4);z[ue+0]=It,z[ue+1]=It,z[ue+2]=It,z[ue+3]=255,_t>U&&(U=_t)}if(U<=0){console.warn(`[coupling-diff] delta is empty for ${i}`);return}const oe=document.createElement("canvas");oe.width=h,oe.height=k;const q=oe.getContext("2d");if(!q){console.warn("[coupling-diff] failed to create canvas context");return}const se=new ImageData(z,h,k);q.putImageData(se,0,0);const Le=oe.toDataURL("image/png"),V=new Date().toISOString().replace(/[:.]/g,"-"),He=document.createElement("a");He.href=Le,He.download=`coupling-diff-${i}-${V}.png`,He.click(),console.log(`[coupling-diff] ${i} maxΔ=${U.toFixed(1)} rim=${L.composer.fields.rim.energy.toFixed(3)}→${_.composer.fields.rim.energy.toFixed(3)} surface=${L.composer.fields.surface.energy.toFixed(3)}→${_.composer.fields.surface.energy.toFixed(3)}`)},[fr,Je,h,k]),an=S.useCallback(()=>{Fi.forEach(i=>Ft(i.id))},[Ft]),Pe=S.useCallback(async i=>{var q;const m=(q=i.target.files)==null?void 0:q[0];if(!m)return;const x=await createImageBitmap(m),b=Math.min(1,1e3/Math.max(x.width,x.height)),L=Math.max(1,Math.round(x.width*b)),_=Math.max(1,Math.round(x.height*b));M(L),P(_),R(x);const z=document.createElement("canvas");z.width=L,z.height=_;const U=z.getContext("2d",{willReadFrequently:!0});if(!U)return;U.drawImage(x,0,0,L,_);const oe=U.getImageData(0,0,L,_);wt(oe,"io:file")},[wt]),je=S.useCallback(i=>{const m=i.params;r.current=!0,f("gpu"),wo(!1),j(m.edgeThreshold),Se(m.blend),Vr(Os(m.kernel)),sa(m.dmt),Kn(m.thetaMode),ia(m.thetaGlobal),we(m.beta2),de(m.jitter),ce(m.sigma),te(m.microsaccade),qt(m.speed),B(m.contrast),Tr(ll(i.coupling)),za(Mf(i.composer)),jl(i.couplingToggles?rp(i.couplingToggles):Cf)},[]),Ae=S.useCallback(()=>{var i;return{name:((i=_i[Ht])==null?void 0:i.name)??"Custom snapshot",params:{edgeThreshold:I,blend:G,kernel:Sd(xe),dmt:We,thetaMode:Xe,thetaGlobal:pt,beta2:Z,jitter:Ee,sigma:Q,microsaccade:ve,speed:ge,contrast:ze},coupling:ll(gt),composer:Mf(Sn),couplingToggles:rp(fr)}},[Ht,I,G,xe,We,Xe,pt,Z,Ee,Q,ve,ge,ze,gt,Sn,fr]),Yt=S.useCallback(()=>{const i=Ae(),m={version:2,preset:i},x=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),E=URL.createObjectURL(x),b=`${i.name.toLowerCase().replace(/[^a-z0-9]+/g,"-")||"preset"}.json`,L=document.createElement("a");L.href=E,L.download=b,L.click(),URL.revokeObjectURL(E)},[Ae]),lt=S.useCallback(()=>{const i=t.current;i&&(i.value="",i.click())},[]),qn=S.useCallback(async i=>{var x,E,b,L,_,z,U,oe,q;const m=(x=i.target.files)==null?void 0:x[0];if(i.target.value="",!!m)try{const se=await m.text(),Le=JSON.parse(se),V=(Le==null?void 0:Le.preset)??Le;if(!(V!=null&&V.params)){console.error("[preset] invalid payload");return}const He={name:typeof V.name=="string"?V.name:"Imported preset",params:{edgeThreshold:typeof V.params.edgeThreshold=="number"?V.params.edgeThreshold:I,blend:typeof V.params.blend=="number"?V.params.blend:G,kernel:Os({gain:((E=V.params.kernel)==null?void 0:E.gain)??xe.gain,k0:((b=V.params.kernel)==null?void 0:b.k0)??xe.k0,Q:((L=V.params.kernel)==null?void 0:L.Q)??xe.Q,anisotropy:((_=V.params.kernel)==null?void 0:_.anisotropy)??xe.anisotropy,chirality:((z=V.params.kernel)==null?void 0:z.chirality)??xe.chirality,transparency:((U=V.params.kernel)==null?void 0:U.transparency)??xe.transparency}),dmt:typeof V.params.dmt=="number"?V.params.dmt:We,thetaMode:V.params.thetaMode==="global"?"global":"gradient",thetaGlobal:typeof V.params.thetaGlobal=="number"?V.params.thetaGlobal:pt,beta2:typeof V.params.beta2=="number"?V.params.beta2:Z,jitter:typeof V.params.jitter=="number"?V.params.jitter:Ee,sigma:typeof V.params.sigma=="number"?V.params.sigma:Q,microsaccade:V.params.microsaccade??ve,speed:typeof V.params.speed=="number"?V.params.speed:ge,contrast:typeof V.params.contrast=="number"?V.params.contrast:ze},coupling:bv(V.coupling,gt),composer:Av(V.composer),couplingToggles:{rimToSurface:((oe=V.couplingToggles)==null?void 0:oe.rimToSurface)!==void 0?!!V.couplingToggles.rimToSurface:!0,surfaceToRim:((q=V.couplingToggles)==null?void 0:q.surfaceToRim)!==void 0?!!V.couplingToggles.surfaceToRim:!0}};je(He)}catch(se){console.error("[preset] failed to import",se)}},[je,gt,I,G,xe,We,Xe,pt,Z,Ee,Q,ve,ge,ze]);return S.useEffect(()=>{je(_i[Ht])},[Ht,je]),S.useEffect(()=>()=>{n.current&&(n.current.renderer.dispose(),n.current=null)},[]),S.useEffect(()=>{r.current=!0,Ve()},[h,k,Ve]),v.jsxs("main",{style:{height:"100vh",padding:"2rem",display:"flex",flexDirection:"column",gap:"1.5rem",overflow:"hidden"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{margin:0,fontSize:"2.2rem"},children:"Rainbow Perimeter Lab"}),v.jsx("p",{style:{maxWidth:"52rem",color:"#94a3b8"},children:"Upload a photo, apply the Rainbow Rims preset, then fine tune the kernel, DMT gain, surface wallpaper morph, and Kuramoto coupling to explore the hallucinatory perimeter lines described in the design brief."})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(22rem, 27rem) 1fr",gap:"1.5rem",alignItems:"stretch",flex:1,minHeight:0},children:[v.jsxs("div",{className:"panel",style:{gap:"1.25rem",overflowY:"auto",height:"100%",minHeight:0,paddingRight:"1.25rem"},children:[v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Image & Preset"}),v.jsxs("div",{className:"control",children:[v.jsx("label",{htmlFor:"file-input",children:"Upload image"}),v.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:Pe})]}),v.jsx(Oo,{label:"Preset",value:Ht.toString(),onChange:i=>Ka(parseInt(i,10)),options:_i.map((i,m)=>({value:m.toString(),label:i.name}))}),v.jsx("button",{onClick:()=>je(_i[Ht]),style:{padding:"0.5rem 0.75rem",borderRadius:"0.6rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(14, 116, 144, 0.2)",color:"#f8fafc",cursor:"pointer"},children:"Apply preset"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[v.jsx("button",{onClick:Yt,style:{padding:"0.4rem 0.65rem",borderRadius:"0.55rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,118,110,0.18)",color:"#e0f2fe",cursor:"pointer"},children:"Export preset"}),v.jsx("button",{onClick:lt,style:{padding:"0.4rem 0.65rem",borderRadius:"0.55rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(30,64,175,0.18)",color:"#e0e7ff",cursor:"pointer"},children:"Import preset"}),v.jsx("input",{ref:t,type:"file",accept:"application/json",style:{display:"none"},onChange:qn})]})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Diagnostics"}),v.jsx(Ot,{label:"Use GPU renderer",value:p==="gpu",onChange:Hl}),v.jsx(Ot,{label:"Telemetry logging",value:Yn,onChange:pa}),v.jsx(Ot,{label:"Frame metric logging",value:Mo,onChange:qs}),v.jsx(Ot,{label:"Enable rim generator",value:Be,onChange:Ut}),v.jsx(Ot,{label:"Rim debug overlays",value:Ie,onChange:Vt}),v.jsx(Ot,{label:"Surface flow debug",value:N,onChange:$}),v.jsx(Ot,{label:"Phase amplitude histogram",value:O,onChange:ee}),v.jsx(Ot,{label:"Phase alignment heatmap",value:fn,onChange:Ul}),v.jsxs("div",{className:"control",children:[v.jsx("button",{onClick:()=>ju(),style:{padding:"0.5rem 0.75rem",borderRadius:"0.6rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(147, 197, 253, 0.18)",color:"#f8fafc",cursor:"pointer"},children:"Run GPU parity check"}),rn&&v.jsxs("small",{style:{display:"block",marginTop:"0.4rem",color:rn.within?"#38bdf8":"#f87171"},children:["worst ",rn.worst.label,": Δ",v.jsx("span",{style:{fontFamily:"monospace"},children:rn.worst.maxDelta.toFixed(2)})," ","| ",rn.worst.percent.toFixed(2),"% <= ",rn.tolerance.toFixed(2),"%?"," ",rn.within?"OK":"Check reference",!rn.within&&v.jsxs(v.Fragment,{children:[v.jsx("br",{}),v.jsxs("span",{children:["pixel (",rn.worst.maxCoord[0],", ",rn.worst.maxCoord[1],") CPU"," ",bi(rn.worst.cpuColor)," vs GPU"," ",bi(rn.worst.gpuColor)]})]})]})]}),v.jsxs("div",{className:"control",children:[v.jsx("button",{onClick:()=>Ou(),style:{padding:"0.5rem 0.75rem",borderRadius:"0.6rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(94, 234, 212, 0.18)",color:"#f8fafc",cursor:"pointer"},children:"Measure render throughput (120 frames)"}),Nr&&v.jsxs("small",{style:{display:"block",marginTop:"0.4rem",color:"#94a3b8"},children:["GPU ",Nr.gpuFps.toFixed(0)," fps (~",Nr.throughputGain.toFixed(1),"× vs"," ",Nr.cpuMs.toFixed(1)," ms CPU)"]})]}),Ie&&kn||N&&ya||O&&Po?v.jsxs("div",{className:"control",style:{display:"flex",flexDirection:"column",gap:"0.75rem",background:"rgba(15,23,42,0.45)",borderRadius:"0.85rem",padding:"0.75rem"},children:[Ie&&kn&&v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:[v.jsx(Ai,{title:"Rim energy",bins:kn.energyHist,defaultColor:"#f97316",rangeLabel:`${kn.energyRange[0].toFixed(2)} – ${kn.energyRange[1].toFixed(2)}`}),v.jsx(Ai,{title:"Rim hue",bins:kn.hueHist,colorForBin:i=>`hsl(${i/Math.max(kn.hueHist.length-1,1)*360}, 80%, 60%)`,rangeLabel:`${(kn.hueRange[0]*360).toFixed(0)}° – ${(kn.hueRange[1]*360).toFixed(0)}°`})]}),N&&ya&&v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",color:"#cbd5f5"},children:[v.jsx("span",{children:"Surface flow magnitudes"}),v.jsxs("span",{children:["max ",ya.magnitudeMax.toFixed(2)]})]}),ya.magnitudeHist.map((i,m)=>v.jsx(Ai,{title:`Orientation ${m+1}`,bins:i,defaultColor:"#38bdf8"},`surface-hist-${m}`))]}),O&&Po&&v.jsx(Ai,{title:"Phase amplitude |Z|",bins:Po.ampHist,defaultColor:"#a855f7",rangeLabel:`${Po.ampRange[0].toFixed(2)} – ${Po.ampRange[1].toFixed(2)}`}),fn&&Vl&&v.jsx(Hv,{snapshot:Vl})]}):null,v.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gap:"0.4rem"},children:ri.map(i=>{const m=Bv[i.state],x=zv[i.state],E=i.resolution?`${i.resolution.width}×${i.resolution.height}`:"—",b=i.state==="missing"?"offline":i.stalenessMs===Number.POSITIVE_INFINITY?"idle":`${i.stalenessMs.toFixed(0)}ms`;return v.jsxs("div",{style:{border:`1px solid ${m.border}`,background:m.background,color:m.color,borderRadius:"0.65rem",padding:"0.45rem 0.6rem",display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[v.jsx("div",{style:{fontWeight:600},children:i.label}),v.jsxs("div",{style:{fontSize:"0.75rem",fontFamily:"monospace"},children:[x," · ",E," · ",b]})]},i.kind)})})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Dev Deck"}),v.jsx(Oo,{label:"Synthetic case",value:Sa,onChange:i=>Xa(i),options:Fi.map(i=>({value:i.id,label:i.label}))}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[v.jsx("button",{onClick:()=>Ft(Sa),style:{padding:"0.4rem 0.65rem",borderRadius:"0.55rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(30, 64, 175, 0.18)",color:"#e0e7ff",cursor:"pointer"},children:"Load selected case"}),v.jsx("button",{onClick:an,style:{padding:"0.4rem 0.65rem",borderRadius:"0.55rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(59, 130, 246, 0.2)",color:"#e0f2fe",cursor:"pointer"},children:"Run full deck"})]}),v.jsx("small",{style:{display:"block",color:"#94a3b8",marginTop:"0.35rem"},children:"Records rim, surface, and |Z| baselines for analytics."}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.75rem"},children:Fi.map(i=>{const m=ei[i.id];return v.jsxs("div",{style:{border:"1px solid rgba(148,163,184,0.3)",borderRadius:"0.65rem",background:"rgba(15,23,42,0.4)",padding:"0.55rem 0.65rem"},children:[v.jsx("div",{style:{fontWeight:600,color:"#e2e8f0"},children:i.label}),v.jsx("div",{style:{fontSize:"0.75rem",color:"#94a3b8",marginTop:"0.25rem"},children:i.description}),m?v.jsxs("div",{style:{marginTop:"0.4rem",fontFamily:"monospace",fontSize:"0.8rem",color:"#a5b4fc"},children:["rim ",m.metrics.composer.fields.rim.energy.toFixed(3)," · surface ",m.metrics.composer.fields.surface.energy.toFixed(3)," · |Z| ",m.metrics.gradient.cohMean.toFixed(3)," · ",new Date(m.timestamp).toLocaleTimeString()]}):v.jsx("div",{style:{marginTop:"0.4rem",fontFamily:"monospace",fontSize:"0.8rem",color:"#64748b"},children:"No baseline recorded yet."})]},i.id)})})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Output"}),v.jsxs("div",{className:"control",children:[v.jsx("label",{children:"MP4 capture"}),v.jsxs("div",{className:"control-row",children:[v.jsx("button",{onClick:()=>Ao?on():qa(),disabled:Lo,style:{padding:"0.5rem 0.75rem",borderRadius:"0.6rem",border:"1px solid rgba(148,163,184,0.35)",background:Ao?"rgba(248, 113, 113, 0.25)":"rgba(59, 130, 246, 0.25)",color:"#f8fafc",cursor:Lo?"not-allowed":"pointer",opacity:Lo?.6:1},children:Ao?"Stop capture":Kl?"Finalizing…":"Start MP4 capture"}),(Ao||Kl)&&v.jsx("span",{style:{color:"#fbbf24"},children:Ao?"Recording…":"Finalizing…"})]}),!Nt.checked&&v.jsx("small",{style:{color:"#94a3b8"},children:"Checking browser capture support…"}),v.jsxs("small",{style:{color:"#94a3b8"},children:["Canvas ",h,"×",k,"px · 60 fps · target ",Ja," Mbps"]}),Ro&&v.jsx("small",{style:{color:"#f87171"},children:Ro}),Bu&&v.jsxs("small",{style:{color:"#f97316"},children:["MP4 capture unsupported (best available:"," ",Nt.best?Nt.best.mimeType:"none",")."]}),To&&v.jsxs("small",{style:{color:"#38bdf8"},children:["MP4 ready:"," ",v.jsxs("a",{href:To.url,download:To.filename,style:{color:"#38bdf8"},children:["Download (",Nv(To.size),")"]})]})]})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Rainbow Rims"}),v.jsx(ne,{label:"Edge Threshold",value:I,min:0,max:1,step:.01,onChange:j}),v.jsx(ne,{label:"Kernel Blend",value:G,min:0,max:1,step:.01,onChange:Se}),v.jsx(ne,{label:"Dispersion β₂",value:Z,min:0,max:3,step:.01,onChange:we}),v.jsx(ne,{label:"Rim Thickness σ",value:Q,min:.3,max:6,step:.05,onChange:ce}),v.jsx(ne,{label:"Phase Jitter",value:Ee,min:0,max:2,step:.02,onChange:de}),v.jsx(ne,{label:"Contrast",value:ze,min:.25,max:3,step:.05,onChange:B}),v.jsx(ne,{label:"Animation Speed",value:ge,min:0,max:3,step:.05,onChange:qt}),v.jsx(Ot,{label:"Microsaccade jitter",value:ve,onChange:te}),v.jsx(Ot,{label:"Zero-mean pin",value:Lt,onChange:$r}),v.jsx(Ot,{label:"Alive microbreath",value:Mt,onChange:Hr}),v.jsx(ne,{label:"Rim Alpha",value:ot,min:0,max:1,step:.05,onChange:ye})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Kernel + DMT"}),v.jsx(ne,{label:"Kernel Gain",value:xe.gain,min:0,max:5,step:.05,onChange:i=>$t({gain:i})}),v.jsx(ne,{label:"Spatial Frequency k₀",value:xe.k0,min:.01,max:.4,step:.01,onChange:i=>$t({k0:i})}),v.jsx(ne,{label:"Sharpness Q",value:xe.Q,min:.5,max:8,step:.05,onChange:i=>$t({Q:i})}),v.jsx(ne,{label:"Anisotropy",value:xe.anisotropy,min:0,max:1.5,step:.05,onChange:i=>$t({anisotropy:i})}),v.jsx(ne,{label:"Chirality",value:xe.chirality,min:0,max:2,step:.05,onChange:i=>$t({chirality:i})}),v.jsx(ne,{label:"Transparency",value:xe.transparency,min:0,max:1,step:.05,onChange:i=>$t({transparency:i})}),v.jsx(ne,{label:"DMT Gain",value:We,min:0,max:1,step:.01,onChange:sa})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Surface Morph"}),v.jsx(Ot,{label:"Enable surface morph",value:cr,onChange:Ws}),v.jsx(ne,{label:"Surface blend",value:Yr,min:0,max:1,step:.02,onChange:Xs}),v.jsx(ne,{label:"Warp amplitude",value:Xr,min:0,max:6,step:.1,onChange:Qs}),v.jsx(ne,{label:"Orientations",value:Wr,min:2,max:8,step:1,onChange:Ys,format:i=>i.toFixed(0)}),v.jsx(Oo,{label:"Wallpaper group",value:Gr,onChange:i=>Dl(i),options:[{value:"off",label:"Off"},{value:"p1",label:"p1"},{value:"p2",label:"p2"},{value:"pm",label:"pm"},{value:"pg",label:"pg"},{value:"cm",label:"cm"},{value:"pmm",label:"pmm"},{value:"pmg",label:"pmg"},{value:"pgg",label:"pgg"},{value:"cmm",label:"cmm"},{value:"p4",label:"p4"},{value:"p4g",label:"p4g"},{value:"p4m",label:"p4m"},{value:"p3",label:"p3"},{value:"p31m",label:"p31m"},{value:"p3m1",label:"p3m1"},{value:"p6",label:"p6"},{value:"p6m",label:"p6m"}]}),v.jsx(Oo,{label:"Region",value:Qr,onChange:i=>Zs(i),options:[{value:"surfaces",label:"Surfaces"},{value:"edges",label:"Edges"},{value:"both",label:"Both"}]})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"3D Volume"}),v.jsx(Ot,{label:"Enable 3D volume feed",value:dr,onChange:wo}),v.jsx("div",{className:"control-hint",children:"Volume couplers wake once the feed is live. Press play and try the sliders below."})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Coupling Fabric"}),v.jsx(Ot,{label:"Enable rims → surface coupling",value:fr.rimToSurface,onChange:Js("rimToSurface")}),v.jsx(Ot,{label:"Enable surface → rims coupling",value:fr.surfaceToRim,onChange:Js("surfaceToRim")}),v.jsx("h3",{children:"Rims → Surface"}),v.jsx(ne,{label:"Energy → surface blend",value:gt.rimToSurfaceBlend,min:0,max:1,step:.01,onChange:Gn("rimToSurfaceBlend"),format:i=>i.toFixed(2)}),v.jsx(ne,{label:"Tangent alignment weight",value:gt.rimToSurfaceAlign,min:0,max:1,step:.01,onChange:Gn("rimToSurfaceAlign"),format:i=>i.toFixed(2)}),v.jsx("h3",{children:"Surface → Rims"}),v.jsx(ne,{label:"Warp gradient → offset bias",value:gt.surfaceToRimOffset,min:0,max:1,step:.01,onChange:Gn("surfaceToRimOffset"),format:i=>i.toFixed(2)}),v.jsx(ne,{label:"Warp gradient → sigma thinning",value:gt.surfaceToRimSigma,min:0,max:1,step:.01,onChange:Gn("surfaceToRimSigma"),format:i=>i.toFixed(2)}),v.jsx(ne,{label:"Lattice phase → hue bias",value:gt.surfaceToRimHue,min:0,max:1,step:.01,onChange:Gn("surfaceToRimHue"),format:i=>i.toFixed(2)}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",margin:"0.5rem 0 1rem"},children:[v.jsx("button",{onClick:()=>el("rimToSurface"),style:{padding:"0.4rem 0.65rem",borderRadius:"0.55rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(59, 130, 246, 0.18)",color:"#e0f2fe",cursor:"pointer"},children:"Export rim→surface diff"}),v.jsx("button",{onClick:()=>el("surfaceToRim"),style:{padding:"0.4rem 0.65rem",borderRadius:"0.55rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(14, 165, 233, 0.18)",color:"#cffafe",cursor:"pointer"},children:"Export surface→rim diff"})]}),v.jsx("h3",{children:"Kuramoto Adapters"}),v.jsx(ne,{label:"|Z| → transparency",value:gt.kurToTransparency,min:0,max:1,step:.01,onChange:Gn("kurToTransparency"),format:i=>i.toFixed(2)}),v.jsx(ne,{label:"∇θ → orientation blend",value:gt.kurToOrientation,min:0,max:1,step:.01,onChange:Gn("kurToOrientation"),format:i=>i.toFixed(2)}),v.jsx(ne,{label:"Vorticity → chirality",value:gt.kurToChirality,min:0,max:1,step:.01,onChange:Gn("kurToChirality"),format:i=>i.toFixed(2)}),v.jsx("h3",{children:"Volume → 2D"}),v.jsx(ne,{label:"Phase → rim hue",value:gt.volumePhaseToHue,min:0,max:1,step:.01,onChange:Gn("volumePhaseToHue"),format:i=>i.toFixed(2)}),v.jsx(ne,{label:"Depth grad → warp amp",value:gt.volumeDepthToWarp,min:0,max:1,step:.01,onChange:Gn("volumeDepthToWarp"),format:i=>i.toFixed(2)})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Composer"}),v.jsx(Oo,{label:"DMT routing",value:Sn.dmtRouting,onChange:i=>Nu(i),options:[{value:"auto",label:"Auto"},{value:"rimBias",label:"Rim bias"},{value:"surfaceBias",label:"Surface bias"}]}),v.jsx(Oo,{label:"Solver regime",value:Sn.solverRegime,onChange:i=>Md(i),options:[{value:"balanced",label:"Balanced"},{value:"rimLocked",label:"Rim locked"},{value:"surfaceLocked",label:"Surface locked"}]}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:tr.map(i=>{const m=Sn.fields[i],x=ap[i];return v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.jsx("h3",{style:{margin:0},children:x}),v.jsx(ne,{label:"Exposure",value:m.exposure,min:0,max:4,step:.05,onChange:be(i,"exposure"),format:E=>E.toFixed(2)}),v.jsx(ne,{label:"Gamma",value:m.gamma,min:.2,max:3,step:.05,onChange:be(i,"gamma"),format:E=>E.toFixed(2)}),v.jsx(ne,{label:"Weight",value:m.weight,min:0,max:2.5,step:.05,onChange:be(i,"weight"),format:E=>E.toFixed(2)})]},i)})})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Kuramoto Field"}),v.jsx(Ot,{label:"Enable OA field",value:me,onChange:ca}),v.jsx(Ot,{label:"Sync to main thread",value:Wn,onChange:Ua}),v.jsx(Oo,{label:"Regime",value:Kr,onChange:i=>{const m=i;m==="custom"?xo("custom"):Pt(m)},options:[{value:"locked",label:ls.locked.label},{value:"highEnergy",label:ls.highEnergy.label},{value:"chaotic",label:ls.chaotic.label},{value:"custom",label:"Custom (manual)"}]}),Kr!=="custom"&&v.jsx("small",{style:{display:"block",color:"#94a3b8",marginTop:"0.35rem"},children:ls[Kr].description}),v.jsx(ne,{label:"Coupling K₀",value:Pr,min:0,max:2,step:.05,onChange:i=>{On(),ko(i)}}),v.jsx(ne,{label:"Phase lag α",value:Ne,min:-Math.PI,max:Math.PI,step:.05,onChange:i=>{On(),fa(i)}}),v.jsx(ne,{label:"Line width γ",value:Co,min:0,max:1,step:.02,onChange:i=>{On(),Ol(i)}}),v.jsx(ne,{label:"Mean freq ω₀",value:da,min:-2,max:2,step:.05,onChange:i=>{On(),Va(i)}}),v.jsx(ne,{label:"Noise ε",value:Fr,min:0,max:.02,step:5e-4,onChange:i=>{On(),$a(i)},format:i=>i.toFixed(4)}),v.jsx(ne,{label:"Flux φₓ",value:bn,min:0,max:Math.PI*2,step:.01,onChange:i=>{On(),Du(i)},format:i=>`${(i/Math.PI).toFixed(2)}π`}),v.jsx(ne,{label:"Flux φ_y",value:_r,min:0,max:Math.PI*2,step:.01,onChange:i=>{On(),ma(i)},format:i=>`${(i/Math.PI).toFixed(2)}π`}),v.jsx(ne,{label:"Init twist q",value:Et,min:0,max:4,step:1,onChange:Ha,format:i=>i.toFixed(0)}),v.jsx("button",{onClick:De,style:{padding:"0.5rem 0.75rem",borderRadius:"0.6rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(30, 64, 175, 0.25)",color:"#f8fafc",cursor:"pointer"},children:"Reset Z-field"})]}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Display"}),v.jsx(Oo,{label:"Display mode",value:Rr,onChange:i=>Ct(i),options:[{value:"color",label:"Color base + color rims"},{value:"grayBaseColorRims",label:"Gray base + color rims"},{value:"grayBaseGrayRims",label:"Gray base + gray rims"},{value:"colorBaseGrayRims",label:"Color base + gray rims"},{value:"colorBaseBlendedRims",label:"Color base + blended rims"}]}),v.jsx(ne,{label:"Polar bins",value:ht,min:0,max:32,step:1,onChange:vo,format:i=>i.toFixed(0)}),v.jsx(Ot,{label:"Normalization pin",value:xn,onChange:Ba})]})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",overflowY:"auto",height:"100%",minHeight:0,paddingRight:"0.75rem"},children:[v.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:`${Math.min(h,1e3)}px`,maxHeight:`${Math.min(k,1e3)}px`,aspectRatio:`${h} / ${k}`,borderRadius:"1.25rem",border:"1px solid rgba(148,163,184,0.2)",boxShadow:"0 20px 60px rgba(15,23,42,0.65)",overflow:"hidden"},children:[v.jsx("canvas",{ref:e,width:h,height:k,style:{width:"100%",height:"100%",display:"block"}}),v.jsx("div",{style:{position:"absolute",top:"0.75rem",left:"0.75rem",padding:"0.25rem 0.6rem",borderRadius:"9999px",background:"rgba(15,23,42,0.65)",color:"#e2e8f0",fontSize:"0.75rem",letterSpacing:"0.02em",fontWeight:500,pointerEvents:"none"},children:`Flux (φₓ=${bn.toFixed(2)}, φ_y=${_r.toFixed(2)})`})]}),v.jsx("p",{style:{color:"#64748b",margin:0},children:"Tip: enable the OA field once you have rims dialed in, then gradually increase K₀ and lower ε to let the oscillator field steer both rims and surface morph in a coherent way."}),v.jsxs("section",{className:"panel",children:[v.jsx("h2",{children:"Telemetry"}),ha?v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(11rem, 1fr))",gap:"0.75rem"},children:tr.map(i=>{const m=ha.fields[i];return v.jsxs("div",{style:{background:"rgba(15,23,42,0.45)",borderRadius:"0.75rem",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.35rem"},children:[v.jsx("strong",{style:{color:"#e2e8f0"},children:ap[i]}),v.jsxs("span",{style:{fontSize:"0.8rem",color:"#a5b4fc"},children:["Energy ",m.energy.toFixed(3)]}),v.jsxs("span",{style:{fontSize:"0.8rem",color:"#cbd5f5"},children:["Blend ",(m.blend*100).toFixed(1),"%"]}),v.jsxs("span",{style:{fontSize:"0.8rem",color:"#cbd5f5"},children:["Share ",(m.share*100).toFixed(1),"%"]}),v.jsxs("span",{style:{fontSize:"0.8rem",color:"#94a3b8"},children:["Weight ",m.weight.toFixed(2)]})]},i)})}),v.jsxs("div",{style:{background:"rgba(15,23,42,0.45)",borderRadius:"0.75rem",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.jsxs("div",{style:{color:"#e2e8f0",fontWeight:600},children:["Coupling scale ",ha.coupling.scale.toFixed(2)]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(13rem, 1fr))",gap:"0.5rem"},children:Object.entries(ha.coupling.effective).map(([i,m])=>v.jsxs("div",{style:{fontSize:"0.75rem",color:"#cbd5f5"},children:[v.jsx("strong",{style:{color:"#facc15"},children:Lv(i)}),": ",m.toFixed(2)]},i))})]})]}):v.jsx("p",{style:{color:"#94a3b8",margin:0},children:Yn?"Collecting telemetry…":"Telemetry disabled."})]})]})]})]})}const Ai=({title:e,bins:t,defaultColor:n="#38bdf8",colorForBin:r,rangeLabel:o})=>{const a=t.reduce((l,s)=>s>l?s:l,0);return v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.45rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",color:"#cbd5f5"},children:[v.jsx("span",{children:e}),o?v.jsx("span",{children:o}):null]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${t.length}, 1fr)`,alignItems:"end",gap:"2px",height:"64px",background:"rgba(15,23,42,0.45)",borderRadius:"0.6rem",padding:"6px"},children:t.map((l,s)=>{const u=a>0?l/a:0,c=r?r(s,l,a):n;return v.jsx("span",{style:{display:"block",width:"100%",height:`${Math.max(u*100,2)}%`,background:c,borderRadius:"0.35rem 0.35rem 0 0"}},s)})})]})},$v=e=>{const t=Math.min(1,Math.max(0,e)),n=Math.round(255*t),r=Math.round(255*Math.sin(t*Math.PI)),o=Math.round(255*(1-t*.85));return[n,r,o]},Hv=({snapshot:e})=>{const t=gp.useRef(null);return S.useEffect(()=>{const n=t.current;if(!n)return;const r=n.getContext("2d");if(!r)return;const{width:o,height:a,values:l,min:s,max:u}=e,c=Math.max(1e-6,u-s),y=r.createImageData(o,a);for(let d=0;d<l.length;d++){const w=(l[d]-s)/c,[h,M,k]=$v(w),P=d*4;y.data[P+0]=h,y.data[P+1]=M,y.data[P+2]=k,y.data[P+3]=255}r.putImageData(y,0,0)},[e]),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",color:"#cbd5f5"},children:[v.jsx("span",{children:"Phase alignment heatmap"}),v.jsxs("span",{children:[e.min.toFixed(3)," – ",e.max.toFixed(3)]})]}),v.jsx("canvas",{ref:t,width:e.width,height:e.height,style:{width:"160px",height:"160px",borderRadius:"0.6rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.35)"}})]})};function ne({label:e,value:t,min:n,max:r,step:o,onChange:a,format:l}){return v.jsxs("div",{className:"control",children:[v.jsx("label",{children:e}),v.jsxs("div",{className:"control-row",children:[v.jsx("input",{type:"range",min:n,max:r,step:o,value:t,onChange:s=>a(parseFloat(s.target.value))}),v.jsx("span",{children:l?l(t):t.toFixed(2)})]})]})}function Ot({label:e,value:t,onChange:n}){return v.jsxs("div",{className:"control",children:[v.jsx("label",{children:e}),v.jsxs("div",{className:"control-row",children:[v.jsx("input",{type:"checkbox",checked:t,onChange:r=>n(r.target.checked)}),v.jsx("span",{children:t?"On":"Off"})]})]})}function Oo({label:e,value:t,onChange:n,options:r}){return v.jsxs("div",{className:"control",children:[v.jsx("label",{children:e}),v.jsx("select",{value:t,onChange:o=>n(o.target.value),style:{padding:"0.45rem 0.6rem",borderRadius:"0.6rem",border:"1px solid rgba(148,163,184,0.35)",background:"rgba(15,23,42,0.7)",color:"#e2e8f0"},children:r.map(o=>v.jsx("option",{value:o.value,children:o.label},o.value))})]})}Tc.createRoot(document.getElementById("root")).render(v.jsx(gp.StrictMode,{children:v.jsx(Vv,{})}));
